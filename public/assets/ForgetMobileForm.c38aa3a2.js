var x=(F,_,a)=>new Promise((d,w)=>{var M=n=>{try{u(a.next(n))}catch(c){w(c)}},h=n=>{try{u(a.throw(n))}catch(c){w(c)}},u=n=>n.done?d(n.value):Promise.resolve(n.value).then(M,h);u((a=a.apply(F,_)).next())});import{a as T,b as V,u as A,F as B,s as N,r as C,q as $,x as G,o as z,U as j,A as i,i as l,j as e,I as y,V as g,W as b,e as f,X as q,D as I,t as R,Y as E,f as K,a2 as W,$ as X,G as Y}from"./index.10ef4608.js";/* empty css              *//* empty css               */import{v as P,u as H,e as J}from"./myMitt.c3f6feaa.js";import{u as Q}from"./useCountDown.23082dea.js";import{u as Z,L as ee}from"./useCustomLogin.887e5231.js";import"./index.3b12af83.js";import"./mitt.550594b0.js";const oe={class:"content flex"},te={class:"code"},ae={class:"mobile"},se={class:"verification flex"},le={class:"code"},ie={class:"btn"},ne=V({__name:"ForgetMobileForm",props:{handleBackLogin:{type:Function,default:()=>({})}},setup(F,{expose:_}){const{t:a}=A(),d=B.Item,w=B.useForm,{createMessage:M}=Y(),{setLoginState:h}=Z(),{countDownFn:u,countDown:n,BtnDisabled:c}=Q(P.FORGETMOBILEFORM),t=N({username:void 0,code:"86",mobile:void 0,verification:void 0,password:void 0,confirmPwd:void 0}),S=C(!1),L=C([{value:"86",label:"+86"}]),k=H(t),{resetFields:O,validate:p,validateInfos:m}=w(t,k),U=()=>x(this,null,function*(){try{if(!(yield p()))return;S.value=!0;const o={username:t.username,verification:t.verification,password:t.password,phone:t.mobile},r=yield W(o);if(r.code!==200)return!1;M.success({content:a(r.msg),duration:2}),h(ee.LOGIN),J.emit("clearLoginForm")}catch(v){console.error(v)}finally{S.value=!1}}),D=()=>x(this,null,function*(){if(!(yield p("mobile")))return;u();const o={id:"RESET_EMAIL_VERIFICATION",phone:t.mobile,phoneRegion:t.code};u();const r=yield X(o);if(r.code!==200)return!1;M.success({content:a(r.msg),duration:2})});return $(()=>{localStorage.getItem(P.FORGETMOBILEFORM)&&u()}),_({resetFields:O}),(v,o)=>{const r=G("CustomButton");return z(),j(e(B),null,{default:i(()=>[l(e(d),g(b(e(m).username)),{default:i(()=>[l(e(y),{value:t.username,"onUpdate:value":o[0]||(o[0]=s=>t.username=s),valueModifiers:{trim:!0},placeholder:e(a)("login.placeAccount"),autocomplete:"off",onBlur:o[1]||(o[1]=s=>e(p)("username",{trigger:"blur"}).catch(()=>{}))},null,8,["value","placeholder"])]),_:1},16),l(e(d),g(b(e(m).mobile)),{default:i(()=>[f("div",oe,[f("div",te,[l(e(q),{value:t.code,"onUpdate:value":o[2]||(o[2]=s=>t.code=s),valueModifiers:{trim:!0},options:L.value},null,8,["value","options"])]),f("div",ae,[l(e(y),{type:"number",value:t.mobile,"onUpdate:value":o[3]||(o[3]=s=>t.mobile=s),valueModifiers:{trim:!0},placeholder:e(a)("login.placePhone"),autocomplete:"off",onBlur:o[4]||(o[4]=s=>e(p)("mobile",{trigger:"blur"}).catch(()=>{}))},null,8,["value","placeholder"])])])]),_:1},16),l(e(d),g(b(e(m).verification)),{default:i(()=>[f("div",se,[f("div",le,[l(e(y),{value:t.verification,"onUpdate:value":o[5]||(o[5]=s=>t.verification=s),valueModifiers:{trim:!0},placeholder:e(a)("login.placeCode"),autocomplete:"off"},null,8,["value","placeholder"])]),f("div",ie,[l(r,{btnStyle:{width:"130px",height:"60px",background:"#EDEEF5",borderRadius:"4px",color:"#3287F7",fontSize:"20px"},onClick:D,disabled:e(c)},{default:i(()=>[I(R(e(c)?`${e(n)}s`:e(a)("login.getCode")),1)]),_:1},8,["disabled"])])])]),_:1},16),l(e(d),g(b(e(m).password)),{default:i(()=>[l(e(E),{value:t.password,"onUpdate:value":o[6]||(o[6]=s=>t.password=s),valueModifiers:{trim:!0},placeholder:e(a)("login.placePwd"),type:"password",autocomplete:"new-password",onBlur:o[7]||(o[7]=s=>e(p)("password",{trigger:"blur"}).catch(()=>{}))},null,8,["value","placeholder"]),K(' <StrengthMeter :show-input="false" :value="MobileForm.password" v-if="isPwdReg" /> ')]),_:1},16),l(e(d),g(b(e(m).confirmPwd)),{default:i(()=>[l(e(E),{value:t.confirmPwd,"onUpdate:value":o[8]||(o[8]=s=>t.confirmPwd=s),valueModifiers:{trim:!0},placeholder:e(a)("login.placeEnterPwd"),type:"password",autocomplete:"new-password",onBlur:o[9]||(o[9]=s=>e(p)("confirmPwd",{trigger:"blur"}).catch(()=>{}))},null,8,["value","placeholder"])]),_:1},16),l(e(d),null,{default:i(()=>[l(r,{btnStyle:{width:"100%",height:"60px",background:"#2F54EB",borderRadius:"4px",color:"#ffffff",fontSize:"20px",marginBottom:"20px"},onClick:U},{default:i(()=>[I(R(e(a)("login.reset")),1)]),_:1}),l(r,{btnStyle:{width:"100%",height:"60px",background:"#ffffff",border:"1px solid #999999",borderRadius:"4px",color:"#666666",fontSize:"20px"},onClick:F.handleBackLogin},{default:i(()=>[I(R(e(a)("login.cacel")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})}}});var be=T(ne,[["__scopeId","data-v-6c096c7b"]]);export{be as default};
