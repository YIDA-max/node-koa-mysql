var E=(c,P,m)=>new Promise((e,v)=>{var s=r=>{try{d(m.next(r))}catch(u){v(u)}},p=r=>{try{d(m.throw(r))}catch(u){v(u)}},d=r=>r.done?e(r.value):Promise.resolve(r.value).then(s,p);d((m=m.apply(c,P)).next())});import{u as q,B as I}from"./useForm.98d7b8ca.js";import{a as N,b as V,u as D,ay as R,l as U,r as C,q as O,o as J,c as M,e as x,t as b,i as h,A as _,j as i,X as A,D as T,ab as H,p as W,k as X}from"./index.10ef4608.js";import{s as z}from"./supportingPaper.267f0f46.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";const K=c=>(W("data-v-0be77d3f"),c=c(),X(),c),L={style:{display:"flex",width:"100%"}},Q=K(()=>x("div",{style:{width:"10%",textAlign:"center",margin:"10px 0px 0px 0px"}},null,-1)),Y={style:{width:"10%",textAlign:"center",display:"flex",justifyContent:"center"}},Z={style:{margin:"10px 0px 0px 0px",width:"55px",height:"30px",borderRadius:"5px",lineHeight:"30px",textAlign:"center",position:"relative",right:"16px"}},$={style:{width:"70%",display:"flex",justifyContent:"center",alignItems:"center",margin:"10px 0px 0px 0px"}},ee={style:{width:"10%",textAlign:"center",margin:"10px 0px 0px 0px",position:"relative",right:"10px"}},oe=V({__name:"Comparisons",props:{arr:Array,serial:{type:Number,required:!0},ComparisonsArr:Array},emits:["delete"],setup(c,{expose:P,emit:m}){const e=c,{t:v}=D(),s=z();R(()=>s.FilePacketgroupName,()=>{f().controlGroup&&!s.FilePacketgroupName.some(o=>o.value==f().controlGroup)&&g({controlGroup:""}),f().experienceGroup&&!s.FilePacketgroupName.some(o=>o.value==f().experienceGroup)&&g({experienceGroup:""})},{deep:!0});const p=U(()=>Array.from(new Set(s.FilePacketgroupName.map(o=>o.value))).map(o=>s.FilePacketgroupName.find(a=>a.value===o))),d=C([]),r=C(!1),u=C(!1),[w,{setFieldsValue:g,getFieldsValue:f,setProps:S,validate:k}]=q({labelWidth:120,schemas:[{field:"comparisonScheme",component:"Input",rules:[{required:!0}],label:"",colProps:{span:0,offset:0},componentProps:{allowClear:!1}},{field:"controlGroup",component:"Select",slot:"controlGroup",rules:[{validator:()=>r.value?Promise.reject("\u5BF9\u7167\u7EC4\u4E0E\u5B9E\u9A8C\u7EC4\u76F8\u540C"):u.value?Promise.reject("\u5B58\u5728\u76F8\u540C\u6BD4\u8F83\u65B9\u6848"):Promise.resolve(),required:!0}],label:"",colProps:{span:4,offset:2},componentProps:{options:p,placeholder:" "}},{field:"experienceGroup",component:"Select",slot:"experienceGroup",rules:[{validator:()=>r.value?Promise.reject("\u5BF9\u7167\u7EC4\u4E0E\u5B9E\u9A8C\u7EC4\u76F8\u540C"):u.value?Promise.reject("\u5B58\u5728\u76F8\u540C\u6BD4\u8F83\u65B9\u6848"):Promise.resolve(),required:!0}],label:"",colProps:{span:4,offset:4},componentProps:{options:p,placeholder:" "}},{field:"breaks",component:"Input",label:"",colProps:{span:5,offset:3},componentProps:{style:{borderRadius:"5px",border:"1px solid #999999",height:"30px"},placeholder:" "}}],showActionButtonGroup:!1}),j=o=>{m("delete",o)},F=(o,a)=>E(this,null,function*(){r.value=!1,u.value=!1,s.comparisonsValue[e.serial][a]=o,s.comparisonsValue[e.serial].controlGroup==s.comparisonsValue[e.serial].experienceGroup&&(r.value=!0),n(s.comparisonsValue)&&(u.value=!0),k();function n(t){const l=JSON.parse(JSON.stringify(t)),y=new Set;for(let B of l){const G=B.controlGroup+B.experienceGroup;if(y.has(G))return!0;y.add(G)}return!1}});return O(()=>{var o;(o=e.arr)==null||o.forEach((a,n)=>{if(a){const t={value:"",label:""};t.value=a,t.label=a,d.value.push(t)}}),s.comparisonsValue[e.serial]={controlGroup:e.serial+"controlGroup",experienceGroup:e.serial+"experienceGroup"},setTimeout(()=>{S({schemas:[{field:"comparisonScheme",component:"Input",rules:[{required:!0}],label:"",colProps:{span:0,offset:0},defaultValue:e.serial+1,componentProps:{allowClear:!1}},{field:"controlGroup",component:"Select",label:"",colProps:{span:4,offset:2},slot:"controlGroup",rules:[{validator:()=>r.value?Promise.reject("\u5BF9\u7167\u7EC4\u4E0E\u5B9E\u9A8C\u7EC4\u76F8\u540C"):u.value?Promise.reject("\u5B58\u5728\u76F8\u540C\u6BD4\u8F83\u65B9\u6848"):Promise.resolve(),required:!0}],componentProps:{options:p}},{field:"experienceGroup",component:"Select",label:"",colProps:{span:4,offset:4},slot:"experienceGroup",rules:[{validator:()=>r.value?Promise.reject("\u5BF9\u7167\u7EC4\u4E0E\u5B9E\u9A8C\u7EC4\u76F8\u540C"):u.value?Promise.reject("\u5B58\u5728\u76F8\u540C\u6BD4\u8F83\u65B9\u6848"):Promise.resolve(),required:!0}],componentProps:{options:p}},{field:"breaks",component:"Input",label:"",colProps:{span:5,offset:3},componentProps:{style:{borderRadius:"5px",border:"1px solid #999999",height:"30px"},placeholder:" "}}]})},1e3)}),P({getFieldsValue:f,setFieldsValue:g}),(o,a)=>(J(),M("div",L,[Q,x("div",Y,[x("div",Z,b((e==null?void 0:e.serial)+1),1)]),x("div",$,[h(i(I),{onRegister:i(w),style:{width:"100%"}},{controlGroup:_(({model:n,field:t})=>[h(i(A),{value:n[t],"onUpdate:value":l=>n[t]=l,options:i(p),onChange:l=>{F(l,t)}},null,8,["value","onUpdate:value","options","onChange"])]),experienceGroup:_(({model:n,field:t})=>[h(i(A),{value:n[t],"onUpdate:value":l=>n[t]=l,options:i(p),onChange:l=>{F(l,t)}},null,8,["value","onUpdate:value","options","onChange"])]),_:1},8,["onRegister"])]),x("div",ee,[h(i(H),{onClick:a[0]||(a[0]=()=>{j(e==null?void 0:e.serial)}),type:"link"},{default:_(()=>[T(b(i(v)("AllMessage.delete")),1)]),_:1})])]))}});var Ge=N(oe,[["__scopeId","data-v-0be77d3f"]]);export{Ge as default};
