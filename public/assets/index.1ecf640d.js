var V=(O,l,p)=>new Promise((m,k)=>{var y=d=>{try{g(p.next(d))}catch(f){k(f)}},P=d=>{try{g(p.throw(d))}catch(f){k(f)}},g=d=>d.done?m(d.value):Promise.resolve(d.value).then(y,P);g((p=p.apply(O,l)).next())});import q from"./index.ace02000.js";import{P as N}from"./index.8d0858e7.js";import{a as W,b as j,u as z,cJ as G,r as x,ch as L,aG as $,q as H,x as R,o as h,c as J,i,A as n,j as t,cv as Q,cl as Y,I as K,d5 as Z,d6 as ee,U as C,D as _,t as w,f as b,X as U}from"./index.10ef4608.js";/* empty css               *//* empty css              *//* empty css               */import{u as te,B as ae}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as oe}from"./useBatchDelete.9dc1ae07.js";import ne from"./addOrEditOrViewModal.9a112ce0.js";import{u as le}from"./index.c8f8ec06.js";import{q as re,s as se,a as ie,R as ue}from"./instrument.c1311afa.js";import{h as I}from"./homePage.0537fe58.js";import"./CustomConfirmModal.092d3aa9.js";import"./modal-error.7cada6d5.js";import"./upData.f560472a.js";/* empty css                *//* empty css                */import"./platfrom.439ed019.js";import"./upData.88016457.js";import"./download.66a6d137.js";import"./uploadIng.ae5152b5.js";import"./uploadError.b1a02ec7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";const pe=j({__name:"index",setup(O){const{t:l}=z(),{hasPermission:p}=G(),m=x(),k=x(),y=x(),P=L.RangePicker,[g,{openModal:d}]=le(),f=(s,e={})=>{d(!0,{statusText:s,record:e})},T=x(),B=x(),[M,{setProps:S,reload:v}]=te({columns:[{title:l("cm.instrument.serial"),dataIndex:"id",fixed:"left",sorter:!0,width:50},{title:l("cm.instrument.instrument"),dataIndex:"name",width:150},{title:l("cm.instrument.platformName"),dataIndex:"types",width:150,filters:B,format:(s,e,o)=>{let u="";return s.forEach(a=>{u=u+a.name}),u}},{title:l("cm.instrument.createAuthor"),width:150,dataIndex:"nickname"},{title:l("cm.instrument.updateTime"),width:150,sorter:!0,dataIndex:"updateTime"}],api:re,afterFetch:s=>s,useSearchForm:!0,searchInfo:{},formConfig:{labelWidth:120,showActionButtonGroup:!1,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"300px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:l("cm.instrument.operation"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:D,handleDeleteOrBatchDelete:E,selectionOptions:A}=oe(ue,v,S);$(()=>{S(A)});const F=s=>V(this,null,function*(){const e=yield I({meaning:s});m.value=e,m.value.forEach((o,u)=>{o.label=o.name,o.value=o.code,o.key=u})}),X=s=>V(this,null,function*(){const e=yield I({meaning:s});k.value=e,k.value.forEach((o,u)=>{o.label=o.name,o.value=o.code,o.key=u})});return H(()=>V(this,null,function*(){T.value=yield se({}),T.value.forEach((e,o)=>{e.text=e.name,e.label=e.name,e.value=e.code,e.key=o}),B.value=yield ie({}),B.value.forEach((e,o)=>{e.text=e.name,e.label=e.name,e.value=e.code,e.key=o}),y.value=yield I({meaning:"multiomics_Management_type"}),y.value.forEach((e,o)=>{e.text=e.name,e.label=e.name,e.value=e.code,e.key=o});const s=yield I({meaning:""});m.value=s,m.value.forEach((e,o)=>{e.text=e.name,e.label=e.name,e.value=e.code,e.key=o})})),(s,e)=>{const o=R("CustomButton"),u=R("a-button");return h(),J("div",null,[i(t(N),{contentFullHeight:!0},{default:n(()=>[i(t(Q),null,{default:n(()=>[i(t(Y),{span:24},{default:n(()=>[i(t(ae),{onRegister:t(M)},{"form-input":n(({model:a,field:r})=>[i(t(K),{value:a[r],"onUpdate:value":c=>a[r]=c,allowClear:"",onPressEnter:e[0]||(e[0]=()=>{t(v)()}),onChange:e[1]||(e[1]=({type:c})=>{c=="click"&&t(v)()}),placeholder:t(l)("cm.instrument.inputSearch")},{prefix:n(()=>[i(t(Z))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":n(({model:a,field:r})=>[i(t(P),{value:a[r],"onUpdate:value":c=>a[r]=c,onChange:e[2]||(e[2]=c=>t(v)()),separator:"-"},{suffixIcon:n(()=>[i(t(ee))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:n(()=>[t(p)("cm:unit:add")?(h(),C(o,{key:0,btnStyle:{backgroundColor:"#2F54EB"},onClick:e[3]||(e[3]=()=>{f("add")})},{default:n(()=>[_(w(t(l)("cm.instrument.add")),1)]),_:1})):b("v-if",!0),t(p)(["cm:unit:del"])?(h(),C(o,{key:1,size:"middle",shape:"round",disabled:t(D),onClick:e[4]||(e[4]=()=>{t(E)(null)}),style:{background:"#fff",color:"#202020",border:"1px solid #666666",margin:"0px 0px 0px 10px",borderRadius:"4px"}},{default:n(()=>[_(w(t(l)("mom.deletes")),1)]),_:1},8,["disabled"])):b("v-if",!0),i(q,{callback:()=>{t(v)()}},null,8,["callback"])]),"form-type":n(({model:a,field:r})=>[i(t(U),{ref:"select",value:a[r],"onUpdate:value":c=>a[r]=c,allowClear:"",options:y.value,onChange:()=>{F(a[r]),a.instrumentSelectValue=[],a.platformInputValue="",a.instrumentInputValue=""}},null,8,["value","onUpdate:value","options","onChange"])]),"form-name":n(({model:a,field:r})=>[i(t(U),{ref:"select",value:a[r],"onUpdate:value":c=>a[r]=c,style:{width:"220px"},allowClear:"",options:m.value,onChange:()=>{X(a[r]),a.instrumentSelectValue=[],a.platformInputValue="",a.instrumentInputValue=""}},null,8,["value","onUpdate:value","options","onChange"])]),action:n(({record:a})=>[t(p)(["cm:main:view"])?(h(),C(u,{key:0,type:"link",onClick:()=>{f("view",a)}},{default:n(()=>[_(w(t(l)("cm.masterProject.lookto")),1)]),_:2},1032,["onClick"])):b("v-if",!0),t(p)(["cm:type:edit"])?(h(),C(u,{key:1,type:"link",onClick:()=>{f("edit",a)}},{default:n(()=>[_(w(t(l)("cm.type.edit")),1)]),_:2},1032,["onClick"])):b("v-if",!0),t(p)(["cm:type:del"])?(h(),C(u,{key:2,type:"link",onClick:()=>{t(E)(a)}},{default:n(()=>[_(w(t(l)("cm.type.delete")),1)]),_:2},1032,["onClick"])):b("v-if",!0)]),_:1},8,["onRegister"])]),_:1})]),_:1}),i(ne,{onRegister:t(g),leiXingCode:T.value,success:()=>{t(v)()}},null,8,["onRegister","leiXingCode","success"])]),_:1})])}}});var et=W(pe,[["__scopeId","data-v-091c7eae"]]);export{et as default};
