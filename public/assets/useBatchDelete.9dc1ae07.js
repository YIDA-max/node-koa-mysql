var f=(n,u,o)=>new Promise((a,e)=>{var i=s=>{try{D(o.next(s))}catch(m){e(m)}},v=s=>{try{D(o.throw(s))}catch(m){e(m)}},D=s=>s.done?a(s.value):Promise.resolve(s.value).then(i,v);D((o=o.apply(n,u)).next())});import{r as O,l as C,G as R}from"./index.10ef4608.js";import{C as p}from"./index.866ec2c8.js";function E(n,u,o){const{createMessage:a}=R(),e=O([]);let i=[];return{hasBatchDelete:C(()=>e.value.length<=0),selectionOptions:{rowKey:"id",clickToRowSelect:!1,rowSelection:{onSelect:(c,t,r)=>{const y=r.map(l=>l.id);i=r,e.value=y},onSelectAll:(c,t,r)=>{const y=t.map(l=>l.id);i=t,e.value=y},type:"checkbox"}},handleDeleteOrBatchDelete:(...y)=>f(this,[...y],function*(c=null,t=!1,r=[]){o({loading:!0});try{if(c&&!t)p({onOk:()=>f(this,null,function*(){yield n({ids:[c.id]}),a.success("\u5220\u9664\u6210\u529F"),u(),e.value=[]}),onCancel:()=>{console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5220\u9664")}});else if(!c&&!t){const l=e.value;p({onOk:()=>f(this,null,function*(){yield n({ids:l}),a.success("\u6279\u91CF\u5220\u9664\u6210\u529F"),e.value=[],u()}),onCancel:()=>{console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5220\u9664")}})}else!c&&t&&p({onOk:()=>f(this,null,function*(){const l=i.map(d=>{const w={};return r.forEach(h=>{w[h]=d[h]}),w}),g=yield n({removeRequertList:l});g.success?a.success(g.msg):a.error(g.msg),u(),e.value=[]}),onCancel:()=>{console.log("\u7528\u6237\u53D6\u6D88\u4E86\u5220\u9664")}})}finally{o({loading:!1}),u(),e.value=[]}}),resetSelectedRowKeys:()=>{e.value=[]},selectedRowIds:e}}export{E as u};
