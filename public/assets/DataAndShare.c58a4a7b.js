var E=(w,g,p)=>new Promise((D,i)=>{var B=o=>{try{m(p.next(o))}catch(s){i(s)}},S=o=>{try{m(p.throw(o))}catch(s){i(s)}},m=o=>o.done?D(o.value):Promise.resolve(o.value).then(B,S);m((p=p.apply(w,g)).next())});import{u as U,B as V}from"./useForm.98d7b8ca.js";import{b as F,r as v,l as b,cn as C,j as e,q as R,o as L,c as N,i as a,A as l,cv as P,cl as h,X as y,ab as _,D as O}from"./index.10ef4608.js";/* empty css               */import{S as j}from"./add.f693dce6.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./useSetFrom.689ec4a2.js";const G=O("add"),M=O("del"),T=O("add"),W=O("del"),ve=F({__name:"DataAndShare",setup(w,{expose:g}){const p=v([]),D=v([]),i=v([]),B=b(()=>C(e(i)).map(t=>(t.disabled=e(D).indexOf(t.value)!==-1,t))),S=b(()=>C(e(i)).map(t=>(t.disabled=e(p).indexOf(t.value)!==-1,t))),[m,{validate:o,appendSchemaByField:s,removeSchemaByFiled:A}]=U({schemas:[{field:"DataOwner",component:"Input",label:"\u6570\u636E\u6240\u6709\u8005",slot:"DataOwner",defaultValue:[],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u6240\u6709\u4EBA",type:"array",trigger:"change"}],colProps:{span:19,offset:2}},{field:"ShareOne",component:"Input",label:"\u5171\u4EAB\u4EBA",slot:"ShareOne",defaultValue:[],colProps:{span:19,offset:2}}],labelWidth:120,baseColProps:{span:19,offset:2},showActionButtonGroup:!1}),n=v([]),$=()=>{n.value.length<=10&&n.value.length<=10&&(s({field:`DataOwnerPhone${n.value.length}`,component:"Input",label:"\u5176\u4ED6\u6240\u6709\u8005\u7535\u8BDD",colProps:{span:6,offset:3},required:!0},"DataOwner"),s({field:`DataOwnerEmail${n.value.length}`,component:"Input",label:"\u5176\u4ED6\u6240\u6709\u8005\u90AE\u7BB1",colProps:{span:6,offset:3},required:!0},"DataOwner"),n.value.push(n.value.length+1))},k=()=>{A([`DataOwnerPhone${n.value.length-1}`,`DataOwnerEmail${n.value.length-1}`]),n.value.splice(n.value.length-1,1)},u=v([]),x=()=>{u.value.length<=10&&(s({field:`ShareOnePhone${u.value.length}`,component:"Input",label:"\u5176\u4ED6\u5171\u4EAB\u4EBA\u7535\u8BDD",colProps:{span:6,offset:3},required:!0},"ShareOne"),s({field:`ShareOneEmail${u.value.length}`,component:"Input",label:"\u5176\u4ED6\u5171\u4EAB\u4EBA\u90AE\u7BB1",colProps:{span:6,offset:3},required:!0},"ShareOne"),u.value.push(u.value.length+1))},q=()=>{A([`ShareOnePhone${u.value.length-1}`,`ShareOneEmail${u.value.length-1}`]),u.value.splice(u.value.length-1,1)};R(()=>E(this,null,function*(){const t=yield j();i.value=t,i.value.forEach((d,r)=>{d.label=d.nickname,d.value=d.nickname,d.key=r})}));function I(){return E(this,null,function*(){try{const[t]=yield Promise.all([o()]);return t}catch(t){console.log(t)}})}return g({DataAndShareSubmitAll:I}),(t,d)=>(L(),N("div",null,[a(e(V),{onRegister:e(m)},{DataOwner:l(({model:r,field:c})=>[a(e(P),null,{default:l(()=>[a(e(h),{span:10},{default:l(()=>[a(e(y),{ref:"select",value:r[c],"onUpdate:value":f=>r[c]=f,style:{width:"220px"},allowClear:"",mode:"multiple",options:e(B),placeholder:"Please select",onChange:f=>p.value=r[c]},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1024),a(e(h),{span:3},{default:l(()=>[a(e(_),{onClick:$},{default:l(()=>[G]),_:1})]),_:1}),a(e(h),{span:3},{default:l(()=>[a(e(_),{onClick:k},{default:l(()=>[M]),_:1})]),_:1})]),_:2},1024)]),ShareOne:l(({model:r,field:c})=>[a(e(P),null,{default:l(()=>[a(e(h),{span:10},{default:l(()=>[a(e(y),{ref:"select",value:r[c],"onUpdate:value":f=>r[c]=f,style:{width:"220px"},allowClear:"",mode:"multiple",options:e(S),placeholder:"Please select",onChange:f=>D.value=r[c]},null,8,["value","onUpdate:value","options","onChange"])]),_:2},1024),a(e(h),{span:3},{default:l(()=>[a(e(_),{onClick:x},{default:l(()=>[T]),_:1})]),_:1}),a(e(h),{span:3},{default:l(()=>[a(e(_),{onClick:q},{default:l(()=>[W]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["onRegister"])]))}});export{ve as default};
