var I=Object.defineProperty;var b=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var U=(e,o,n)=>o in e?I(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,h=(e,o)=>{for(var n in o||(o={}))V.call(o,n)&&U(e,n,o[n]);if(b)for(var n of b(o))F.call(o,n)&&U(e,n,o[n]);return e};import N from"./UploadModal.694f1ec6.js";import R from"./UploadPreviewModal.af08562e.js";import{a as T,b as $,al as A,aK as j,u as E,r as H,l as L,bF as K,ay as S,c4 as q,x as l,o as s,c as g,i as r,A as i,D as d,t as u,U as z,ao as k,f as w,B as G,j as J}from"./index.10ef4608.js";import{u as y}from"./index.c8f8ec06.js";import{u as O}from"./FileList.vue_vue_type_style_index_0_lang.9d914221.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./data.4533b7dc.js";/* empty css               */import"./TableAction.edf9a202.js";/* empty css               */import"./useAttrs.1d381a3e.js";import"./ThumbUrl.8b660da0.js";/* empty css                */import"./download.66a6d137.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";const Q=$({name:"BasicUpload",components:{UploadModal:N,UploadPreviewModal:R,Icon:A,Tooltip:j},props:O,emits:["change","delete","preview-delete","update:value"],setup(e,{emit:o,attrs:n}){const{t:C}=E(),[M,{openModal:P}]=y(),[p,{openModal:m}]=y(),t=H([]),c=L(()=>{const{emptyHidePreview:a}=e;return a&&a?t.value.length>0:!0}),v=L(()=>{const a=h(h({},n),e);return K(a,"onChange")});S(()=>e.value,(a=[])=>{t.value=q(a)?a:[]},{immediate:!0});function f(a){t.value=[...J(t),...a||[]],o("update:value",t.value),o("change",t.value)}function D(a){t.value=[...a||[]],o("update:value",t.value),o("change",t.value)}function _(a){o("delete",a)}function B(a){o("preview-delete",a)}return{registerUploadModal:M,openUploadModal:P,handleChange:f,handlePreviewChange:D,registerPreviewModal:p,openPreviewModal:m,fileList:t,showPreview:c,bindValue:v,handleDelete:_,handlePreviewDelete:B,t:C}}});function W(e,o,n,C,M,P){const p=l("a-button"),m=l("Icon"),t=l("Tooltip"),c=l("a-button-group"),v=l("UploadModal"),f=l("UploadPreviewModal");return s(),g("div",null,[r(c,null,{default:i(()=>[r(p,{type:"primary",onClick:e.openUploadModal,preIcon:"carbon:cloud-upload"},{default:i(()=>[d(u(e.t("component.upload.upload")),1)]),_:1},8,["onClick"]),e.showPreview?(s(),z(t,{key:0,placement:"bottom"},{title:i(()=>[d(u(e.t("component.upload.uploaded"))+" ",1),e.fileList.length?(s(),g(k,{key:0},[d(u(e.fileList.length),1)],64)):w("v-if",!0)]),default:i(()=>[r(p,{onClick:e.openPreviewModal},{default:i(()=>[r(m,{icon:"bi:eye"}),e.fileList.length&&e.showPreviewNumber?(s(),g(k,{key:0},[d(u(e.fileList.length),1)],64)):w("v-if",!0)]),_:1},8,["onClick"])]),_:1})):w("v-if",!0)]),_:1}),r(v,G(e.bindValue,{previewFileList:e.fileList,onRegister:e.registerUploadModal,onChange:e.handleChange,onDelete:e.handleDelete}),null,16,["previewFileList","onRegister","onChange","onDelete"]),r(f,{value:e.fileList,onRegister:e.registerPreviewModal,onListChange:e.handlePreviewChange,onDelete:e.handlePreviewDelete},null,8,["value","onRegister","onListChange","onDelete"])])}var fe=T(Q,[["render",W]]);export{fe as default};
