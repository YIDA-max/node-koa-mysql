var _=(x,c,s)=>new Promise((r,d)=>{var g=a=>{try{w(s.next(a))}catch(i){d(i)}},y=a=>{try{w(s.throw(a))}catch(i){d(i)}},w=a=>a.done?r(a.value):Promise.resolve(a.value).then(g,y);w((s=s.apply(x,c)).next())});import{u as O,bm as S,b as D,r as b,ay as k,q as G,x as j,o as V,c as M,i as f,A as m,j as v,X as F,e as L,D as N,t as C,y as q,z as W,ao as X,ap as $,cl as J,ab as K,cv as Q}from"./index.10ef4608.js";import{u as Y,B as Z}from"./useForm.98d7b8ca.js";/* empty css               */import{u as I}from"./casual.c3003c80.js";import ee from"./V3ColorPicker.3aeb3ea0.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./ColorPicker.3725ed80.js";import"./ColorPanel.209bf7d4.js";import"./draggable.354c5b1e.js";import"./ColorPreview.6aea0981.js";import"./ColorHue.94d928ef.js";import"./ColorAlpha.071f638e.js";import"./ColorValue.246a701d.js";import"./ColorList.125944a3.js";const{t:h}=O(),te=()=>{const x=[{field:"title",component:"Input",label:h("AllMessage.visual.two.PreferencesList.title"),colProps:{span:7,offset:0}},{field:"x_title",component:"Input",label:h("AllMessage.visual.two.PreferencesList.x_title")},{field:"y_title",component:"Input",label:h("AllMessage.visual.two.PreferencesList.y_title")},{field:"height",component:"Input",label:h("AllMessage.visual.two.PreferencesList.height"),rules:[{validator:(c,s)=>_(void 0,null,function*(){return isNaN(s)&&s?Promise.reject(h("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}],colProps:{span:7,offset:0}},{field:"width",component:"Input",label:h("AllMessage.visual.two.PreferencesList.width"),rules:[{validator:(c,s)=>_(void 0,null,function*(){return isNaN(s)&&s?Promise.reject(h("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}]},{field:"col_chose",component:"Select",slot:"selectRowSelect",label:h("AllMessage.visual.two.PreferencesList.col_choseTwo")},{field:"alpha",component:"Input",label:h("AllMessage.visual.two.PreferencesList.alpha"),defaultValue:1,rules:[{validator:(c,s)=>_(void 0,null,function*(){return Number(s)<=1&&Number(s)>=.01?!0:Promise.reject("0.01~1")}),validateTrigger:"blur"}],colProps:{span:7,offset:0}},{field:"color",component:"Select",label:S("div",{style:"position: relative;top: 15px;"},[S("div",{},h("AllMessage.visual.two.PreferencesList.colorOne"))]),slot:"color",colProps:{span:24,offset:0}}];return x.forEach(c=>{c.component=="Select"&&(c.componentProps||(c.componentProps={}),c.componentProps.size="large")}),x},oe={style:{minHeight:"400px"}},le={style:{position:"relative",top:"0px",margin:"0px 0px 0px 0px"}},se={style:{width:"900px",maxHeight:"130px",height:"130px",overflow:"auto",border:"1px solid #d3d5db"}},ae={style:{}},re={style:{position:"relative",display:"inline-block",top:"8px"}},Ue=D({__name:"TheRidgeMap",props:{toNextFn:Function},setup(x,{expose:c}){const{t:s}=O(),r=I(),d=b([]),g=b([]),y=b(1),w=b(""),a=b([]),i=b([]),R=b([]);k(()=>a.value,()=>{let o="";a.value.map(l=>{o=o+`%23${l.color.slice(1)},`}),o=o.substr(0,o.length-1),w.value=o},{deep:!0});const P=()=>{for(var o="#",l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=0;t<6;t++){var e=parseInt(Math.random()*16);o+=l[e]}return o},z=o=>{if(o.length>0){i.value=[];const l=[...r.useVisualConstructionTwohander],t=[...r.useVisualConstructionTwobody];o.forEach(e=>{B(e,l,t)&&i.value.push({title:e})}),i.value.forEach((e,n)=>{a.value[n]={color:P()}})}else{d.value=[],i.value=[],a.value=[];const l=[...r.useVisualConstructionTwohander],t=[...r.useVisualConstructionTwobody];l.map(e=>{isNaN(t[0][e.dataIndex])||(e.label=e.title,e.value=e.title,d.value.push(e),a.value.push({color:P()}),i.value.push({title:e.title}))})}};function B(o,l,t){const e=l.find(p=>p.title===o);if(!e)return!1;const n=e.dataIndex;for(const p of t){const u=p[n];if(isNaN(u))return!1}return!0}const[U,{validate:T,resetFields:E}]=Y({labelWidth:110,schemas:te(),baseColProps:{span:7,offset:1},actionColOptions:{span:18,offset:4},showActionButtonGroup:!1}),H=()=>_(this,null,function*(){return w.value?{validate:yield T(),colorArr:w.value}:{validate:yield T()}});return k(()=>r.useVisualConstructionTwohander,()=>{E(),g.value=r.useVisualConstructionTwohander,g.value.forEach(t=>{t.label=t.title,t.value=t.title}),d.value=[],a.value=[],i.value=[];const o=[...r.useVisualConstructionTwohander],l=[...r.useVisualConstructionTwobody];o.map(t=>{l.length>0&&(isNaN(l[0][t.dataIndex])||(t.label=t.title,t.value=t.title,d.value.push(t),a.value.push({color:P()}),i.value.push({title:t.title})))})}),G(()=>{const o=setInterval(()=>{if(r.useVisualConstructionTwohander){g.value=r.useVisualConstructionTwohander,g.value.forEach(e=>{e.label=e.title,e.value=e.title}),d.value=[],a.value=[],i.value=[];const l=[...r.useVisualConstructionTwohander],t=[...r.useVisualConstructionTwobody];l.map(e=>{isNaN(t[0][e.dataIndex])||(e.label=e.title,e.value=e.title,d.value.push(e),a.value.push({color:P()}),i.value.push({title:e.title}))}),clearInterval(o)}},1e3)}),c({returnedValue:H,controlGroup:R}),(o,l)=>{const t=j("a-radio"),e=j("a-radio-group");return V(),M("div",oe,[f(v(Z),{onRegister:v(U)},{comparisons:m(({model:n,field:p})=>[f(v(F),{size:"large",options:d.value,value:n[p],"onUpdate:value":u=>n[p]=u,allowClear:"",showSearch:"","filter-option":(u,A)=>A.label.toLowerCase().indexOf(u.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),selectRowSelect:m(({model:n,field:p})=>[f(v(F),{size:"large",options:g.value,mode:"multiple",placeholder:v(s)("AllMessage.visual.two.PreferencesList.selectRowSelectPlaceholder"),value:n[p],"onUpdate:value":u=>n[p]=u,onChange:l[0]||(l[0]=u=>{z(u)}),allowClear:"",showSearch:"","filter-option":(u,A)=>A.label.toLowerCase().indexOf(u.toLowerCase())>=0},null,8,["options","placeholder","value","onUpdate:value","filter-option"])]),color:m(()=>[L("div",le,[f(e,{value:y.value,"onUpdate:value":l[1]||(l[1]=n=>y.value=n)},{default:m(()=>[f(t,{style:{display:"block",height:"30px",lineHeight:"30px"},value:1},{default:m(()=>[N(C(v(s)("AllMessage.visual.two.PreferencesList.default"))+":",1)]),_:1}),f(t,{style:{display:"block",height:"30px",lineHeight:"30px"},value:2},{default:m(()=>[N(C(v(s)("AllMessage.visual.two.PreferencesList.custom"))+": ",1)]),_:1}),q(L("div",se,[(V(!0),M(X,null,$(i.value,(n,p)=>(V(),M("div",{key:n.title,style:{margin:"0px 0px 0px 15px",width:"30%",height:"40px",display:"inline-block"}},[L("div",ae,[N(C(n.title)+C(v(s)("AllMessage.visual.two.PreferencesList.colorItem"))+" ",1),L("div",re,[f(ee,{value:a.value[p].color,"onUpdate:value":u=>a.value[p].color=u,size:"mini",theme:"light",width:400},null,8,["value","onUpdate:value"])])])]))),128))],512),[[W,y.value==2]])]),_:1},8,["value"])])]),_:1},8,["onRegister"]),f(v(Q),null,{default:m(()=>[f(v(J),{span:4,offset:11},{default:m(()=>[f(v(K),{size:"middle",style:{background:"#3152ed",color:"#ffffff",border:"1px solid #666666",margin:"0px 0px",borderRadius:"4px"},onClick:l[2]||(l[2]=()=>{x.toNextFn()})},{default:m(()=>[N(C(v(s)("AllMessage.visual.two.PreferencesList.confirm")),1)]),_:1})]),_:1})]),_:1})])}}});export{Ue as default};
