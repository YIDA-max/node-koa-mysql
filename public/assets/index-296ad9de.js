import{a as f,Q as x,i as D,j as R,bc as S,o as l,f as P,e as c,w as p,L as $,c as d,u as e,I as i,k as N,af as B,h as V,l as F}from"./index-4a8cc517.js";import{a as u}from"./index-b6b4562f.js";import{_ as L}from"./PreviewModal.vue_vue_type_script_setup_true_name_InfraPreviewModal_lang-37c5614a.js";import{c as O,s as W,_ as G}from"./ImportTableModal.vue_vue_type_script_setup_true_name_InfraImportTableModal_lang-5429683b.js";import{_ as j}from"./index-1ec106fd.js";import{_ as A}from"./useForm-f3f06b26.js";import{u as Q}from"./useTable-aaa095e4.js";import"./index-878008b6.js";import{b as q,d as z,s as H,e as J}from"./index-e4a1ad8d.js";import"./useWindowSizeFn-5faf2053.js";import"./FullscreenOutlined-b0e65115.js";import"./index-584da07d.js";import"./index-dd54262d.js";import"./useRefs-116b486d.js";import"./index-5a68e7a3.js";import"./index-4af91251.js";import"./index-0737cab3.js";import"./fromPairs-e099444b.js";import"./tree-56b28626.js";import"./eagerComputed-80ba1157.js";import"./index-529a9bc6.js";import"./get-626e6e61.js";import"./index-0f1be806.js";import"./useRender-3355e2aa.js";import"./dict-9afd743e.js";import"./index-6202a637.js";import"./index-e995ff17.js";import"./index-0114aff3.js";import"./index-310f637e.js";import"./useSize-e99e0e82.js";import"./useContentViewHeight-08ed5cff.js";import"./ArrowLeftOutlined-91a2b19b.js";import"./index-1c6e8fcc.js";import"./transButton-0a2e0cd4.js";import"./index-68db3d9c.js";import"./index-328db71b.js";import"./sortable.esm-261924ea.js";import"./RedoOutlined-1b6793d7.js";import"./index-326f1109.js";import"./index-1e0bc94a.js";import"./_baseIteratee-9c9af064.js";import"./scrollTo-8b7e49e7.js";import"./index-2a26e47c.js";import"./index-d5ec7d39.js";import"./index-1d60304b.js";import"./index-87ae8662.js";import"./uniqBy-4c5e11fd.js";const K=f({name:"InfraCodegen"}),Qe=f({...K,setup(U){const g=x(),{t}=D(),{createMessage:r}=F(),[b,{openModal:_}]=u(),[h,{openModal:C}]=u(),[T,{reload:s}]=Q({title:"代码生成列表",api:q,columns:O,formConfig:{labelWidth:120,schemas:W},useSearchForm:!0,showTableSetting:!0,showIndexColumn:!1,actionColumn:{width:360,title:t("common.action"),dataIndex:"action",fixed:"right"}});function w(o){_(!0,{record:o})}function I(o){g("/codegen/editTable?id="+o.id)}async function v(o){await z(o),r.success(t("common.successText"))}async function y(o){await H(o.id),r.success(t("common.successText")),s()}async function E(o){await J(o.id),r.success(t("common.delSuccessText")),s()}return(o,a)=>{const M=R("a-button"),k=S("auth");return l(),P("div",null,[c(e(j),{onRegister:e(T)},{toolbar:p(()=>[$((l(),d(M,{type:"primary",preIcon:e(i).IMPORT,onClick:a[0]||(a[0]=m=>e(C)(!0))},{default:p(()=>[N(B(e(t)("action.import")),1)]),_:1},8,["preIcon"])),[[k,["infra:codegen:create"]]])]),bodyCell:p(({column:m,record:n})=>[m.key==="action"?(l(),d(e(A),{key:0,actions:[{icon:e(i).PREVIEW,label:"预览",auth:"infra:codegen:preview",onClick:w.bind(null,n)},{icon:e(i).EDIT,label:e(t)("action.edit"),auth:"infra:codegen:update",onClick:I.bind(null,n)},{icon:e(i).DOWNLOAD,label:"生成",auth:"infra:codegen:download",onClick:v.bind(null,n)},{icon:e(i).RESET,label:e(t)("action.sync"),auth:"infra:codegen:update",popConfirm:{title:"确认要强制同步"+n.tableName+"表结构吗？",placement:"left",confirm:y.bind(null,n)}},{icon:e(i).DELETE,color:"error",label:e(t)("action.delete"),auth:"infra:codegen:delete",popConfirm:{title:e(t)("common.delMessage"),placement:"left",confirm:E.bind(null,n)}}]},null,8,["actions"])):V("",!0)]),_:1},8,["onRegister"]),c(L,{onRegister:e(b)},null,8,["onRegister"]),c(G,{onRegister:e(h),onSuccess:a[1]||(a[1]=m=>e(s)())},null,8,["onRegister"])])}}});export{Qe as default};
