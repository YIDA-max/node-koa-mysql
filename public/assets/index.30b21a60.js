var h=(w,l,r)=>new Promise((E,c)=>{var p=i=>{try{d(r.next(i))}catch(v){c(v)}},f=i=>{try{d(r.throw(i))}catch(v){c(v)}},d=i=>i.done?E(i.value):Promise.resolve(i.value).then(p,f);d((r=r.apply(w,l)).next())});import j from"./index.b98b0961.js";import{P as L}from"./index.8d0858e7.js";import{u as X,B as K,b as Q}from"./useForm.98d7b8ca.js";import{a as Y,b as Z,u as ee,cJ as te,r as x,ch as ae,aG as oe,q as le,x as A,o as b,c as ue,i as o,A as a,j as e,cv as se,cl as ie,I as ne,d5 as re,d6 as de,U as g,D as C,t as y,d7 as P,f as _,cS as pe,bN as me,e as k,X as ce,aL as fe}from"./index.10ef4608.js";/* empty css               *//* empty css              *//* empty css               */import{u as ve,B as Be}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as he,a as Ce,R as Ee}from"./supportingPaper.4ce68154.js";import{C as U}from"./index.866ec2c8.js";import{q as xe,d as I}from"./fileUpload.15aa5942.js";import{u as be,B as ge}from"./index.c8f8ec06.js";import{u as ye}from"./useBatchDelete.9dc1ae07.js";import"./CustomConfirmModal.7270b58a.js";import"./modal-error.7cada6d5.js";import"./upData.199298e5.js";/* empty css                *//* empty css                */import"./xlsx.bb920e2b.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */const _e=C("\u4FEE\u6539\u6570\u636E"),ke={style:{padding:"10px"}},we={style:{height:"50px",marginTop:"5px"}},Fe=C(" \u6A21\u7248\u7C7B\u578B: "),Te=Z({__name:"index",setup(w){const{t:l}=ee(),{hasPermission:r}=te(),E=new Date,c=new Date,p=x(!1),f=x("none"),d=x();E.setMonth(E.getMonth()-1),c.setMonth(c.getMonth()+1);const i=ae.RangePicker,v=x(),[R,{openModal:S}]=be(),[M,{setProps:F,reload:n,getSelectRows:O}]=ve({columns:[{title:l("cm.fileUpload.serial"),dataIndex:"id",width:150,sorter:!0},{title:l("cm.fileUpload.uploadTempName"),width:150,dataIndex:"fileMd5"},{title:l("cm.fileUpload.createAuthor"),width:150,dataIndex:"nickname"},{title:l("cm.fileUpload.TempType"),width:150,dataIndex:"genmicUploadTemplateType",filters:[{value:"\u4E3B\u9879\u76EE",text:"\u4E3B\u9879\u76EE"},{value:"\u7C7B\u578B",text:"\u7C7B\u578B"},{value:"\u5E73\u53F0",text:"\u5E73\u53F0"},{value:"\u4EEA\u5668",text:"\u4EEA\u5668"},{value:"\u591A\u7EC4\u5B66\u7BA1\u7406",text:"\u591A\u7EC4\u5B66\u7BA1\u7406"},{value:"\u6570\u636E\u8BF4\u660E\u8868\u4E0A\u4F20",text:"\u6570\u636E\u8BF4\u660E\u8868\u4E0A\u4F20"},{value:"\u5206\u6790\u9009\u53C2",text:"\u5206\u6790\u9009\u53C2"}],format:u=>u},{title:l("cm.fileUpload.updateTime"),width:150,sorter:!0,dataIndex:"updateTime"}],api:xe,afterFetch:u=>u,useSearchForm:!0,searchInfo:{ifGenmicUploadTemplateFile:!0},formConfig:{labelWidth:120,showActionButtonGroup:!1,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"300px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:l("cm.fileUpload.operation"),slots:{customRender:"action"},fixed:"right"}}),[N,{resetFields:D}]=X({labelWidth:100,schemas:[{field:"name",component:"Input",label:"\u6587\u4EF6\u540D\u79F0",rules:[{required:!0}],colProps:{span:24}}],submitButtonOptions:{text:"\u786E\u8BA4"},actionColOptions:{offset:14,span:10}}),V=()=>{O().forEach(u=>{I({id:u.id})}),setTimeout(()=>{n()},200)},q=u=>h(this,null,function*(){yield I(u),setTimeout(()=>{n()},200)}),z=u=>h(this,null,function*(){Ce({id:v.value.id,name:u.name}),D(),setTimeout(()=>{n()},200),S(!1)}),W=()=>{d.value.length>0?f.value="":f.value="none"},G=u=>h(this,null,function*(){const t=document.createElement("iframe");t.style.display="none",t.style.height="0",t.src=u.fullPath,document.body.appendChild(t),setTimeout(()=>{t.remove()},1e3)}),{hasBatchDelete:H,selectionOptions:J}=ye(Ee,n,F);return oe(()=>{F(J)}),le(()=>h(this,null,function*(){})),(u,t)=>{const $=A("CustomButton"),T=A("a-button");return b(),ue("div",null,[o(e(L),{contentFullHeight:!0},{default:a(()=>[o(e(se),null,{default:a(()=>[o(e(ie),{span:24},{default:a(()=>[o(e(Be),{onRegister:e(M)},{"form-input":a(({model:s,field:B})=>[o(e(ne),{value:s[B],"onUpdate:value":m=>s[B]=m,allowClear:"",onPressEnter:t[0]||(t[0]=()=>{e(n)()}),onChange:t[1]||(t[1]=({type:m})=>{m=="click"&&e(n)()}),placeholder:e(l)("cm.fileUpload.inputSearch")},{prefix:a(()=>[o(e(re))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":a(({model:s,field:B})=>[o(e(i),{value:s[B],"onUpdate:value":m=>s[B]=m,onChange:t[2]||(t[2]=m=>e(n)()),separator:"-"},{suffixIcon:a(()=>[o(e(de))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:a(()=>[o(j,{callback:e(n)},null,8,["callback"]),e(r)(["cm:template:del"])?(b(),g($,{key:0,size:"middle",shape:"round",disabled:e(H),onClick:t[3]||(t[3]=()=>{e(U)({onOk:()=>{V(),e(P).success("\u5220\u9664\u6210\u529F")}})}),style:{background:"#fff",color:"#202020",border:"1px solid #666666",margin:"0px 10px",borderRadius:"4px"}},{default:a(()=>[C(y(e(l)("mom.deletes")),1)]),_:1},8,["disabled"])):_("v-if",!0)]),action:a(({record:s})=>[e(r)(["cm:template:del"])?(b(),g(T,{key:0,type:"link",onClick:()=>{e(U)({onOk:()=>{q({id:s.id}),e(P).success("\u5220\u9664\u6210\u529F")}})}},{default:a(()=>[C(y(e(l)("cm.fileUpload.delete")),1)]),_:2},1032,["onClick"])):_("v-if",!0),e(r)(["cm:template:del"])?(b(),g(T,{key:1,type:"link",onClick:()=>{G(s)}},{default:a(()=>[C(y(e(l)("moa.ard.down")),1)]),_:2},1032,["onClick"])):_("v-if",!0)]),_:1},8,["onRegister"])]),_:1})]),_:1}),o(e(ge),{onRegister:e(R),showCancelBtn:!1,showOkBtn:!1},{default:a(()=>[o(e(pe),{canExpan:!1},{title:a(()=>[_e]),default:a(()=>[o(e(K),{onRegister:e(N),onSubmit:z},null,8,["onRegister"])]),_:1})]),_:1},8,["onRegister"]),o(e(me),{visible:p.value,"onUpdate:visible":t[7]||(t[7]=s=>p.value=s),title:"Basic Modal",onOk:t[8]||(t[8]=()=>{p.value=!1})},{default:a(()=>[k("div",ke,[k("div",we,[Fe,o(e(ce),{value:d.value,"onUpdate:value":t[4]||(t[4]=s=>d.value=s),style:{width:"80%"},label:"Select",mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u6A21\u7248\u7C7B\u578B",options:[{value:"\u7C7B\u578B",label:"\u7C7B\u578B"},{value:"\u5E73\u53F0",label:"\u5E73\u53F0"},{value:"\u4EEA\u5668",label:"\u4EEA\u5668"},{value:"\u591A\u7EC4\u5B66\u7BA1\u7406",label:"\u591A\u7EC4\u5B66\u7BA1\u7406"},{value:"\u6570\u636E\u8BF4\u660E\u8868\u4E0A\u4F20",label:"\u6570\u636E\u8BF4\u660E\u8868\u4E0A\u4F20"},{value:"\u5206\u6790\u9009\u53C2",label:"\u5206\u6790\u9009\u53C2"}],onChange:t[5]||(t[5]=()=>{W()})},null,8,["value"])]),k("div",{style:fe({display:f.value})},[o(e(Q),{onChange:t[6]||(t[6]=()=>{p.value=!1,e(n)()}),api:e(he),class:"my-5",accept:["xlsx","xls"],uploadParams:{type:JSON.stringify(d.value)},showPreviewNumber:!1,emptyHidePreview:!1,maxSize:100},null,8,["api","uploadParams"])],4)])]),_:1},8,["visible"])]),_:1})])}}});var ft=Y(Te,[["__scopeId","data-v-49753d07"]]);export{ft as default};
