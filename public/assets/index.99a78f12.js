var B=(c,u,n)=>new Promise((p,d)=>{var F=s=>{try{m(n.next(s))}catch(r){d(r)}},h=s=>{try{m(n.throw(s))}catch(r){d(r)}},m=s=>s.done?p(s.value):Promise.resolve(s.value).then(F,h);m((n=n.apply(c,u)).next())});import{u as k,b as A,B as H}from"./useForm.98d7b8ca.js";import{b as I,r as E,aG as P,q as v,o as S,c as O,i,A as l,j as t,cl as Y,ab as $,cv as N,cS as V,D as b}from"./index.10ef4608.js";/* empty css               */import{u as q,B as z}from"./useTable.a143d40c.js";import{T as Q}from"./TableAction.edf9a202.js";import{u as W,E as j,a as G,Q as U,R as J}from"./supportingPaper.4ce68154.js";import{u as K,B as L}from"./index.c8f8ec06.js";import{u as X}from"./useBatchDelete.9dc1ae07.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";const Z=()=>[{title:"\u7F16\u53F7",dataIndex:"id",width:150},{title:"\u8BF4\u660E\u6587\u4EF6\u540D\u79F0",width:150,sorter:!0,dataIndex:"name"},{title:"\u521B\u5EFA\u4EBA",width:150,sorter:!0,dataIndex:"nickname"},{title:"\u521B\u5EFA\u65F6\u95F4",width:150,sorter:!0,dataIndex:"createTime"},{title:"\u8BBE\u7F6E\u6253\u5370\u6A21\u7248",width:150,sorter:!0,dataIndex:"downloadTemplate",format:(c,u,n)=>c?"\u662F":"\u5426"}],ee=b("\u5220\u9664"),te=b("\u4FEE\u6539\u6570\u636E"),Se=I({__name:"index",setup(c){const u=new Date,n=new Date;u.setMonth(u.getMonth()-1),n.setMonth(n.getMonth()+1);const p=(a,e)=>{if(a){const o=new Date(a),g={"M+":o.getMonth()+1,"d+":o.getDate(),"H+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)));for(const f in g)new RegExp("("+f+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length===1?g[f]:("00"+g[f]).substr((""+g[f]).length)));return e}else return""};E([p(u,"yyyy-MM-dd HH:mm:ss"),p(n,"yyyy-MM-dd HH:mm:ss")]);const d=E(),[F,{openModal:h}]=K(),[m,{setProps:s,reload:r}]=q({columns:Z(),api:U,afterFetch:a=>a,useSearchForm:!0,searchInfo:{},formConfig:{labelWidth:120,schemas:[{field:"times",component:"RangePicker",label:"\u521B\u5EFA\u65E5\u671F",colProps:{span:12},componentProps:{format:"YYYY-MM-DD HH:mm:ss",placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],showTime:{format:"HH:mm:ss"}}},{field:"keyword",component:"Input",label:"\u5173\u952E\u5B57",colProps:{span:5}}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:"\u64CD\u4F5C",slots:{customRender:"action"},fixed:"right"}}),[x,{resetFields:C,setFieldsValue:w}]=k({labelWidth:100,schemas:[{field:"name",component:"Input",label:"\u6587\u4EF6\u540D\u79F0",colProps:{span:24}}],submitButtonOptions:{text:"\u786E\u8BA4"},actionColOptions:{offset:14,span:10}}),M=a=>{j({id:a.id}),setTimeout(()=>{r()},500)},R=a=>B(this,null,function*(){G({id:d.value.id,name:a.name}),C(),setTimeout(()=>{r()},200),h(!1)}),T=a=>{h(),d.value=a;const e={name:""};e.name=d.value.name,console.log(e),new Promise(o=>{o(1)}).then(()=>{w(e)})},{hasBatchDelete:y,handleDeleteOrBatchDelete:D,selectionOptions:_}=X(J,r,s);return P(()=>{s(_)}),v(()=>B(this,null,function*(){})),(a,e)=>(S(),O("div",null,[i(t(N),null,{default:l(()=>[i(t(Y),{span:24},{default:l(()=>[i(t(z),{onRegister:t(m)},{toolbar:l(()=>[i(t(A),{onChange:e[0]||(e[0]=()=>{}),api:t(W),class:"my-5",accept:["xlsx","xls"],"showPreviewNumber:true":""},null,8,["api"]),i(t($),{size:"middle",shape:"round",disabled:t(y),onClick:e[1]||(e[1]=o=>t(D)(null))},{default:l(()=>[ee]),_:1},8,["disabled"])]),action:l(({record:o})=>[i(t(Q),{actions:[{label:"\u663E\u793A",icon:"ic:outline-delete-outline",onClick:()=>{M(o)}},{label:"\u4FEE\u6539",icon:"ic:outline-delete-outline",onClick:()=>{T(o)}}]},null,8,["actions"])]),_:1},8,["onRegister"])]),_:1})]),_:1}),i(t(L),{onRegister:t(F),showCancelBtn:!1,showOkBtn:!1},{default:l(()=>[i(t(V),{canExpan:!1},{title:l(()=>[te]),default:l(()=>[i(t(H),{onRegister:t(x),onSubmit:R},null,8,["onRegister"])]),_:1})]),_:1},8,["onRegister"])]))}});export{Se as default};
