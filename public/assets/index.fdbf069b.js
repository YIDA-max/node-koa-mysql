var y=(B,A,e)=>new Promise((h,v)=>{var M=n=>{try{c(e.next(n))}catch(b){v(b)}},I=n=>{try{c(e.throw(n))}catch(b){v(b)}},c=n=>n.done?h(n.value):Promise.resolve(n.value).then(M,I);c((e=e.apply(B,A)).next())});import{P as W}from"./index.8d0858e7.js";import{a as H,b as X,cJ as L,u as q,aw as $,r as D,ch as ee,aG as te,q as ae,x as T,o as m,c as w,i as p,A as i,e as S,j as t,I as oe,d5 as se,d6 as re,U as x,D as f,t as d,f as u,aL as E,G as ie}from"./index.10ef4608.js";/* empty css              *//* empty css               */import le from"./index.1b21a591.js";import{u as ne,B as me}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as de,B as ue}from"./index.c8f8ec06.js";import{u as pe}from"./useBatchDelete.9dc1ae07.js";import{n as Ae,c as ce,b as N,d as F,e as ge}from"./homePage.0537fe58.js";import{u as fe}from"./useSetFrom.689ec4a2.js";import{C as he}from"./index.866ec2c8.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./CustomConfirmModal.675886fe.js";import"./modal-error.7cada6d5.js";import"./upData.5bb43c60.js";/* empty css                *//* empty css                */import"./platfrom.439ed019.js";import"./upData.88016457.js";import"./download.66a6d137.js";import"./uploadIng.1abff1a6.js";import"./uploadError.59374557.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */const ke={class:"momHomePageSearch"},ye={class:"lineClamp",style:{textAlign:"left"}},xe={class:"lineClamp",style:{textAlign:"left"}},ve=["onClick"],be={style:{width:"70px"},class:"text-left"},Ce=X({__name:"index",setup(B){const{hasPermission:A}=L(),{t:e}=q(),h=$(),v=fe(),M=new Date,I=new Date;M.setMonth(M.getMonth()-1),I.setMonth(I.getMonth()+1);const c=D(),n=D(),[b]=de(),{createMessage:R}=ie(),O=ee.RangePicker,[P,{setProps:_,reload:g,clearSelectedRowKeys:Q,getSelectRows:V}]=ne({columns:[{title:e("mom.id"),dataIndex:"id",width:150},{title:e("mom.subproject"),dataIndex:"subproject",width:280,slots:{customRender:"subproject"}},{title:e("mom.proJectAchivesName"),dataIndex:"proJectAchivesName",width:280,filters:n,slots:{customRender:"proJectAchivesName"}},{title:e("mom.looktype"),dataIndex:"looktype",width:150,filters:c},{title:e("mom.remarksto"),width:125,dataIndex:"remarks2",format:(s,o,l)=>s=="2"?e("mom.remarkstovalueyes"):e("mom.remarkstovalueno"),filterMultiple:!0,filters:[{text:e("mom.remarkstovalueyes"),value:"2"},{text:e("mom.remarkstovalueno"),value:"1"}]},{title:e("mom.remarks"),width:180,dataIndex:"remarks1",slots:{customRender:"remarks1"},filterMultiple:!0,filters:[{text:e("mom.remarksDone"),value:"done"},{text:e("mom.remarksUploading"),value:"uploading"},{text:e("mom.remarksUploadSuspended"),value:"upload_suspended"},{text:"\u672A\u4E0A\u4F20",value:"no"}]},{title:e("mom.dataType"),width:150,dataIndex:"dataType",format:(s,o,l)=>e(s?"mom.dataTypePublic":"mom.dataTypePrivate"),filterMultiple:!0,filters:[{text:e("mom.dataTypePublic"),value:"true"},{text:e("mom.dataTypePrivate"),value:"false"}]},{title:e("mom.nickname"),width:150,dataIndex:"nickname"},{title:e("mom.updateTime"),width:180,dataIndex:"updateTime",sorter:!0}],api:s=>y(this,null,function*(){const o=yield Ae({});c.value=o,c.value.forEach((r,a)=>{r.label=r.name,r.text=r.name,r.value=r.code,r.key=a});const l=yield ce({});return n.value=l,n.value.forEach((r,a)=>{r.label=r.projectName,r.text=r.projectName,r.value=r.id,r.key=a}),N(s)}),afterFetch:s=>s,bordered:!1,striped:!0,isTreeTable:!1,canResize:!0,ellipsis:!0,useSearchForm:!0,showIndexColumn:!1,formConfig:{showActionButtonGroup:!1,labelWidth:0,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{span:6,style:{}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}],actionColOptions:{span:10}},actionColumn:{width:200,title:e("mom.operating"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:U,handleDeleteOrBatchDelete:j,selectionOptions:J,selectedRowIds:G}=pe(F,g,_);te(()=>{_(J)});const Y=s=>y(this,null,function*(){const o=yield N({id:s.id});v.SetFromData("lookto",o.record),h.push({path:`mom/check/${s.id}`})}),z=s=>y(this,null,function*(){const o=yield N({id:s.id});v.SetFromData("changeto",o.record),h.push({path:`mom/dataChange/${s.id}`})}),K=s=>{F({removeRequertList:[{id:s.id,show:!0,subproject:s.subproject}]}),G.value=[],g()},Z=()=>y(this,null,function*(){const s=V(),o=[];s.forEach(l=>{l.remarks1&&l.remarks1=="done"&&o.push(l.id)}),o.length>0?(yield ge({ids:o}))&&(R.success(e("msg.successfullyAdded")),Q(),g()):R.error(e("msg.failToAddLargeFile"))});return ae(()=>y(this,null,function*(){})),(s,o)=>{const l=T("CustomButton"),r=T("a-button");return m(),w("div",null,[p(t(W),{contentFullHeight:!0},{default:i(()=>[S("div",ke,[p(t(me),{onRegister:t(P),style:{}},{"form-input":i(({model:a,field:C})=>[p(t(oe),{value:a[C],"onUpdate:value":k=>a[C]=k,"allow-clear":!0,onPressEnter:o[0]||(o[0]=()=>{t(g)()}),onChange:o[1]||(o[1]=({type:k})=>{k=="click"&&t(g)()}),placeholder:t(e)("mom.input")},{prefix:i(()=>[p(t(se))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":i(({model:a,field:C})=>[p(t(O),{value:a[C],"onUpdate:value":k=>a[C]=k,onChange:o[2]||(o[2]=k=>t(g)()),separator:"-"},{suffixIcon:i(()=>[p(t(re))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:i(()=>[t(A)(["mom:add"])?(m(),x(l,{key:0,btnStyle:{backgroundColor:"#2F54EB"},onClick:o[3]||(o[3]=()=>{t(h).push({path:"mom/increasedData"})})},{default:i(()=>[f(d(t(e)("mom.add")),1)]),_:1})):u("v-if",!0),p(le,{callback:()=>{t(g)()}},null,8,["callback"]),t(A)(["mom:addStore"])?(m(),x(l,{key:1,size:"middle",style:{background:"#fff",color:"#202020",border:"1px solid #666666",margin:"0px 10px 0px 0px",borderRadius:"4px"},disabled:t(U),onClick:o[4]||(o[4]=()=>{Z(),G.value=[]})},{default:i(()=>[f(d(t(e)("mom.addtomoa")),1)]),_:1},8,["disabled"])):u("v-if",!0),t(A)(["mom:del"])?(m(),x(l,{key:2,size:"middle",btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",color:"#000"},disabled:t(U),onClick:o[5]||(o[5]=()=>{t(j)(null,!0,["id","show","subproject"])})},{default:i(()=>[f(d(t(e)("mom.deletes")),1)]),_:1},8,["btnStyle","disabled"])):u("v-if",!0)]),toolbar:i(()=>[p(l,{btnStyle:{backgroundColor:"#2F54EB"},onClick:o[6]||(o[6]=()=>{t(h).push({path:"mom/dataStatistics"})})},{default:i(()=>[f(d(t(e)("mom.dataStatisticButton")),1)]),_:1})]),subproject:i(({record:a})=>[S("div",ye,d(a.subproject),1)]),proJectAchivesName:i(({record:a})=>[S("div",xe,d(a.proJectAchivesName),1)]),remarks1:i(({record:a})=>[S("div",{style:{display:"flex",justifyContent:"center"},onClick:()=>{a.remarks1=="upload_suspended"&&z(a)}},[a.remarks1=="uploading"?(m(),w("div",{key:0,style:E({margin:"6px 10px 0 0",width:"70px",height:"12px",background:"url(data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAMCAYAAADf7cuOAAAAAXNSR0IArs4c6QAAAPVJREFUSA1jZACC17tyTJg/XV7N+uWOLOOvt8wgMXqAf2yiDD8ETBg+KhYw/GUXp4eV+Ox4zsjIeICJialMVVX1CSMoUDierjrJ+PsTEz5dtJT7x8rP8NJo1WAIHJA33zEzM+szgVLKQAYKyCVMvz8y8N+fAGIOBiD079+/LiZQ9hkMruH4cGYwOAPshv///zsw0bNMwedzpl+v8UnTW05ywMoVevuUVPtGAwZHiI0GDK6A+c8m/BeHHF2FQW2aQQSeM/3mUXk8GBwEaugNFgBu6P3l0w39z8r3byAdBWrggVq/gwS8A7V+GUGOGe0SgKMEpUsAAAiVU8NCHt26AAAAAElFTkSuQmCC)100% no-repeat",backgroundSize:"100% 100%"})},null,4)):u("v-if",!0),a.remarks1=="done"?(m(),w("div",{key:1,style:E({margin:"6px 10px 0 0",width:"70px",height:"12px",background:"url(data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAMCAYAAADf7cuOAAAAAXNSR0IArs4c6QAAAK9JREFUSA1jZACClstHTG79+rj6yZ9vsh/+/WYGiY00IMDE+leGheuxGht/aI2uzRlGUKDs/Pbs5Nd/f5hGWmBg8y83E8s/dy4pcyZQShkNFEQQgcICFCZMoOyDEB5lgUIAFCZMI7VMwZcEQGEyWq7gCKHRgBkNGBwhgEOYCVR/45AbscKgMGECNWpGbAjg8DgoTJhALT1QowaHmhEnDAoLUJgwgnw+2iVgYEDvEgAAis9KZYa51gwAAAAASUVORK5CYII=)100% no-repeat",backgroundSize:"100% 100%"})},null,4)):u("v-if",!0),a.remarks1=="upload_suspended"?(m(),w("div",{key:2,style:E({margin:"6px 10px 0 0",width:"70px",height:"12px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAAAYCAYAAAAoNxVrAAAAAXNSR0IArs4c6QAAAXdJREFUaEPtmzFKxFAYhGcsjEX2CMkBIngIC8F72IgW4kHUQrHxHoKFhxA2B8geIQGzFv7yIoZlRcy+1+Wf7QJvHsw3A9nk/SG2fuuyPDTgDMAJzEoD8u01up4vAQIdyAbAC4GnrGmWm275c2FVtb9u2xsA5wbszReJnE0lQOATwGO2WFyzrj+CbijMUJauezaz46mbaZ0fAiRfszw/DaUZCtMXxb0BF34QyOmuBAg8HKxWlxz+s5i96Ta0K0Jf68PtieQR+7K8NbMrX/blNoYAybtQmKWZVTEbSOOLAMmafVG0enT2FXys2/DIzfeisNgNpPNHQIXxl3mSYxUmCZ8/sQrjL/MkxypMEj5/YhXGX+ZJjlWYJHz+xCqMv8yTHOvFXRI+X+LhxZ2OBnyFnuL2+2hAh48pDF1ph8NHjTe4yjza7DjeEHbQAFU0RzfCcYAqONaIppvco4z+GtEcS6Mh8CigcxX9OQS+aVifmcw1/mm+/vvM5AsQnJI77JsgrQAAAABJRU5ErkJggg==",backgroundSize:"100% 100%"})},null,4)):u("v-if",!0),a.remarks1?u("v-if",!0):(m(),w("div",{key:3,style:E({margin:"6px 10px 0 0",width:"70px",height:"12px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAMCAYAAADf7cuOAAAAAXNSR0IArs4c6QAAAKlJREFUSA3t17ENhDAMBdDzzwZ0SNemZoWbiiFuEdZgBeq0SOmyQZLzl2iQfCzguItNkxeCPvLSSim9W2vf3vtHlzN7DiuLyA5gjTGeQpRa66EQk0MMa8slhLCAb8pAuflMNMF1fW4T7wuaQBG8flOezn8mzChDYMAYKGwNmAeY/GfmuZ3BUONZwNr7FfSw6rBYDzjtFaZfMP4y6anSphCerxV/CTZa0OQHG68u/G377/MAAAAASUVORK5CYII=)100% no-repeat",backgroundSize:"100% 100%"})},null,4)),S("div",be,d(a.remarks1=="done"?t(e)("mom.remarksDone"):a.remarks1=="uploading"?t(e)("mom.remarksUploading"):a.remarks1=="upload_suspended"?t(e)("mom.remarksUploadSuspended"):t(e)("mom.remarksNotUploaded")),1)],8,ve)]),action:i(({record:a})=>[t(A)(["mom:view"])?(m(),x(r,{key:0,type:"link",onClick:()=>{Y(a)}},{default:i(()=>[f(d(t(e)("mom.lookto")),1)]),_:2},1032,["onClick"])):u("v-if",!0),t(A)(["mom:edit"])?(m(),x(r,{key:1,type:"link",disabled:!a.show,onClick:()=>{z(a)}},{default:i(()=>[f(d(t(e)("mom.changeto")),1)]),_:2},1032,["disabled","onClick"])):u("v-if",!0),t(A)(["mom:del"])?(m(),x(r,{key:2,type:"link",disabled:!a.show,onClick:()=>{t(he)({onOk:()=>{K(a)}})}},{default:i(()=>[f(d(t(e)("mom.delete")),1)]),_:2},1032,["disabled","onClick"])):u("v-if",!0)]),_:1},8,["onRegister"])]),p(t(ue),{onRegister:t(b)},null,8,["onRegister"])]),_:1})])}}});var pt=H(Ce,[["__scopeId","data-v-6fdb7a64"]]);export{pt as default};
