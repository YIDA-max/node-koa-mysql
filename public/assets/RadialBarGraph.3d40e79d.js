var L=(b,d,s)=>new Promise((c,y)=>{var m=a=>{try{w(s.next(a))}catch(f){y(f)}},P=a=>{try{w(s.throw(a))}catch(f){y(f)}},w=a=>a.done?c(a.value):Promise.resolve(a.value).then(m,P);w((s=s.apply(b,d)).next())});import{u as j,bm as _,b as R,r as x,ay as O,q as H,x as E,o as M,c as S,i as v,A as g,j as p,X as V,e as A,D as I,t as C,y as q,z as D,ao as G,ap as W,cl as X,ab as $,cv as J}from"./index.10ef4608.js";import{u as K,B as Q}from"./useForm.98d7b8ca.js";/* empty css               */import{u as Y}from"./casual.c3003c80.js";import Z from"./V3ColorPicker.3aeb3ea0.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./ColorPicker.3725ed80.js";import"./ColorPanel.209bf7d4.js";import"./draggable.354c5b1e.js";import"./ColorPreview.6aea0981.js";import"./ColorHue.94d928ef.js";import"./ColorAlpha.071f638e.js";import"./ColorValue.246a701d.js";import"./ColorList.125944a3.js";const{t:u}=j(),ee=()=>{const b=[{field:"title",component:"Input",label:u("AllMessage.visual.two.PreferencesList.title"),colProps:{span:7,offset:0}},{field:"height",component:"Input",label:u("AllMessage.visual.two.PreferencesList.height"),rules:[{validator:(d,s)=>L(void 0,null,function*(){return isNaN(s)&&s?Promise.reject(u("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}]},{field:"width",component:"Input",label:u("AllMessage.visual.two.PreferencesList.width"),rules:[{validator:(d,s)=>L(void 0,null,function*(){return isNaN(s)&&s?Promise.reject(u("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}]},{field:"name_col",component:"Select",slot:"name_col",label:u("AllMessage.visual.two.PreferencesList.name_col"),rules:[{required:!0,message:u("AllMessage.visual.two.PreferencesList.selectValue")}],colProps:{span:7,offset:0}},{field:"group_col",component:"Select",slot:"group_col",label:u("AllMessage.visual.two.PreferencesList.group_col")},{field:"value_col",component:"Select",slot:"value_col",label:u("AllMessage.visual.two.PreferencesList.value_colTwo"),rules:[{required:!0,message:u("AllMessage.visual.two.PreferencesList.selectValue")}]},{field:"y_min",component:"InputNumber",label:u("AllMessage.visual.two.PreferencesList.y_min"),componentProps:()=>({style:{width:"100%"}}),colProps:{span:7,offset:0}},{field:"y_max",component:"InputNumber",label:u("AllMessage.visual.two.PreferencesList.y_max"),componentProps:()=>({style:{width:"100%"}})},{field:"color",component:"Select",label:_("div",{style:"position: relative;top: 15px;"},[_("div",{},u("AllMessage.visual.two.PreferencesList.colorOne"))]),slot:"color",colProps:{span:0,offset:0}}];return b.forEach(d=>{d.component=="Select"&&(d.componentProps||(d.componentProps={}),d.componentProps.size="large")}),b},oe={style:{minHeight:"400px"}},te={style:{position:"relative",top:"0px",margin:"0px 0px 0px 0px"}},le={style:{width:"900px",maxHeight:"130px",height:"130px",overflow:"auto",border:"1px solid #d3d5db"}},se={style:{}},ae={style:{position:"relative",display:"inline-block",top:"8px"}},ze=R({__name:"RadialBarGraph",props:{toNextFn:Function},setup(b,{expose:d}){const{t:s}=j(),c=Y(),y=x([]),m=x([]),P=x(1),w=x(""),a=x([]),f=x([]);O(()=>a.value,()=>{let l="";a.value.map(n=>{l=l+`%23${n.color.slice(1)},`}),l=l.substr(0,l.length-1),w.value=l},{deep:!0});const k=(l,n)=>{if(l){console.log(l,n),a.value=[],f.value=[];const i=[...c.useVisualConstructionTwohander],t=[...c.useVisualConstructionTwobody],e={};i.forEach(o=>{e[o.title]=[],t.forEach(h=>{o.slots?e[o.title].push(h[o.dataIndex]):(o.dataIndex,e[o.title].push(Number(h[o.dataIndex])))})}),[...new Set(e[n])].forEach(o=>{a.value.push({color:U()}),f.value.push({title:o})}),N({field:"color",component:"Select",label:_("div",{style:"position: relative;top: 15px;"},[_("div",{},s("AllMessage.visual.two.PreferencesList.colorOne"))]),slot:"color",colProps:{span:24,offset:0}})}else a.value=[],f.value=[],N({field:"color",component:"Select",label:_("div",{style:"position: relative;top: 15px;"},[_("div",{},s("AllMessage.visual.two.PreferencesList.colorOne"))]),slot:"color",colProps:{span:0,offset:0}})},U=()=>{for(var l="#",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i=0;i<6;i++){var t=parseInt(Math.random()*16);l+=n[t]}return l},[z,{validate:T,resetFields:B,updateSchema:N}]=K({labelWidth:110,schemas:ee(),baseColProps:{span:7,offset:1},actionColOptions:{span:18,offset:4},showActionButtonGroup:!1}),F=()=>L(this,null,function*(){return w.value?{validate:yield T(),colorArr:w.value}:{validate:yield T()}});return O(()=>c.useVisualConstructionTwohander,()=>{B(),y.value=[],a.value=[],f.value=[];const l=[...c.useVisualConstructionTwohander],n=[...c.useVisualConstructionTwobody],i={};l.forEach(t=>{i[t.title]=[],n.forEach(e=>{t.slots?i[t.title].push(e[t.dataIndex]):(t.dataIndex,i[t.title].push(Number(e[t.dataIndex])))})}),m.value=c.useVisualConstructionTwohander,m.value.forEach(t=>{t.label=t.title,t.value=t.title})}),H(()=>{const l=setInterval(()=>{if(c.useVisualConstructionTwohander){m.value=c.useVisualConstructionTwohander,m.value.forEach(e=>{e.label=e.title,e.value=e.title}),y.value=[],a.value=[],f.value=[];const n=[...c.useVisualConstructionTwohander],i=[...c.useVisualConstructionTwobody],t={};n.forEach(e=>{t[e.title]=[],i.forEach(r=>{e.slots?t[e.title].push(r[e.dataIndex]):(e.dataIndex,t[e.title].push(Number(r[e.dataIndex])))})}),clearInterval(l)}},1e3)}),d({returnedValue:F}),(l,n)=>{const i=E("a-radio"),t=E("a-radio-group");return M(),S("div",oe,[v(p(Q),{onRegister:p(z)},{group_col:g(({model:e,field:r})=>[v(p(V),{size:"large",options:m.value,value:e[r],"onUpdate:value":o=>e[r]=o,allowClear:"",showSearch:"","filter-option":(o,h)=>h.label.toLowerCase().indexOf(o.toLowerCase())>=0,onChange:o=>{k(o,e[r])}},null,8,["options","value","onUpdate:value","filter-option","onChange"])]),name_col:g(({model:e,field:r})=>[v(p(V),{size:"large",options:m.value,value:e[r],"onUpdate:value":o=>e[r]=o,allowClear:"",showSearch:"","filter-option":(o,h)=>h.label.toLowerCase().indexOf(o.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),value_col:g(({model:e,field:r})=>[v(p(V),{size:"large",options:m.value,value:e[r],"onUpdate:value":o=>e[r]=o,allowClear:"",showSearch:"","filter-option":(o,h)=>h.label.toLowerCase().indexOf(o.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),color:g(()=>[A("div",te,[v(t,{value:P.value,"onUpdate:value":n[0]||(n[0]=e=>P.value=e)},{default:g(()=>[v(i,{style:{display:"block",height:"30px",lineHeight:"30px"},value:1},{default:g(()=>[I(C(p(s)("AllMessage.visual.two.PreferencesList.default"))+":",1)]),_:1}),v(i,{style:{display:"block",height:"30px",lineHeight:"30px"},value:2},{default:g(()=>[I(C(p(s)("AllMessage.visual.two.PreferencesList.custom"))+": ",1)]),_:1}),q(A("div",le,[(M(!0),S(G,null,W(f.value,(e,r)=>(M(),S("div",{key:e,style:{margin:"0px 0px 0px 15px",width:"30%",height:"40px",display:"inline-block"}},[A("div",se,[I(C(e.title)+C(p(s)("AllMessage.visual.two.PreferencesList.colorItem"))+" ",1),A("div",ae,[v(Z,{value:a.value[r].color,"onUpdate:value":o=>a.value[r].color=o,size:"mini",theme:"light",width:400},null,8,["value","onUpdate:value"])])])]))),128))],512),[[D,P.value==2]])]),_:1},8,["value"])])]),_:1},8,["onRegister"]),v(p(J),null,{default:g(()=>[v(p(X),{span:4,offset:11},{default:g(()=>[v(p($),{size:"middle",style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"},onClick:n[1]||(n[1]=()=>{b.toNextFn()})},{default:g(()=>[I(C(p(s)("AllMessage.visual.two.PreferencesList.confirm")),1)]),_:1})]),_:1})]),_:1})])}}});export{ze as default};
