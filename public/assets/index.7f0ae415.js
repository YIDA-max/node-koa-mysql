var E=(h,m,t)=>new Promise((e,p)=>{var u=r=>{try{a(t.next(r))}catch(s){p(s)}},f=r=>{try{a(t.throw(r))}catch(s){p(s)}},a=r=>r.done?e(r.value):Promise.resolve(r.value).then(u,f);a((t=t.apply(h,m)).next())});import{cy as C,b as T,r as L,u as k,dr as D,ay as A,aG as R,cn as B,x as I,o as g,c as _,ao as S,ap as V,y as j,z as M,i,j as o,A as n,D as y,t as b}from"./index.10ef4608.js";import N from"./DetailModal.d34a18f0.js";import{u as $,B as z}from"./useTable.a143d40c.js";import{T as F}from"./TableAction.edf9a202.js";import{u as G}from"./index.c8f8ec06.js";import{getColumns as H}from"./data.f57538f8.js";import"./index.5556d4ce.js";import"./useAttrs.1d381a3e.js";import"./useDescription.0590bc31.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";/* empty css               */import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               */import"./index.b6ac86eb.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */const q=()=>C.get({url:"/error"}),J={class:"p-4"},K=["src"],kr=T({__name:"index",setup(h){const m=L(),t=L([]),{t:e}=k(),p=D(),[u,{setTableData:f}]=$({title:e("sys.errorLog.tableTitle"),columns:H(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[a,{openModal:r}]=G();A(()=>p.getErrorLogInfoList,c=>{R(()=>{f(B(c))})},{immediate:!0});function s(c){m.value=c,r(!0)}function w(){throw new Error("fire vue error!")}function x(){t.value.push(`${new Date().getTime()}.png`)}function v(){return E(this,null,function*(){yield q()})}return(c,O)=>{const d=I("a-button");return g(),_("div",J,[(g(!0),_(S,null,V(t.value,l=>j((g(),_("img",{key:l,src:l},null,8,K)),[[M,!1]])),128)),i(N,{info:m.value,onRegister:o(a)},null,8,["info","onRegister"]),i(o(z),{onRegister:o(u),class:"error-handle-table"},{toolbar:n(()=>[i(d,{onClick:w,type:"primary"},{default:n(()=>[y(b(o(e)("sys.errorLog.fireVueError")),1)]),_:1}),i(d,{onClick:x,type:"primary"},{default:n(()=>[y(b(o(e)("sys.errorLog.fireResourceError")),1)]),_:1}),i(d,{onClick:v,type:"primary"},{default:n(()=>[y(b(o(e)("sys.errorLog.fireAjaxError")),1)]),_:1})]),action:n(({record:l})=>[i(o(F),{actions:[{label:o(e)("sys.errorLog.tableActionDesc"),onClick:s.bind(null,l)}]},null,8,["actions"])]),_:1},8,["onRegister"])])}}});export{kr as default};
