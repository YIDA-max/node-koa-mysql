var p=(u,t,A)=>new Promise((x,I)=>{var g=d=>{try{h(A.next(d))}catch(f){I(f)}},k=d=>{try{h(A.throw(d))}catch(f){I(f)}},h=d=>d.done?x(d.value):Promise.resolve(d.value).then(g,k);h((A=A.apply(u,t)).next())});import{_ as H}from"./modal-close.6e586af3.js";import{a as W,b as X,u as L,a5 as V,a6 as q,r as y,db as O,bm as E,c0 as _,i as r,q as $,x as N,o as b,c as w,A as c,j as m,cM as D,e as S,D as T,t as C,aL as v,p as ee,k as ae,G as te}from"./index.10ef4608.js";/* empty css                *//* empty css               *//* empty css               */import"./useForm.98d7b8ca.js";import{P as oe}from"./index.8d0858e7.js";import{a as le,h as F,b as ne}from"./homePage.0537fe58.js";import{u as se,B as re}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{d as ie}from"./download.66a6d137.js";import{b as z}from"./homePage.249d27b4.js";import{D as me}from"./index.5556d4ce.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";/* empty css                */import"./index.504b494d.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */const ce=u=>(ee("data-v-f4f2d192"),u=u(),ae(),u),de=["src"],pe=ce(()=>S("span",null,"\u6279\u91CF\u4E0B\u8F7D\u8868\u683C\u5185\u6587\u4EF6",-1)),ue={style:{display:"flex",justifyContent:"center"}},Ae={class:"block w-18 text-left"},he=X({__name:"index",setup(u){const{t}=L(),A=V(),{createMessage:x}=te(),I=q(),g=y(!0),k=y(),h=y(),d=y(),f=new Date,M=new Date;f.setMonth(f.getMonth()-1),M.setMonth(M.getMonth()+1);const i=y({proJectAchivesName:"",masterProject:"",subproject:"",looktype:"",mappingId:"",species:"",createTime:"",samplingPlace:"",sampleType:"",lookplatform:"",otherPlatforms:"",instrument:"",otherInstrument:"",experimentalDesign:"",dataType:"",dataOwnerQuery:[],otherInformationName:"[]",otherInformationPone:"[]",otherInformationEmail:"[]",sharerQuery:[],shareInformationName:"[]",shareInformationPone:"[]",shareInformationEmail:"[]",articleContent:""}),G=[{field:"proJectAchivesName",label:t("mom.check.fieldMainProject"),span:10},{field:"subproject",label:t("mom.check.mainProject"),span:15},{field:"looktype",label:t("mom.check.fieldTpye")},{field:"mappingId",label:t("mom.check.mappingID")},{field:"species",label:t("mom.check.species")},{field:"createTime",label:t("mom.check.collectdDate")},{field:"samplingPlace",label:t("mom.check.SamplingLocation")},{field:"sampleType",label:t("mom.check.SampleType")},{field:"lookplatform",label:t("mom.check.platformSelectValue")},{field:"otherPlatforms",label:t("mom.check.platformInputValue")},{field:"instrument",label:t("mom.check.instrumentSelectValue")},{field:"otherInstrument",label:t("mom.check.instrumentInputValue")},{field:"experimentalDesign",label:t("mom.check.textDesignInfo"),span:15},{field:"dataType",label:t("mom.check.dataType"),span:15,render:a=>(console.log(" 1",O),E(O,{value:a},[E(_,{value:!0,style:{fontSize:"14px"}},t("mom.check.dataTypePublic")),E(_,{value:!1,style:{fontSize:"14px"}},t("mom.check.dataTypePrivate"))]))},{field:"dataOwnerQuery",label:t("mom.check.DataOwner"),render:a=>{let e="";return a==null||a.forEach((o,n)=>{n==a.length-1?e=e+o:e=e+o+","}),r("div",null,e)}},{field:"otherInformationName",label:t("mom.check.AddDataOwner"),render:a=>{var o;let e="";return(o=JSON.parse(a||"[]"))==null||o.forEach((n,l)=>{l==JSON.parse(a).length-1?e=e+n.name:e=e+n.name+","}),r("div",null,e)}},{field:"otherInformationPone",label:t("AllMessage.otherInformationPhone"),render:a=>{var o;let e="";return(o=JSON.parse(a||"[]"))==null||o.forEach((n,l)=>{l==JSON.parse(a).length-1?e=e+n.phone:e=e+n.phone+","}),r("div",null,e)}},{field:"otherInformationEmail",label:t("AllMessage.otherInformationEmail"),render:a=>{var o;let e="";return(o=JSON.parse(a||"[]"))==null||o.forEach((n,l)=>{l==JSON.parse(a).length-1?(console.log(" ",n),e=e+n.mail):e=e+n.mail+","}),r("div",null,e)}},{field:"sharerQuery",label:t("mom.check.ShareOne"),render:a=>{let e="";return a.forEach((o,n)=>{n==a.length-1?e=e+o:e=e+o+","}),r("div",null,e)}},{field:"shareInformationName",label:t("mom.check.AddShare"),render:a=>{var o;let e="";return(o=JSON.parse(a||"[]"))==null||o.forEach((n,l)=>{l==JSON.parse(a).length-1?e=e+n.name:e=e+n.name+","}),r("div",null,e)}},{field:"shareInformationPone",label:t("AllMessage.AddSharePhone"),render:a=>{var o;let e="";return(o=JSON.parse(a||"[]"))==null||o.forEach((n,l)=>{console.log(" ",a),l==JSON.parse(a).length-1?e=e+n.phone:e=e+n.phone+","}),r("div",null,e)}},{field:"shareInformationEmail",label:t("AllMessage.AddShareEmail"),render:a=>{var o;let e="";return(o=JSON.parse(a||"[]"))==null||o.forEach((n,l)=>{l==JSON.parse(a).length-1?e=e+n.mail:e=e+n.mail+","}),r("div",null,e)}},{field:"articleContent",label:t("mom.check.contentsArticle")}],[U,{getSelectRows:P,clearSelectedRowKeys:Q,setTableData:R}]=se({columns:[{title:t("mom.check.fileRealName"),dataIndex:"fileRealName",width:150},{title:t("mom.check.fileSize"),dataIndex:"fileSize",width:100,format:(a,e,o)=>`${(a/1024/1024).toFixed(4)=="0.0000"?1e-4:(a/1024/1024).toFixed(4)} MB`},{title:t("mom.check.status"),dataIndex:"status",width:80,slots:{customRender:"status"}}],afterFetch:a=>a,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:80,title:t("mom.check.action"),slots:{customRender:"action"},fixed:"right"},rowSelection:{type:"checkbox"}}),B=a=>p(this,null,function*(){const e=yield z({id:a.id});ie({url:e.downloadUrl,target:"_self",fileName:e.fileRealName})}),J=a=>p(this,null,function*(){const e=yield z({id:a.id}),o=document.createElement("iframe");return o.style.display="none",o.style.height="0",o.src=e.downloadUrl,console.log("info",e.downloadUrl),document.body.appendChild(o),o}),Y=(a,e)=>new Promise(o=>{j(()=>p(this,null,function*(){const l=yield J(a);o(l),setTimeout(()=>{l.remove()},6e5)}),e)}),j=(a,e)=>p(this,null,function*(){"requestIdleCallback"in window?requestIdleCallback(()=>{a()},{timeout:e||1e3}):setTimeout(()=>{a()},e||1e3)}),K=()=>p(this,null,function*(){const a=yield P();a.length==0&&x.error(t("AllMessage.PleaseCheckTheFollowingDocumentsInTheForm")),a.forEach((e,o)=>p(this,null,function*(){Y(e,o+1>10?1e3:(o+1)*100)})),Q()});$(()=>p(this,null,function*(){const a=yield le({meaning:"multiomics_Management_type"});k.value=a,k.value.forEach((l,s)=>{l.label=l.projectName,l.value=l.id,l.key=s});const e=yield F({meaning:"multiomics_Management_type"});h.value=e,h.value.forEach((l,s)=>{l.label=l.name,l.value=l.code,l.key=s});const o=yield F({meaning:"multiomics_Management_platform"});d.value=o,d.value.forEach((l,s)=>{l.label=l.name,l.value=l.code,l.key=s});const n=yield ne({id:A.params.id});i.value=n.record[0],i.value.otherInformationName=i.value.otherInformation,i.value.otherInformationPone=i.value.otherInformation,i.value.otherInformationEmail=i.value.otherInformation,i.value.shareInformationName=i.value.shareInformation,i.value.shareInformationPone=i.value.shareInformation,i.value.shareInformationEmail=i.value.shareInformation,R(n.record[0].temporaryWarehouseOssList)}));const Z=a=>new URL({"../../../assets/detail/modal-close.svg":H}[`../../../assets/detail/${a}`],self.location).href;return(a,e)=>{const o=N("CustomButton"),n=N("a-tooltip"),l=N("a-button");return b(),w("div",null,[r(m(oe),{contentFullHeight:!0},{default:c(()=>[r(m(D),{title:m(t)("mom.check.title")},{extra:c(()=>[S("img",{style:{cursor:"pointer",height:"10px",width:"10px"},src:Z("modal-close.svg"),alt:"close",onClick:e[0]||(e[0]=()=>{m(I)("/mom")})},null,8,de)]),default:c(()=>[r(m(me),{column:2,data:i.value,"onUpdate:data":e[1]||(e[1]=s=>i.value=s),schema:G},null,8,["data"])]),_:1},8,["title"]),r(m(D),null,{default:c(()=>[r(m(re),{onRegister:m(U),onSelectionChange:e[3]||(e[3]=({rows:s})=>{s.length>0?g.value=!1:g.value=!0})},{toolbar:c(()=>[r(n,{placement:"top"},{title:c(()=>[pe]),default:c(()=>[r(o,{btnStyle:{backgroundColor:"#2F54EB"},disabled:g.value,onClick:e[2]||(e[2]=()=>{K()})},{default:c(()=>[T(C(m(t)("mom.check.downs")),1)]),_:1},8,["disabled"])]),_:1})]),status:c(({record:s})=>[S("div",ue,[s.status=="uploading"?(b(),w("div",{key:0,style:v({margin:"6px 6px 0px 10px",width:"70px",height:"12px",background:"url(data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAMCAYAAADf7cuOAAAAAXNSR0IArs4c6QAAAPVJREFUSA1jZACC17tyTJg/XV7N+uWOLOOvt8wgMXqAf2yiDD8ETBg+KhYw/GUXp4eV+Ox4zsjIeICJialMVVX1CSMoUDierjrJ+PsTEz5dtJT7x8rP8NJo1WAIHJA33zEzM+szgVLKQAYKyCVMvz8y8N+fAGIOBiD079+/LiZQ9hkMruH4cGYwOAPshv///zsw0bNMwedzpl+v8UnTW05ywMoVevuUVPtGAwZHiI0GDK6A+c8m/BeHHF2FQW2aQQSeM/3mUXk8GBwEaugNFgBu6P3l0w39z8r3byAdBWrggVq/gwS8A7V+GUGOGe0SgKMEpUsAAAiVU8NCHt26AAAAAElFTkSuQmCC)100% no-repeat",backgroundSize:"100% 100%"})},null,4)):s.status=="done"?(b(),w("div",{key:1,style:v({margin:"6px 6px 0px 10px",width:"70px",height:"12px",background:"url(data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAMCAYAAADf7cuOAAAAAXNSR0IArs4c6QAAAK9JREFUSA1jZACClstHTG79+rj6yZ9vsh/+/WYGiY00IMDE+leGheuxGht/aI2uzRlGUKDs/Pbs5Nd/f5hGWmBg8y83E8s/dy4pcyZQShkNFEQQgcICFCZMoOyDEB5lgUIAFCZMI7VMwZcEQGEyWq7gCKHRgBkNGBwhgEOYCVR/45AbscKgMGECNWpGbAjg8DgoTJhALT1QowaHmhEnDAoLUJgwgnw+2iVgYEDvEgAAis9KZYa51gwAAAAASUVORK5CYII=)100% no-repeat",backgroundSize:"100% 100%"})},null,4)):s.status=="suspend"?(b(),w("div",{key:2,style:v({margin:"6px 6px 0px 10px",width:"70px",height:"12px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAAAYCAYAAAAoNxVrAAAAAXNSR0IArs4c6QAAAXdJREFUaEPtmzFKxFAYhGcsjEX2CMkBIngIC8F72IgW4kHUQrHxHoKFhxA2B8geIQGzFv7yIoZlRcy+1+Wf7QJvHsw3A9nk/SG2fuuyPDTgDMAJzEoD8u01up4vAQIdyAbAC4GnrGmWm275c2FVtb9u2xsA5wbszReJnE0lQOATwGO2WFyzrj+CbijMUJauezaz46mbaZ0fAiRfszw/DaUZCtMXxb0BF34QyOmuBAg8HKxWlxz+s5i96Ta0K0Jf68PtieQR+7K8NbMrX/blNoYAybtQmKWZVTEbSOOLAMmafVG0enT2FXys2/DIzfeisNgNpPNHQIXxl3mSYxUmCZ8/sQrjL/MkxypMEj5/YhXGX+ZJjlWYJHz+xCqMv8yTHOvFXRI+X+LhxZ2OBnyFnuL2+2hAh48pDF1ph8NHjTe4yjza7DjeEHbQAFU0RzfCcYAqONaIppvco4z+GtEcS6Mh8CigcxX9OQS+aVifmcw1/mm+/vvM5AsQnJI77JsgrQAAAABJRU5ErkJggg==",backgroundSize:"100% 100%"})},null,4)):(b(),w("div",{key:3,style:v({margin:"6px 6px 0px 10px",width:"70px",height:"12px",position:"relative",top:"-5px",background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAMCAYAAADf7cuOAAAAAXNSR0IArs4c6QAAAKlJREFUSA3t17ENhDAMBdDzzwZ0SNemZoWbiiFuEdZgBeq0SOmyQZLzl2iQfCzguItNkxeCPvLSSim9W2vf3vtHlzN7DiuLyA5gjTGeQpRa66EQk0MMa8slhLCAb8pAuflMNMF1fW4T7wuaQBG8flOezn8mzChDYMAYKGwNmAeY/GfmuZ3BUONZwNr7FfSw6rBYDzjtFaZfMP4y6anSphCerxV/CTZa0OQHG68u/G377/MAAAAASUVORK5CYII=)100% no-repeat"})},null,4)),S("span",Ae,C(s.status=="done"?m(t)("rdm.check.uploadStatusDone"):s.status=="uploading"?m(t)("rdm.check.uploadStatusUploading"):s.status=="suspend"?m(t)("rdm.check.uploadStatusUploadSuspended"):m(t)("rdm.check.uploadStatusUploadNo")),1)])]),action:c(({record:s})=>[r(l,{type:"link",disabled:s.status!=="done",onClick:()=>{B(s)}},{default:c(()=>[T(C(m(t)("mom.check.down")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["onRegister"])]),_:1})]),_:1})])}}});var qe=W(he,[["__scopeId","data-v-f4f2d192"]]);export{qe as default};
