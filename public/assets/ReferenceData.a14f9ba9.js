var u=(x,a,c)=>new Promise((h,g)=>{var m=n=>{try{p(c.next(n))}catch(C){g(C)}},y=n=>{try{p(c.throw(n))}catch(C){g(C)}},p=n=>n.done?h(n.value):Promise.resolve(n.value).then(m,y);p((c=c.apply(x,a)).next())});import{u as S,B as T}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{a as R,b as I,d as A,e as P}from"./homePage.249d27b4.js";import{a as U,b as N,u as V,ch as z,r as O,x as k,o as M,c as $,i as r,A as l,j as i,I as q,d5 as G,d6 as W,f as j,e as K,D as b,t as v,G as L}from"./index.10ef4608.js";/* empty css              *//* empty css               */import{d as H}from"./download.66a6d137.js";import{C as D}from"./index.866ec2c8.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";/* empty css                */import"./index.504b494d.js";import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./modal-error.7cada6d5.js";const J={class:"p-5"},Q={class:"flex absolute top-0 right-0 h-10 items-center"},X=b(" \u6279\u91CF\u4E0B\u8F7D"),Y=b("\u5220\u9664"),Z=N({__name:"ReferenceData",setup(x){const{t:a}=V(),c=z.RangePicker,h=O(!0),[g,{reload:m,getSelectRows:y,clearSelectedRowKeys:p}]=S({columns:[{title:a("ftm.serial"),dataIndex:"id",width:150},{title:a("ftm.fileName"),dataIndex:"fileRealName",width:150},{title:a("ftm.fileSize"),dataIndex:"fileSize",width:150,format:(t,e,s)=>t?`${(t/1024/1024).toFixed(4)=="0.0000"?1e-4:(t/1024/1024).toFixed(4)} MB`:"\u672A\u8BB0\u5F55\u5927\u5C0F"},{title:"\u7269\u79CD",dataIndex:"species",width:150,sorter:!0},{title:"\u7269\u79CDID",dataIndex:"speciesId",width:150,sorter:!0},{title:"\u57FA\u56E0\u7EC4\u7248\u672C",dataIndex:"genomeVersion",width:150,sorter:!0},{title:a("ftm.fileStatus"),dataIndex:"status",width:150,format:t=>t==="done"?"\u4E0A\u4F20\u5B8C\u6210":t==="uploading"?"\u4E0A\u4F20\u4E2D":t=="suspend"?"\u5931\u8D25":"\u672A\u77E5\u7ED3\u679C"},{title:a("ftm.createAuthor"),dataIndex:"nickname",width:150},{title:a("ftm.createTime"),dataIndex:"createTime",width:200,sorter:!0}],api:R,searchInfo:{ifBigFile:!0,dataType:1},sortFn:t=>{const{field:e,order:s}=t;return e&&s?{type:e==="species"?0:e==="speciesId"?1:e==="genomeVersion"?2:"",sort:s==="ascend"?"asc":"desc"}:{}},afterFetch:t=>{const e=[...t];return e.forEach(s=>{s.statuss=s.status}),e},useSearchForm:!0,formConfig:{showActionButtonGroup:!1,labelWidth:0,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"450px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"calc(100% - 450px)"}},slot:"createTime"}],actionColOptions:{span:10}},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:160,title:a("ftm.operation"),slots:{customRender:"action"},fixed:"right"},rowSelection:{type:"checkbox"}}),n=t=>u(this,null,function*(){const e=yield I({id:t});H({url:e.downloadUrl,target:"_self"})}),C=()=>u(this,null,function*(){const t=yield y();t.length==0&&_.error(a("AllMessage.PleaseCheckTheFollowingDocumentsInTheForm")),t.forEach((e,s)=>u(this,null,function*(){setTimeout(()=>u(this,null,function*(){const f=yield I({id:e.id}),o=document.createElement("iframe");o.style.display="none",o.style.height="0",o.src=f.downloadUrl,document.body.appendChild(o),setTimeout(()=>{o.remove()},1e3)}),(s+1)*300)})),p()}),B=()=>u(this,null,function*(){m()}),F=t=>{A({id:t}),m()},{createMessage:_}=L(),E=()=>u(this,null,function*(){const e=(yield y()).map(f=>f.id),{code:s}=yield P({ids:e});s===200?(p(),m(),_.success("\u5220\u9664\u6210\u529F")):_.success("\u5220\u9664\u5931\u8D25")});return(t,e)=>{const s=k("CustomButton"),f=k("a-button");return M(),$("div",J,[r(i(T),{onRegister:i(g),style:{padding:0},onSelectionChange:e[5]||(e[5]=({rows:o})=>h.value=!(o.length>0))},{"form-input":l(({model:o,field:w})=>[r(i(q),{value:o[w],"onUpdate:value":d=>o[w]=d,allowClear:"",onPressEnter:e[0]||(e[0]=d=>B()),placeholder:i(a)("ftm.referenceDataSearch"),onChange:e[1]||(e[1]=({type:d})=>{d=="click"&&B()})},{prefix:l(()=>[r(i(G))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":l(({model:o,field:w})=>[r(i(c),{value:o[w],"onUpdate:value":d=>o[w]=d,onChange:e[2]||(e[2]=d=>i(m)()),separator:"-"},{suffixIcon:l(()=>[r(i(W))]),_:2},1032,["value","onUpdate:value"]),j(" \u5E94\u8BBE\u8BA1\u8981\u6C42,\u6309\u94AE\u548C\u64CD\u4F5C\u8F93\u5165\u6846\u8981\u653E\u540C\u4E00\u884C "),K("div",Q,[r(s,{size:"middle",btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",color:"#000"},disabled:h.value,onClick:e[3]||(e[3]=()=>{i(D)({onOk:()=>{E()}})})},{default:l(()=>[b(v(i(a)("mom.deletes")),1)]),_:1},8,["btnStyle","disabled"]),r(s,{size:"middle",btnStyle:{backgroundColor:"#2F54EB",color:"#fff",marginLeft:"20px"},disabled:h.value,onClick:e[4]||(e[4]=()=>{C()})},{default:l(()=>[X]),_:1},8,["disabled"])])]),action:l(({record:o})=>[r(f,{type:"link",onClick:()=>{i(D)({onOk:()=>{F(o.id)}})}},{default:l(()=>[Y]),_:2},1032,["onClick"]),r(f,{type:"link",disabled:o.status!=="done",onClick:()=>{n(o.id)}},{default:l(()=>[b(v(i(a)("ftm.download")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["onRegister"])])}}});var Ae=U(Z,[["__scopeId","data-v-5dd57872"]]);export{Ae as default};
