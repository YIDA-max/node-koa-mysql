var b=(_,k,d)=>new Promise((F,D)=>{var B=i=>{try{p(d.next(i))}catch(c){D(c)}},a=i=>{try{p(d.throw(i))}catch(c){D(c)}},p=i=>i.done?F(i.value):Promise.resolve(i.value).then(B,a);p((d=d.apply(_,k)).next())});import{_ as Q,a as K}from"./unfold.85278fc3.js";import{bG as P,cy as N,a as X,b as Y,r as C,l as Z,aw as ee,u as oe,bc as ae,ay as T,e3 as te,q as le,x as se,o as M,c as U,i as $,A as x,e as h,j as v,t as E,X as ie,d5 as ne,D as re,f as ue,U as ce,bi as pe,d7 as O,e4 as fe,G as ge}from"./index.10ef4608.js";import me from"./CollapseContainer.b44bf61b.js";import ve from"./ScrollContainer.70302c93.js";import de from"./LazyContainer.80bcb0da.js";import he from"./heatMap.afd3f3a3.js";import _e from"./ScatterPlotOfCorrelation.5253590f.js";import we from"./CodeFigure.fd8f004f.js";import ye from"./TheVolcanoFigure.27685b12.js";import be from"./VennDiagram.a7e0d24a.js";import Ce from"./EnrichmentBubbleDiagram.53dcc7ae.js";import $e from"./TheViolinFigure.89e22d68.js";import xe from"./RegulatoryNetworkDiagram.4dae2321.js";import Fe from"./BoxFigure.e5292ce6.js";import De from"./TheRidgeMap.3d214ece.js";import Ee from"./HistogramDensityPlot.99b1319e.js";import ke from"./RadialBarGraph.3d40e79d.js";import Be from"./graph.e93e79a0.js";import Ve from"./AreaChart.dbadab99.js";import Ae from"./Logo.ff0b2728.js";import Te from"./ExmpaleModal.acf99505.js";import{u as Me}from"./index.c8f8ec06.js";import{u as Pe}from"./casual.c3003c80.js";import{p as Re}from"./homePage.249d27b4.js";import"./CollapseHeader.20329544.js";import"./index.5acffdfd.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./TableAction.edf9a202.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./V3ColorPicker.3aeb3ea0.js";import"./ColorPicker.3725ed80.js";import"./ColorPanel.209bf7d4.js";import"./draggable.354c5b1e.js";import"./ColorPreview.6aea0981.js";import"./ColorHue.94d928ef.js";import"./ColorAlpha.071f638e.js";import"./ColorValue.246a701d.js";import"./ColorList.125944a3.js";import"./QuestionCircleOutlined.d4b3f92b.js";/* empty css               */import"./TheViolinFigureLastStep.7d17c698.js";import"./index.968d275e.js";import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";const Ge=P(me);P(ve);P(de);const Se=_=>N.post({url:"/oss/uploadTest",data:_}),Ie=_=>N.get({url:`/gaProteinQuantitativeHome/getExample/${_}`});const Le=["src"],Ue={class:"ml-2"},Oe={key:0},Ne={style:{display:"flex"}},He={style:{margin:"5px 20px 0px 0px"}},je=Y({__name:"Preferences",setup(_,{expose:k}){const d=C(),F=Z(()=>{var e;return(e=d==null?void 0:d.value)==null?void 0:e.show}),D=e=>{e.handleExpand()},B=e=>new URL({"../../../../../assets/custom/fold.svg":Q,"../../../../../assets/custom/unfold.svg":K}[`../../../../../assets/custom/${e}`],self.location).href,a=Pe(),p=ee(),{t:i}=oe(),c=C(null),{createMessage:V}=ge(),r=C("heatMap"),{getLocale:H}=ae(),u="https://synbio-facilities-omics-shiny.e2yun.com:9095/app";console.log(" ",`${u}/network_simple/?`);const w=C([{label:i("AllMessage.visual.two.Preferences.heatMap"),value:"heatMap",key:"0"},{label:i("AllMessage.visual.two.Preferences.TheVolcanoFigure"),value:"TheVolcanoFigure",key:"7"},{label:i("AllMessage.visual.two.Preferences.EnrichmentBubbleDiagram"),value:"EnrichmentBubbleDiagram",key:"8"},{label:i("AllMessage.visual.two.Preferences.VennDiagram"),value:"VennDiagram",key:"10"},{label:i("AllMessage.visual.two.Preferences.TheViolinFigure"),value:"TheViolinFigure",key:"11"},{label:i("AllMessage.visual.two.Preferences.RegulatoryNetworkDiagram"),value:"RegulatoryNetworkDiagram",key:"12"},{label:i("AllMessage.visual.two.Preferences.RadialBarGraph"),value:"RadialBarGraph",key:"17"},{label:i("AllMessage.visual.two.Preferences.TheRidgeMap"),value:"TheRidgeMap",key:"18"},{label:i("AllMessage.visual.two.Preferences.HistogramDensityPlot"),value:"HistogramDensityPlot",key:"19"},{label:i("AllMessage.visual.two.Preferences.BoxFigure"),value:"BoxFigure",key:"20"},{label:i("AllMessage.visual.two.Preferences.graph"),value:"graph",key:"21"},{label:i("AllMessage.visual.two.Preferences.Logo"),value:"Logo",key:"22"},{label:i("AllMessage.visual.two.Preferences.AreaChart"),value:"AreaChart",key:"23"}]),R=C(null),[j,{openModal:J}]=Me(),z=()=>b(this,null,function*(){const[{label:e}]=w.value.filter(s=>s.value==r.value),l=yield Ie(e);J(!0,{value:l})});T(()=>r.value,e=>{G(e)});function G(e){const l={heatMap:he,ScatterPlotOfCorrelation:_e,CodeFigure:we,TheVolcanoFigure:ye,EnrichmentBubbleDiagram:Ce,VennDiagram:be,TheViolinFigure:$e,RegulatoryNetworkDiagram:xe,BoxFigure:Fe,TheRidgeMap:De,HistogramDensityPlot:Ee,RadialBarGraph:ke,graph:Be,AreaChart:Ve,Logo:Ae};R.value=te(l[e])}const W=(e,l)=>{if(a.isRemoveOrPitch)if(a.usesElectedCheckRecordRemoved.length==0){console.log("\u79FB\u9664\u6A21\u5F0F,\u6CA1\u6709\u79FB\u9664");const s={};return e.forEach(o=>{s[o.title]=[],l.forEach(t=>{o.type!=="number"?s[o.title].push(t[o.dataIndex]):(o.dataIndex,s[o.title].push(Number(t[o.dataIndex])))})}),s}else{console.log("\u79FB\u9664\u6A21\u5F0F,\u6709\u79FB\u9664");let s=[...a.useVisualConstructionTwobody],o=[];[...a.usesElectedCheckRecordRemoved].forEach(f=>{s.forEach((n,y)=>{let A=0;const I=Object.keys(f);I.forEach(L=>{f[L]==n[L]&&(A=A+1,A==I.length-1&&(o.push(y),console.log(" ",y)))})})}),o=[...new Set(o)],o.forEach(f=>{delete s[f]});const m={};return e.forEach(f=>{m[f.title]=[],s.forEach(n=>{f.type!=="number"?m[f.title].push(n[f.dataIndex]):(f.dataIndex,m[f.title].push(Number(n[f.dataIndex])))})}),console.log(" ",JSON.stringify(m)),m}else{const s={};console.log("\u9009\u4E2D\u6A21\u5F0F ");let o=JSON.parse(JSON.stringify(a.usesElectedCheckRecordRemoved));return e.forEach(t=>{s[t.title]=[],o.forEach(m=>{t.type!=="number"?s[t.title].push(m[t.dataIndex]):(t.dataIndex,s[t.title].push(Number(m[t.dataIndex])))})}),console.log(" ",JSON.stringify(s)),s}},q=e=>encodeURIComponent(e),S=()=>b(this,null,function*(){try{if(r.value=="heatMap"){let e=yield g(`${u}/heatmaply_simple/?`),l="",s=!1;c.value.controlGroup.forEach((o,t)=>{o.data.oneData&&(l=l+o.data.oneData+"%3D"),o.data.twoData&&(console.log(" ",t),l=l+o.data.twoData+(t==c.value.controlGroup.length-1?"":",")),o.data.oneData||(s=!0),o.data.twoData||(s=!0)}),s?(V.error("\u8BF7\u628A\u6240\u6709\u7684\u5217\u5206\u7EC4\u4FE1\u606F\u586B\u5199\u5B8C\u6210"),a.useTwoLoginFlag=!1):(l&&(e=e+`&annotation_col=${l}`),a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"}))}else if(r.value=="TheVolcanoFigure"){let e=yield g(`${u}/volcanoplot_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="EnrichmentBubbleDiagram"){let e=yield g(`${u}/bubble_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="VennDiagram"){let e=yield g(`${u}/venn_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="TheViolinFigure"){let e=yield g(`${u}/violin_simple/?`),l="",s=!1;c.value.controlGroup.forEach(t=>{t.data.oneData&&(l=l+t.data.oneData+","),t.data.twoData&&(l=l+t.data.twoData+";"),t.data.oneData||(s=!0),t.data.twoData||(s=!0)});let o="";if(c.value.groupingInformationOptions.forEach((t,m)=>{t.data.oneData&&(o=o+t.data.oneData+"%3D"),t.data.twoData&&(o=o+t.data.twoData+(m==c.value.groupingInformationOptions.length-1?"":",")),t.data.oneData||(s=!0),t.data.twoData||(s=!0)}),s)V.error("\u8BF7\u628A\u6240\u6709\u7684\u5BF9\u7167\u7EC4\u586B\u5199\u5B8C\u6210"),a.useTwoLoginFlag=!1;else{l&&(e=e+`&comparisons=${l}`),o&&(e=e+`&group_type=${o}`);const{validate:t}=yield c.value.returnedValue();console.log(" ",t.file_type,t.user_group,c.value.groupingInformationOptions.length),(t.file_type=="1"||t.file_type=="2")&&(t.user_group=="3"||t.group_column=="noValue")&&t.comparisons_type=="Two"&&c.value.controlGroup.length==0?(O.error("\u8BF7\u81F3\u5C11\u586B\u5199\u4E00\u4E2A\u5BF9\u7167\u7EC4"),a.useTwoLoginFlag=!1):t.file_type=="1"&&t.user_group=="2"&&c.value.groupingInformationOptions.length==0?(O.error("\u8BF7\u586B\u5199\u5217\u5206\u7EC4\u4FE1\u606F"),a.useTwoLoginFlag=!1):(a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"}))}}else if(r.value=="BoxFigure"){let e=yield g(`${u}/boxplot_simple/?`),l="",s=!1;c.value.controlGroup.forEach(o=>{o.data.oneData&&(l=l+o.data.oneData+","),o.data.twoData&&(l=l+o.data.twoData+";"),o.data.oneData||(s=!0),o.data.twoData||(s=!0)}),s?(V.error("\u8BF7\u628A\u6240\u6709\u7684\u5BF9\u7167\u7EC4\u586B\u5199\u5B8C\u6210"),a.useTwoLoginFlag=!1):(l&&(e=e+`&comparisons=${l}`),a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"}))}else if(r.value=="TheRidgeMap"){let e=yield g(`${u}/ridgeline_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="HistogramDensityPlot"){let e=yield g(`${u}/histogram_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="RadialBarGraph"){let e=yield g(`${u}/radialcolumn_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="graph"){let e=yield g(`${u}/lineplot_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="AreaChart"){let e=yield g(`${u}/areachart_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="Logo"){let e=yield g(`${u}/seqlogo_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}else if(r.value=="RegulatoryNetworkDiagram"){let e=yield g(`${u}/network_simple/?`);a.setuseVisualConstructionGetUrl(e),console.log(" ",e),p.push({path:"/visual/construction/three"})}}catch(e){console.log(" ",e)}}),g=e=>b(this,null,function*(){const l=e,s=yield Re(),o=yield c==null?void 0:c.value.returnedValue();if(a.useTwoLoginFlag=!0,a.useVisualConstructionTwobody&&a.useVisualConstructionTwohander){const t=W([...a.useVisualConstructionTwohander],[...a.useVisualConstructionTwobody]),{msg:m}=yield Se({content:JSON.stringify(t)});if(console.log(" ",m),Object.keys(o.validate).forEach(n=>{l==`${u}/volcanoplot_simple/?`?o.validate[n]&&n!="labels_string"&&(o.validate[n].length>0||typeof o.validate[n]=="number")?e=`${e}${n}=${o.validate[n]}&`:o.validate[n]&&n=="labels_string"&&o.validate[n].length>0&&(e=`${e}${n}=${o.validate[n].split(`
`).join()}&`):o.validate[n]&&(o.validate[n].length>0||typeof o.validate[n]=="number")&&(e=`${e}${n}=${o.validate[n]}&`)}),o.colorArr&&(l==`${u}/volcanoplot_simple/?`?e=e+`${o.colorArr}&`:l==`${u}/bubble_simple/?`?e=e+`${o.colorArr}&`:e=e+`color=${o.colorArr}&`),l==`${u}/venn_simple/?`&&(a.vennUrlFlag?e=e+"row_names=1&":e=e+"row_names=0&"),l==`${u}/network_simple/?`){const n=o.linkColour(),y=o.colourScale();n&&(e=e+`linkColour=${n}&`),y&&(e=e+`colourScale=${y}&`)}let f=q(m);return e=e+`picArchiveUploadUserId=${s.id}&`,e=e+"url=https://genmic-prd.e2yun.com/api/sys/minio/uploadVisualPicManagement&",e=e+`token=${encodeURIComponent(fe())}&`,e=e+"sp_hide_navbar=true&",e=e+`data_url=${f}&`,e=e+`language=${H.value}`,e}});return T(()=>a.visualHomePage,()=>{w.value.find(e=>e.label==a.visualHomePage)&&(r.value=w.value.find(e=>e.label==a.visualHomePage).value)}),T(()=>a.summarySheet,()=>{a.useTwoLoginFlag=!a.useTwoLoginFlag,setTimeout(()=>{a.useTwoLoginFlag=!a.useTwoLoginFlag},1)}),le(()=>b(this,null,function*(){G(r.value),a.visualHomePage!=""&&w.value.find(e=>e.label==a.visualHomePage)&&(r.value=w.value.find(e=>e.label==a.visualHomePage).value)})),k({GettingvaluesNext:S}),(e,l)=>{const s=se("CustomButton");return M(),U("div",null,[$(v(Ge),{ref_key:"ysExpand",ref:d,canExpan:!1},{action:x(()=>[h("div",{onClick:l[0]||(l[0]=o=>D(d.value)),class:"flex items cursor-pointer",style:{width:"60px",textAlign:"center",margin:"10px 10px"}},[h("img",{src:B(`${v(F)?"fold.svg":"unfold.svg"}`),alt:"expand",style:{width:"10px",height:"10px"}},null,8,Le),h("span",Ue,E(v(F)?v(i)("AllMessage.fold"):v(i)("AllMessage.unfold")),1)])]),title:x(()=>[v(a).useTwoLoginFlag?ue("v-if",!0):(M(),U("div",Oe,[h("div",Ne,[h("span",He,E(v(i)("visual.construction.selectImgType")),1),$(v(ie),{showSearch:"","filter-option":(o,t)=>t.label.toLowerCase().indexOf(o.toLowerCase())>=0,value:r.value,"onUpdate:value":l[1]||(l[1]=o=>r.value=o),style:{width:"408px"},options:w.value,getPopupContainer:o=>o.parentElement,size:"large"},{suffixIcon:x(()=>[$(v(ne))]),_:1},8,["filter-option","value","options","getPopupContainer"]),$(s,{btnStyle:{backgroundColor:"#2F54EB",minWidth:"90px",height:"40px",margin:"0px 0px 0px 20px",fontSize:"14px",fontWeight:200,fontFamily:"SourceHanSansCN-Regular, SourceHanSansCN"},onClick:l[2]||(l[2]=()=>{z()})},{default:x(()=>[re(E(v(i)("visual.construction.instructions")),1)]),_:1})]),h("div",null,E(v(i)("visual.construction.paramsSelect")),1)]))]),default:x(()=>[h("div",null,[(M(),ce(pe(R.value),{ref_key:"getDataRef",ref:c,toNextFn:S},null,512))]),$(Te,{onRegister:v(j)},null,8,["onRegister"])]),_:1},512)])}}});var Yo=X(je,[["__scopeId","data-v-346eb3ca"]]);export{Yo as default};
