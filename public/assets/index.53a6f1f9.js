var M=(B,l,s)=>new Promise((y,f)=>{var E=u=>{try{v(s.next(u))}catch(i){f(i)}},k=u=>{try{v(s.throw(u))}catch(i){f(i)}},v=u=>u.done?y(u.value):Promise.resolve(u.value).then(E,k);v((s=s.apply(B,l)).next())});import{P as U}from"./index.8d0858e7.js";import{u as q,B as N}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as R}from"./index.c8f8ec06.js";import{a as j,b as G,u as H,cJ as I,ch as J,r as S,aG as Q,q as W,x as D,o as h,U as x,A as a,i as r,j as e,I as z,d5 as K,d6 as X,D as C,t as _,f as d,dc as Y}from"./index.10ef4608.js";/* empty css              *//* empty css               */import{c as Z,u as ee}from"./index.cd558d90.js";import{q as te,a as oe,g as P,r as ae}from"./index.f32f4dcd.js";import{u as ie}from"./useBatchDelete.9dc1ae07.js";import ne from"./EchartModal.2b8ee310.js";import re from"./ViewEchartModal.1a5d3549.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";/* empty css               */import"./index.968d275e.js";import"./homePage.545183cd.js";const le=G({__name:"index",setup(B){const{t:l}=H(),{hasPermission:s}=I(),y=J.RangePicker,f=S([]),[E,{openModal:k}]=R(),[v,{openModal:u}]=R(),i=S({absolute:!1,loading:!1,tip:"\u52A0\u8F7D\u4E2D..."}),[A,{setColumns:O,reload:g,setProps:F}]=q({api:te,searchInfo:{identification:"\u53EF\u89C6\u5316\u9996\u9875"},clickToRowSelect:!1,useSearchForm:!0,formConfig:{showActionButtonGroup:!1,schemas:Z},rowSelection:{type:"checkbox"},filterFn(o){var t;return Reflect.set(o,"oneLevel",(t=o==null?void 0:o.oneLevel)==null?void 0:t.join()),o},actionColumn:{width:200,title:l("sdp.ccim.operation"),slots:{customRender:"action"},fixed:"right"},showIndexColumn:!1}),{hasBatchDelete:V,handleDeleteOrBatchDelete:T,selectionOptions:L}=ie(ae,g,F);Q(()=>{F(L)});const w=(o,t=void 0)=>{o==="edit"&&t?(i.value.loading=!0,P(t.id).then(c=>{k(!0,{statusPayload:o,record:c})}).catch(c=>{console.error(c)}).finally(()=>{i.value.loading=!1})):k(!0,{statusPayload:o,record:t})},$=o=>{i.value.loading=!0,P(o.id).then(t=>{u(!0,{record:t})}).catch(t=>{console.error(t)}).finally(()=>{i.value.loading=!1})};return W(()=>M(this,null,function*(){const o=yield oe({identification:"\u53EF\u89C6\u5316\u9996\u9875"});f.value=o.map(t=>({text:t.type,value:t.code})),O(ee({typeFilter:f.value}))})),(o,t)=>{const c=D("CustomButton"),b=D("a-button");return h(),x(e(U),null,{default:a(()=>[r(e(N),{onRegister:e(A)},{"form-input":a(({model:n,field:p})=>[r(e(z),{value:n[p],"onUpdate:value":m=>n[p]=m,allowClear:"",placeholder:e(l)("sdp.ccim.inputSearch"),onPressEnter:e(g),onChange:t[0]||(t[0]=({type:m})=>{m=="click"&&e(g)()})},{prefix:a(()=>[r(e(K))]),_:2},1032,["value","onUpdate:value","placeholder","onPressEnter"])]),"form-createTime":a(({model:n,field:p})=>[r(e(y),{value:n[p],"onUpdate:value":m=>n[p]=m,onChange:t[1]||(t[1]=m=>e(g)()),separator:"-"},{suffixIcon:a(()=>[r(e(X))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:a(()=>[r(c,{btnStyle:{backgroundColor:"#2F54EB",color:"#fff"},onClick:t[2]||(t[2]=n=>w("add"))},{default:a(()=>[C(_(e(l)("common.addText")),1)]),_:1}),r(c,{btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",color:"#000",marginLeft:"10px"},onClick:t[3]||(t[3]=n=>e(T)(null)),disabled:e(V)},{default:a(()=>[C(_(e(l)("mom.deletes")),1)]),_:1},8,["btnStyle","disabled"])]),action:a(({record:n})=>[e(s)(["pic:card:view"])?(h(),x(b,{key:0,type:"link",onClick:p=>$(n)},{default:a(()=>[C(_(e(l)("common.viewText")),1)]),_:2},1032,["onClick"])):d("v-if",!0),e(s)(["pic:card:edit"])?(h(),x(b,{key:1,type:"link",onClick:p=>w("edit",n)},{default:a(()=>[C(_(e(l)("common.editText")),1)]),_:2},1032,["onClick"])):d("v-if",!0),e(s)(["pic:card:del"])?(h(),x(b,{key:2,type:"link",onClick:p=>e(T)(n)},{default:a(()=>[C(_(e(l)("common.delText")),1)]),_:2},1032,["onClick"])):d("v-if",!0)]),_:1},8,["onRegister"]),d(" \u65B0\u589E\u6216\u7F16\u8F91\u56FE\u8868Modal "),r(ne,{onRegister:e(E),onSuccess:e(g)},null,8,["onRegister","onSuccess"]),d(" \u67E5\u770B\u56FE\u8868Modal "),r(re,{onRegister:e(v)},null,8,["onRegister"]),d(" \u67E5\u770B\u6216\u7F16\u8F91\u7684\u65F6\u5019\u9700\u8981loading \u56E0\u4E3A\u6570\u636E\u53EF\u80FD\u4F1A\u5F88\u5927 \u9020\u6210\u591A\u6B21\u70B9\u51FB "),r(e(Y),{loading:i.value.loading,absolute:i.value.absolute,tip:i.value.tip},null,8,["loading","absolute","tip"])]),_:1})}}});var We=j(le,[["__scopeId","data-v-49af7a9e"]]);export{We as default};
