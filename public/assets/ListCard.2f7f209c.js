var b=(E,A,e)=>new Promise((h,k)=>{var i=n=>{try{m(e.next(n))}catch(_){k(_)}},t=n=>{try{m(e.throw(n))}catch(_){k(_)}},m=n=>n.done?h(n.value):Promise.resolve(n.value).then(i,t);m((e=e.apply(E,A)).next())});import{b as x,r as v,l as P,ay as S,q as T,o as y,U as q,A as c,e as f,i as r,j as o,C as L,t as g,cv as G,cl as I,ab as U,cM as $,c as N,ap as z,ao as H,cS as J,af as K,D as V,G as Q}from"./index.10ef4608.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               */import{c as X,e as Y}from"./homePage.c3e9252e.js";const Z={style:{marginBottom:"10px"}},p=V(" \xA0 "),ee=V("\u5220\u9664"),ce=x({__name:"ListCard",props:{item:Object,index:Number,remove:Function},setup(E,{expose:A}){var B,D;const e=E,{createMessage:h}=Q(),k=v((B=e==null?void 0:e.item)==null?void 0:B.temporaryWarehouseOssList),i=v(!1),t=v([]),m=v(!1),n=v([]),_=(D=e==null?void 0:e.item)==null?void 0:D.id,C=v(!1),O=P(()=>{const u=[];return t.value.forEach((l,a)=>{var s;l&&u.push((s=e==null?void 0:e.item)==null?void 0:s.temporaryWarehouseOssList[a].id)}),u}),w=u=>{R(i.value),t.value.length<=0&&F(),i.value?t.value.forEach((l,a)=>{t.value[a]=!1}):t.value.forEach((l,a)=>{t.value[a]=!0}),i.value=!i.value},W=(u,l)=>{M(t.value[l],u.fileRealName,l),t.value.length<=0&&F(),t.value[l]=!t.value[l];const a=[];t.value.forEach((s,d)=>{s?a.push(d):a.splice(d,1)}),a.length===t.value.length?i.value=!0:i.value=!1};S(()=>t,(u,l)=>{},{deep:!0});const F=()=>{var u,l;(l=(u=e==null?void 0:e.item)==null?void 0:u.temporaryWarehouseOssList)==null||l.forEach((a,s)=>{t.value[s]=!1})},M=(u,l,a)=>{u?n.value[a]=null:n.value[a]=l},R=u=>{var l;u?n.value=[]:(l=e==null?void 0:e.item)==null||l.temporaryWarehouseOssList.forEach((a,s)=>{n.value[s]=a.fileRealName})},j=()=>b(this,null,function*(){var u;if(C.value=!0,i.value)X({id:(u=e==null?void 0:e.item)==null?void 0:u.id}),setTimeout(()=>{(e==null?void 0:e.remove).call(e),C.value=!1,h.success("\u5220\u9664\u6210\u529F")},500);else if(t.value.length<=0)h.warn("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u9009\u9879"),C.value=!1;else{const l=[];t.value.forEach((a,s)=>{var d;a&&l.push((d=e==null?void 0:e.item)==null?void 0:d.temporaryWarehouseOssList[s].id)}),Y({ids:l}),setTimeout(()=>{(e==null?void 0:e.remove).call(e),C.value=!1,h.success("\u5220\u9664\u6210\u529F")},500)}});return T(()=>{}),A({dataName:n,id:_,idsAll:O,checkAllArr:t,checkAll:i}),(u,l)=>(y(),q(o(K),{spinning:C.value},{default:c(()=>[f("div",Z,[r(o(J),null,{title:c(()=>{var a,s;return[r(o(L),{checked:i.value,indeterminate:m.value,onChange:w},null,8,["checked","indeterminate"]),p,f("h2",null," \u9879\u76EE\u540D\u79F0:"+g((a=e==null?void 0:e.item)==null?void 0:a.subproject)+" \xA0 \xA0ID:"+g((s=e==null?void 0:e.item)==null?void 0:s.id),1)]}),action:c(()=>[r(o(G),null,{default:c(()=>[r(o(I),{span:3,onClick:j},{default:c(()=>[r(o(U),null,{default:c(()=>[ee]),_:1})]),_:1})]),_:1})]),default:c(()=>[r(o($),{hoverable:!0,style:{}},{default:c(()=>[(y(!0),N(H,null,z(k.value,(a,s)=>(y(),N("div",{key:a.createBy},[f("div",null,[r(o(L),{onChange:d=>W(a,s),checked:t.value[s],disabled:a.status!="done"},{default:c(()=>[f("div",null,"\u5E8F\u53F7: "+g(s+1),1),f("div",null,"\u8DEF\u5F84: "+g(a.fullPath?a.fullPath:"\u6682\u672A\u4E0A\u4F20\u5B8C\u6BD5"),1),f("div",null,"\u540D\u79F0: "+g(a.fileRealName),1)]),_:2},1032,["onChange","checked","disabled"])])]))),128))]),_:1})]),_:1})])]),_:1},8,["spinning"]))}});export{ce as default};
