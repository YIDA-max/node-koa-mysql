import{u as b,B as T}from"./index-b6b4562f.js";import{u as _,a as w}from"./useForm-f3f06b26.js";import"./index-1ec106fd.js";import{u as o}from"./useRender-3355e2aa.js";import{D as r,g as d,b as y}from"./dict-9afd743e.js";import{bD as s,a as c,H as O,u as n,o as P,c as x,w as A,e as C,ag as M}from"./index-4a8cc517.js";const E=[{title:"客户端编号",dataIndex:"clientId",width:200},{title:"客户端密钥",dataIndex:"secret",width:100},{title:"应用名",dataIndex:"name",width:100},{title:"应用图标",dataIndex:"logo",width:120,customRender:({text:e})=>o.renderImg(e)},{title:"状态",dataIndex:"status",width:180,customRender:({text:e})=>o.renderDict(e,r.COMMON_STATUS)},{title:"访问令牌的有效期",dataIndex:"accessTokenValiditySeconds",width:100,customRender:({text:e})=>o.renderText(e,"秒")},{title:"刷新令牌的有效期",dataIndex:"refreshTokenValiditySeconds",width:100,customRender:({text:e})=>o.renderText(e,"秒")},{title:"授权类型",dataIndex:"authorizedGrantTypes",width:180,customRender:({text:e})=>o.renderTags(e)},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>o.renderDate(e)}],H=[{label:"应用名",field:"name",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:d(r.COMMON_STATUS)},colProps:{span:8}}],R=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"客户端编号",field:"clientId",required:!0,component:"Input"},{label:"客户端密钥",field:"secret",required:!0,component:"Input"},{label:"应用名",field:"name",required:!0,component:"Input"},{label:"应用图标",field:"logo",required:!0,component:"Input"},{label:"应用描述",field:"description",component:"InputTextArea"},{label:"状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:d(r.COMMON_STATUS)}},{label:"访问令牌的有效期",field:"accessTokenValiditySeconds",required:!0,component:"InputNumber"},{label:"刷新令牌的有效期",field:"refreshTokenValiditySeconds",required:!0,component:"InputNumber"},{label:"授权类型",field:"authorizedGrantTypes",required:!0,component:"Select",componentProps:{options:y(r.SYSTEM_OAUTH2_GRANT_TYPE),mode:"multiple"}},{label:"授权范围",field:"scopes",component:"Select",componentProps:{mode:"tags",options:[]}},{label:"自动授权范围",field:"autoApproveScopes",component:"Select",componentProps:{mode:"tags",options:[]}},{label:"可重定向的 URI 地址",field:"redirectUris",required:!0,component:"Select",componentProps:{mode:"tags",options:[]}},{label:"权限",field:"authorities",component:"Select",componentProps:{mode:"tags",options:[]}},{label:"资源",field:"resourceIds",component:"Select",componentProps:{mode:"tags",options:[]}},{label:"附加信息",field:"additionalInformation",component:"InputTextArea"}];function L(e){return s.get({url:"/system/oauth2-client/page",params:e})}function q(e){return s.get({url:"/system/oauth2-client/get?id="+e})}function U(e){return s.post({url:"/system/oauth2-client/create",data:e})}function k(e){return s.put({url:"/system/oauth2-client/update",data:e})}function Y(e){return s.delete({url:"/system/oauth2-client/delete?id="+e})}const D=c({name:"SystemClientModal"}),z=c({...D,emits:["success","register"],setup(e,{emit:u}){const a=O(!0),[p,{setFieldsValue:m,resetFields:f,validate:h}]=_({labelWidth:160,baseColProps:{span:24},schemas:R,showActionButtonGroup:!1,actionColOptions:{span:23}}),[g,{setModalProps:i,closeModal:I}]=b(async t=>{if(f(),i({confirmLoading:!1}),a.value=!!t?.isUpdate,n(a)){const l=await q(t.record.id);m({...l})}});async function S(){try{const t=await h();i({confirmLoading:!0}),n(a)?await k(t):await U(t),I(),u("success")}finally{i({confirmLoading:!1})}}return(t,l)=>(P(),x(n(T),M(t.$attrs,{onRegister:n(g),title:a.value?"编辑":"新增",onOk:S}),{default:A(()=>[C(n(w),{onRegister:n(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{z as _,E as c,Y as d,L as g,H as s};
