var P=(b,d,a)=>new Promise((v,_)=>{var h=r=>{try{w(a.next(r))}catch(n){_(n)}},y=r=>{try{w(a.throw(r))}catch(n){_(n)}},w=r=>r.done?v(r.value):Promise.resolve(r.value).then(h,y);w((a=a.apply(b,d)).next())});import{u as j,bm as E,b as H,r as x,ay as N,q as D,x as U,o as M,c as V,i as p,A as f,j as c,X as S,e as L,D as I,t as C,y as q,z as G,ao as W,ap as X,cl as $,ab as J,cv as K}from"./index.10ef4608.js";import{u as Q,B as Y}from"./useForm.98d7b8ca.js";/* empty css               */import{u as Z}from"./casual.c3003c80.js";import ee from"./V3ColorPicker.3aeb3ea0.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./ColorPicker.3725ed80.js";import"./ColorPanel.209bf7d4.js";import"./draggable.354c5b1e.js";import"./ColorPreview.6aea0981.js";import"./ColorHue.94d928ef.js";import"./ColorAlpha.071f638e.js";import"./ColorValue.246a701d.js";import"./ColorList.125944a3.js";const{t:g}=j(),oe=()=>{const b=[{field:"title",component:"Input",label:g("AllMessage.visual.two.PreferencesList.title"),colProps:{span:7,offset:0}},{field:"x_title",component:"Input",label:g("AllMessage.visual.two.PreferencesList.x_title")},{field:"y_title",component:"Input",label:g("AllMessage.visual.two.PreferencesList.y_title")},{field:"height",component:"Input",label:g("AllMessage.visual.two.PreferencesList.height"),rules:[{validator:(d,a)=>P(void 0,null,function*(){return isNaN(a)&&a?Promise.reject(g("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}],colProps:{span:7,offset:0}},{field:"width",component:"Input",label:g("AllMessage.visual.two.PreferencesList.width"),rules:[{validator:(d,a)=>P(void 0,null,function*(){return isNaN(a)&&a?Promise.reject(g("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}]},{field:"group_col",component:"Select",slot:"group_col",label:g("AllMessage.visual.two.PreferencesList.group_col"),colProps:{span:7,offset:1},required:!0},{field:"value_col",component:"Select",slot:"value_col",label:g("AllMessage.visual.two.PreferencesList.value_colTwo"),required:!0,colProps:{span:7,offset:0}},{field:"color",component:"Select",label:E("div",{style:"position: relative;top: 15px;"},[E("div",{},g("AllMessage.visual.two.PreferencesList.colorOne"))]),slot:"color",colProps:{span:24,offset:0}}];return b.forEach(d=>{d.component=="Select"&&(d.componentProps||(d.componentProps={}),d.componentProps.size="large")}),b},te={style:{minHeight:"400px"}},le={style:{position:"relative",top:"0px",margin:"0px 0px 0px 0px"}},se={style:{width:"900px",maxHeight:"130px",height:"130px",overflow:"auto",border:"1px solid #d3d5db"}},ae={style:{}},re={style:{position:"relative",display:"inline-block",top:"8px"}},Fe=H({__name:"HistogramDensityPlot",props:{toNextFn:Function},setup(b,{expose:d}){const{t:a}=j(),v=Z(),_=x([]),h=x([]),y=x(1),w=x(""),r=x([]),n=x([]),k=x([]);N(()=>n.value,()=>{let l="";n.value.map(s=>{l=l+`%23${s.color.slice(1)},`}),l=l.substr(0,l.length-1),w.value=l},{deep:!0});const z=l=>{n.value=[],r.value=[];const s=[...v.useVisualConstructionTwohander],i=[...v.useVisualConstructionTwobody],u={};s.forEach(e=>{u[e.title]=[],i.forEach(t=>{e.slots?u[e.title].push(t[e.dataIndex]):(e.dataIndex,u[e.title].push(Number(t[e.dataIndex])))})}),[...new Set(u[l])].forEach(e=>{n.value.push({color:A()}),r.value.push({title:e})})},A=()=>{for(var l="#",s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i=0;i<6;i++){var u=parseInt(Math.random()*16);l+=s[u]}return l},[F,{setFieldsValue:O,validate:T,resetFields:B}]=Q({labelWidth:110,schemas:oe(),baseColProps:{span:7,offset:1},actionColOptions:{span:18,offset:4},showActionButtonGroup:!1}),R=()=>P(this,null,function*(){return w.value?{validate:yield T(),colorArr:w.value}:{validate:yield T()}});return N(()=>v.useVisualConstructionTwohander,()=>{B(),_.value=[],n.value=[],r.value=[];const l=[...v.useVisualConstructionTwohander],s=[...v.useVisualConstructionTwobody],i={};l.forEach(o=>{i[o.title]=[],s.forEach(e=>{o.slots?i[o.title].push(e[o.dataIndex]):(o.dataIndex,i[o.title].push(Number(e[o.dataIndex])))})}),[...new Set(i.group)].forEach(o=>{n.value.push({color:A()}),r.value.push({title:o})}),l.length==2&&l[0].title=="group"&&l[1].title=="value"&&O({group_col:"group",value_col:"value"})}),D(()=>{const l=setInterval(()=>{if(v.useVisualConstructionTwohander){h.value=v.useVisualConstructionTwohander,h.value.forEach(e=>{e.label=e.title,e.value=e.title}),_.value=[],n.value=[],r.value=[];const s=[...v.useVisualConstructionTwohander],i=[...v.useVisualConstructionTwobody],u={};s.forEach(e=>{u[e.title]=[],i.forEach(t=>{e.slots?u[e.title].push(t[e.dataIndex]):(e.dataIndex,u[e.title].push(Number(t[e.dataIndex])))})}),[...new Set(u.group)].forEach(e=>{n.value.push({color:A()}),r.value.push({title:e})}),s.length==2&&s[0].title=="group"&&s[1].title=="value"&&O({group_col:"group",value_col:"value"}),clearInterval(l)}},1e3)}),d({returnedValue:R,controlGroup:k}),(l,s)=>{const i=U("a-radio"),u=U("a-radio-group");return M(),V("div",te,[p(c(Y),{onRegister:c(F)},{comparisons:f(({model:o,field:e})=>[p(c(S),{size:"large",options:_.value,value:o[e],"onUpdate:value":t=>o[e]=t,allowClear:"",showSearch:"","filter-option":(t,m)=>m.label.toLowerCase().indexOf(t.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),selectRowSelect:f(({model:o,field:e})=>[p(c(S),{size:"large",options:h.value,mode:"multiple",placeholder:c(a)("AllMessage.visual.two.PreferencesList.selectRowSelectPlaceholder"),value:o[e],"onUpdate:value":t=>o[e]=t,allowClear:"",showSearch:"","filter-option":(t,m)=>m.label.toLowerCase().indexOf(t.toLowerCase())>=0},null,8,["options","placeholder","value","onUpdate:value","filter-option"])]),group_col:f(({model:o,field:e})=>[p(c(S),{size:"large",options:h.value,value:o[e],"onUpdate:value":t=>o[e]=t,allowClear:"",showSearch:"","filter-option":(t,m)=>m.label.toLowerCase().indexOf(t.toLowerCase())>=0,onChange:s[0]||(s[0]=t=>{z(t)})},null,8,["options","value","onUpdate:value","filter-option"])]),value_col:f(({model:o,field:e})=>[p(c(S),{size:"large",options:h.value,value:o[e],"onUpdate:value":t=>o[e]=t,allowClear:"",showSearch:"","filter-option":(t,m)=>m.label.toLowerCase().indexOf(t.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),color:f(()=>[L("div",le,[p(u,{value:y.value,"onUpdate:value":s[1]||(s[1]=o=>y.value=o)},{default:f(()=>[p(i,{style:{display:"block",height:"30px",lineHeight:"30px"},value:1},{default:f(()=>[I(C(c(a)("AllMessage.visual.two.PreferencesList.default"))+":",1)]),_:1}),p(i,{style:{display:"block",height:"30px",lineHeight:"30px"},value:2},{default:f(()=>[I(C(c(a)("AllMessage.visual.two.PreferencesList.custom"))+": ",1)]),_:1}),q(L("div",se,[(M(!0),V(W,null,X(r.value,(o,e)=>(M(),V("div",{key:o.title,style:{margin:"0px 0px 0px 15px",width:"30%",height:"40px",display:"inline-block"}},[L("div",ae,[I(C(o.title)+C(c(a)("AllMessage.visual.two.PreferencesList.colorItem"))+" ",1),L("div",re,[p(ee,{value:n.value[e].color,"onUpdate:value":t=>n.value[e].color=t,size:"mini",theme:"light",width:400},null,8,["value","onUpdate:value"])])])]))),128))],512),[[G,y.value==2]])]),_:1},8,["value"])])]),_:1},8,["onRegister"]),p(c(K),null,{default:f(()=>[p(c($),{span:4,offset:11},{default:f(()=>[p(c(J),{size:"middle",style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"},onClick:s[2]||(s[2]=()=>{b.toNextFn()})},{default:f(()=>[I(C(c(a)("AllMessage.visual.two.PreferencesList.confirm")),1)]),_:1})]),_:1})]),_:1})])}}});export{Fe as default};
