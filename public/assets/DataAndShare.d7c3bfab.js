var L=Object.defineProperty;var D=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var O=(r,n,e)=>n in r?L(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e,U=(r,n)=>{for(var e in n||(n={}))M.call(n,e)&&O(r,e,n[e]);if(D)for(var e of D(n))N.call(n,e)&&O(r,e,n[e]);return r};var w=(r,n,e)=>new Promise((v,f)=>{var c=i=>{try{h(e.next(i))}catch(m){f(m)}},_=i=>{try{h(e.throw(i))}catch(m){f(m)}},h=i=>i.done?v(i.value):Promise.resolve(i.value).then(c,_);h((e=e.apply(r,n)).next())});import{u as R,B as $}from"./useForm.98d7b8ca.js";import{b as q,u as F,r as g,v as j,l as b,cn as A,j as t,q as G,o as T,c as W,i as s,A as p,cv as x,cl as d,X as P,e as C,t as y,D as B}from"./index.10ef4608.js";/* empty css               */import X from"./index.024ea322.js";import z from"./index.6e25da4f.js";import{S as H}from"./add.f693dce6.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./CustomConfirmModal.4993b14f.js";import"./modal-error.7cada6d5.js";import"./useSetFrom.689ec4a2.js";import"./FromItem.81f55d95.js";import"./CustomConfirmModal.2d382653.js";import"./FromItem.3558c6ed.js";const J=B("\xA0 "),K=B("\xA0 "),Pe=q({__name:"DataAndShare",setup(r,{expose:n}){const{t:e}=F(),v=g([]),f=g([]),c=g([]),_=j(),h=b(()=>A(t(c)).map(o=>(o.disabled=t(f).indexOf(o.value)!==-1,o))),i=_.getUserInfo,m=g([]),I=b(()=>A(t(c)).map(o=>(o.disabled=t(v).indexOf(o.value)!==-1,o))),[V,{validate:k}]=R({schemas:[{field:"DataOwner",component:"Select",label:e("mom.increasedData.DataOwner"),slot:"DataOwner",defaultValue:[i.id],required:!0,colProps:{span:19,offset:2}},{field:"ShareOne",component:"Input",label:e("mom.increasedData.ShareOne"),slot:"ShareOne",defaultValue:[],colProps:{span:19,offset:2}}],labelWidth:120,baseColProps:{span:19,offset:2},showActionButtonGroup:!1});G(()=>w(this,null,function*(){const o=_.getUserInfo,S=yield H();new Set(S.map(a=>a.id)).has(o.id)||S.push(U({},o)),c.value=S,c.value.forEach((a,l)=>{a.label=a.nickname,a.value=a.id,a.key=l})}));function E(){return w(this,null,function*(){try{const[o]=yield Promise.all([k()]);return o}catch(o){console.log(o)}})}return n({DataAndShareSubmitAll:E}),(o,S)=>(T(),W("div",null,[s(t($),{onRegister:t(V)},{DataOwner:p(({model:u,field:a})=>[s(t(x),null,{default:p(()=>[s(t(d),{span:10},{default:p(()=>[s(t(P),{ref:"select",value:u[a],"onUpdate:value":l=>u[a]=l,style:{width:"220px"},allowClear:"",mode:"multiple",options:t(h),getPopupContainer:l=>l.parentElement,placeholder:t(e)("AllMessage.pleaseChoose"),onChange:()=>{v.value=u[a],m.value=u[a]}},null,8,["value","onUpdate:value","options","getPopupContainer","placeholder","onChange"])]),_:2},1024),s(t(d),{span:4},{default:p(()=>[C("span",null,y(t(e)("mom.increasedData.AddDataOwner")),1),J]),_:1}),s(t(d),{span:2,offset:0},{default:p(()=>[C("div",null,[s(X,{disabledSelect:m.value},null,8,["disabledSelect"])])]),_:1})]),_:2},1024)]),ShareOne:p(({model:u,field:a})=>[s(t(x),null,{default:p(()=>[s(t(d),{span:10},{default:p(()=>[s(t(P),{ref:"select",value:u[a],"onUpdate:value":l=>u[a]=l,style:{width:"220px"},allowClear:"",getPopupContainer:l=>l.parentElement,mode:"multiple",options:t(I),placeholder:t(e)("AllMessage.pleaseChoose"),onChange:l=>f.value=u[a]},null,8,["value","onUpdate:value","getPopupContainer","options","placeholder","onChange"])]),_:2},1024),s(t(d),{span:4},{default:p(()=>[C("span",null,y(t(e)("mom.increasedData.AddShare")),1),K]),_:1}),s(t(d),{span:2,offset:0},{default:p(()=>[s(z)]),_:1})]),_:2},1024)]),_:1},8,["onRegister"])]))}});export{Pe as default};
