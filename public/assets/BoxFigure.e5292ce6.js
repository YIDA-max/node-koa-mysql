var V=(A,h,r)=>new Promise((c,w)=>{var m=v=>{try{_(r.next(v))}catch(P){w(P)}},u=v=>{try{_(r.throw(v))}catch(P){w(P)}},_=v=>v.done?c(v.value):Promise.resolve(v.value).then(m,u);_((r=r.apply(A,h)).next())});import{u as E,bm as O,b as Q,r as C,ay as U,q as Y,x as F,o as N,c as M,i as d,A as f,j as i,X as T,e as D,D as y,t as L,y as Z,z as I,ao as j,ap as B,ab as k,aL as R,cl as ee,cv as le,d7 as oe}from"./index.10ef4608.js";import{u as te,B as ae}from"./useForm.98d7b8ca.js";/* empty css               */import{u as se}from"./casual.c3003c80.js";import re from"./V3ColorPicker.3aeb3ea0.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./ColorPicker.3725ed80.js";import"./ColorPanel.209bf7d4.js";import"./draggable.354c5b1e.js";import"./ColorPreview.6aea0981.js";import"./ColorHue.94d928ef.js";import"./ColorAlpha.071f638e.js";import"./ColorValue.246a701d.js";import"./ColorList.125944a3.js";const{t:b}=E(),ne=()=>{const A=[{field:"title",component:"Input",label:b("AllMessage.visual.two.PreferencesList.title"),colProps:{span:7,offset:0}},{field:"x_title",component:"Input",label:b("AllMessage.visual.two.PreferencesList.x_title")},{field:"y_title",component:"Input",label:b("AllMessage.visual.two.PreferencesList.y_title")},{field:"height",component:"Input",label:b("AllMessage.visual.two.PreferencesList.height"),rules:[{validator:(h,r)=>V(void 0,null,function*(){return isNaN(r)&&r?Promise.reject(b("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}],colProps:{span:7,offset:0}},{field:"width",component:"Input",label:b("AllMessage.visual.two.PreferencesList.width"),rules:[{validator:(h,r)=>V(void 0,null,function*(){return isNaN(r)&&r?Promise.reject(b("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}]},{field:"col_chose",component:"Select",slot:"selectRowSelect",label:b("AllMessage.visual.two.PreferencesList.col_choseTwo")},{field:"alpha",component:"Input",label:b("AllMessage.visual.two.PreferencesList.alpha"),defaultValue:1,rules:[{validator:(h,r)=>V(void 0,null,function*(){return Number(r)<=1&&Number(r)>=.01?!0:Promise.reject("0.01~1")}),validateTrigger:"blur"}],colProps:{span:7,offset:0}},{field:"color",component:"Select",label:O("div",{style:"position: relative;top: 15px;"},[O("div",{},b("AllMessage.visual.two.PreferencesList.colorOne"))]),slot:"color",colProps:{span:24,offset:0}},{field:"addcontrolGroup",component:"Input",slot:"addcontrolGroup",label:" ",colProps:{span:24,offset:0}},{field:"addcontrolGroup",component:"Input",slot:"addcontrolGroupValue",label:" ",colProps:{span:24,offset:0}}];return A.forEach(h=>{h.component=="Select"&&(h.componentProps||(h.componentProps={}),h.componentProps.size="large")}),A},ue={style:{minHeight:"400px"}},ie={style:{position:"relative",top:"0px",margin:"0px 0px 0px 0px"}},pe={style:{width:"900px",maxHeight:"130px",height:"130px",overflow:"auto",border:"1px solid #d3d5db"}},ce={style:{}},de={style:{position:"relative",display:"inline-block",top:"8px"}},ve=y(" \xA0 "),fe=y(" \xA0 "),he=D("br",null,null,-1),Je=Q({__name:"BoxFigure",props:{toNextFn:Function},setup(A,{expose:h}){const{t:r}=E(),c=se(),w=C([]),m=C([]),u=C([]),_=C(1),v=C([]),P=C(""),g=C([]),x=C([]);U(()=>g.value,()=>{let a="";g.value.map(s=>{a=a+`%23${s.color.slice(1)},`}),a=a.substr(0,a.length-1),P.value=a},{deep:!0}),U(()=>c.useVisualConstructionTwohander,()=>{$(),m.value=[],w.value=[],g.value=[],x.value=[],m.value=[...c.useVisualConstructionTwohander],u.value=[],m.value.forEach(t=>{t.label=t.title,t.value=t.title});const a=[...c.useVisualConstructionTwohander],s=[...c.useVisualConstructionTwobody];a.forEach(t=>{s.length>0&&(isNaN(s[0][t.dataIndex])||(t.label=t.title,t.value=t.title,w.value.push(t),g.value.push({color:S()}),x.value.push({title:t.title}),u.value.push({label:t.title,value:t.title})))})},{deep:!0});const S=()=>{for(var a="#",s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=0;t<6;t++){var l=parseInt(Math.random()*16);a+=s[l]}return a},[H,{validate:z,resetFields:$}]=te({labelWidth:110,schemas:ne(),baseColProps:{span:7,offset:1},actionColOptions:{span:18,offset:4},showActionButtonGroup:!1}),q=()=>{const a={key:new Date().getTime(),data:{oneData:"",twoData:""}};v.value.push(a),console.log(v.value)},W=a=>{v.value.splice(a,1)},X=()=>V(this,null,function*(){return P.value?{validate:yield z(),colorArr:P.value}:{validate:yield z()}}),J=a=>{if(a.length>0){u.value=[],w.value=[],x.value=[],g.value=[];const s=[...c.useVisualConstructionTwohander],t=[...c.useVisualConstructionTwobody];a.forEach(l=>{K(l,s,t)&&(g.value.push({color:S()}),x.value.push({title:l}),u.value.push({label:l,value:l}))})}else{w.value=[],x.value=[],g.value=[];const s=[...c.useVisualConstructionTwohander],t=[...c.useVisualConstructionTwobody];s.map(l=>{isNaN(t[0][l.dataIndex])||(l.label=l.title,l.value=l.title,w.value.push(l),g.value.push({color:S()}),x.value.push({title:l.title}))})}};function K(a,s,t){const l=s.find(p=>p.title===a);if(!l)return!1;const n=l.dataIndex;for(const p of t){const e=p[n];if(isNaN(e))return!1}return!0}Y(()=>{const a=setInterval(()=>{if(c.useVisualConstructionTwohander){m.value=c.useVisualConstructionTwohander,m.value.forEach(l=>{l.label=l.title,l.value=l.title}),w.value=[],u.value=[],g.value=[];const s=[...c.useVisualConstructionTwohander],t=[...c.useVisualConstructionTwobody];s.map(l=>{isNaN(t[0][l.dataIndex])||(l.label=l.title,l.value=l.title,w.value.push(l),g.value.push({color:S()}),x.value.push({title:l.title}),u.value.push({label:l.title,value:l.title}))}),clearInterval(a)}},1e3)});const G=(a,s)=>{s.data.oneData==s.data.twoData&&(s.data.oneData="",s.data.twoData="",oe.error("\u5BF9\u7167\u7EC4\u91CD\u590D"))};return h({returnedValue:X,controlGroup:v}),(a,s)=>{const t=F("a-radio"),l=F("a-radio-group");return N(),M("div",ue,[d(i(ae),{onRegister:i(H)},{comparisons:f(({model:n,field:p})=>[d(i(T),{size:"large",options:w.value,value:n[p],"onUpdate:value":e=>n[p]=e,allowClear:"",showSearch:"","filter-option":(e,o)=>o.label.toLowerCase().indexOf(e.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),selectRowSelect:f(({model:n,field:p})=>[d(i(T),{size:"large",options:m.value,onChange:()=>{J(n[p])},mode:"multiple",placeholder:i(r)("AllMessage.visual.two.PreferencesList.selectRowSelectPlaceholder"),value:n[p],"onUpdate:value":e=>n[p]=e,allowClear:"",showSearch:"","filter-option":(e,o)=>o.label.toLowerCase().indexOf(e.toLowerCase())>=0},null,8,["options","onChange","placeholder","value","onUpdate:value","filter-option"])]),color:f(()=>[D("div",ie,[d(l,{value:_.value,"onUpdate:value":s[0]||(s[0]=n=>_.value=n)},{default:f(()=>[d(t,{style:{display:"block",height:"30px",lineHeight:"30px"},value:1},{default:f(()=>[y(L(i(r)("AllMessage.visual.two.PreferencesList.default"))+":",1)]),_:1}),d(t,{style:{display:"block",height:"30px",lineHeight:"30px"},value:2},{default:f(()=>[y(L(i(r)("AllMessage.visual.two.PreferencesList.custom"))+": ",1)]),_:1}),Z(D("div",pe,[(N(!0),M(j,null,B(x.value,(n,p)=>(N(),M("div",{key:n.title,style:{margin:"0px 0px 0px 15px",width:"30%",height:"40px",display:"inline-block"}},[D("div",ce,[y(L(n.title)+L(i(r)("AllMessage.visual.two.PreferencesList.colorItem"))+" ",1),D("div",de,[d(re,{value:g.value[p].color,"onUpdate:value":e=>g.value[p].color=e,size:"mini",theme:"light",width:400},null,8,["value","onUpdate:value"])])])]))),128))],512),[[I,_.value==2]])]),_:1},8,["value"])])]),addcontrolGroup:f(()=>[d(i(k),{size:"middle",style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"},onClick:s[1]||(s[1]=()=>{q()})},{default:f(()=>[y(L(i(r)("AllMessage.visual.two.PreferencesList.addcontrolGroup")),1)]),_:1})]),addcontrolGroupValue:f(()=>[(N(!0),M(j,null,B(v.value,(n,p)=>(N(),M("div",{key:n.data.oneData,style:{width:"100%",margin:"0px 0px 10px 0px"}},[d(i(T),{size:"large",options:u.value,value:n.data.oneData,"onUpdate:value":e=>n.data.oneData=e,style:R({width:`${(u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20!==0?u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20:100)<100?100:u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20!==0?u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20:100}px`}),allowClear:"",showSearch:"","filter-option":(e,o)=>o.label.toLowerCase().indexOf(e.toLowerCase())>=0,onChange:e=>{G(e,n)}},null,8,["options","value","onUpdate:value","style","filter-option","onChange"]),ve,d(i(T),{size:"large",options:u.value,style:R({width:`${(u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20!==0?u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20:100)<100?100:u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20!==0?u.value.map(e=>e.value).reduce((e,o)=>e>o.length?e:o.length,0)*20:100}px`}),value:n.data.twoData,"onUpdate:value":e=>n.data.twoData=e,allowClear:"",showSearch:"","filter-option":(e,o)=>o.label.toLowerCase().indexOf(e.toLowerCase())>=0,onChange:e=>{G(e,n)}},null,8,["options","style","value","onUpdate:value","filter-option","onChange"]),fe,d(i(k),{size:"middle",style:{background:"#3152ed",color:"#ffffff",border:"1px solid #666666",margin:"0px 0px",borderRadius:"4px",width:"68px"},onClick:e=>W(p)},{default:f(()=>[y(L(i(r)("AllMessage.cancel")),1)]),_:2},1032,["onClick"])]))),128))]),_:1},8,["onRegister"]),he,d(i(le),null,{default:f(()=>[d(i(ee),{span:4,offset:11},{default:f(()=>[d(i(k),{size:"middle",style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"},onClick:s[2]||(s[2]=()=>{A.toNextFn()})},{default:f(()=>[y(L(i(r)("AllMessage.visual.two.PreferencesList.confirm")),1)]),_:1})]),_:1})]),_:1})])}}});export{Je as default};
