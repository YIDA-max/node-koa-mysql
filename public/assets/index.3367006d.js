var se=Object.defineProperty,ne=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var q=(l,t,n)=>t in l?se(l,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[t]=n,z=(l,t)=>{for(var n in t||(t={}))ie.call(t,n)&&q(l,n,t[n]);if(O)for(var n of O(t))re.call(t,n)&&q(l,n,t[n]);return l},H=(l,t)=>ne(l,le(t));var v=(l,t,n)=>new Promise((A,g)=>{var m=f=>{try{C(n.next(f))}catch(y){g(y)}},_=f=>{try{C(n.throw(f))}catch(y){g(y)}},C=f=>f.done?A(f.value):Promise.resolve(f.value).then(m,_);C((n=n.apply(l,t)).next())});import{bG as E,a as ue,b as j,u as pe,r as x,aw as ce,q as de,x as T,o as F,c as K,i as a,A as s,j as e,D as I,t as d,e as i,ao as me,ap as fe,U as ve,cM as xe,ab as L,y as R,z as M,cv as W,cl as N,aL as ge,I as _e,d5 as ye,d7 as be,p as he,k as we,G as Ce}from"./index.10ef4608.js";import ke from"./upData.f97e3c06.js";import{P as Se}from"./index.8d0858e7.js";import Te from"./CollapseContainer.9e7a2bf0.js";import Ie from"./ScrollContainer.88e9a860.js";import Ae from"./LazyContainer.8ace3d2c.js";import{u as Be,B as Fe}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{q as B,a as Re,d as Me,s as Ne,b as Ee,c as Pe}from"./construction.22a3e693.js";/* empty css               *//* empty css                *//* empty css               */import{b as Ue}from"./homePage.249d27b4.js";import{A as Ve}from"./index.c279c358.js";import{C as G}from"./index.866ec2c8.js";import{d as De}from"./download.66a6d137.js";import{u as Oe}from"./casual.c3003c80.js";/* empty css                *//* empty css                */import"./CustomConfirmModal.6ea30ade.js";import"./modal-error.7cada6d5.js";import"./index.89ad81d5.js";import"./xlsx.bb920e2b.js";import"./index.c8f8ec06.js";import"./useAttrs.1d381a3e.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./uuid.2429c801.js";/* empty css                */import"./index.504b494d.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useContentViewHeight.9302814f.js";import"./CollapseHeader.d8b455d1.js";import"./index.5acffdfd.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */const qe=E(Te);E(Ie);E(Ae);const ze=l=>(he("data-v-d15d3f34"),l=l(),we(),l),He={style:{fontSize:"14px",fontWeight:"normal",color:"#666"}},Ke={style:{margin:"2px 0px 0px 0px"}},Le={class:"px-4"},We={class:"my-5"},Ge={style:{display:"flex",alignItems:"center",margin:"0px",minHeight:"80px"}},je={style:{margin:"20px 0px 0px 0px"}},Qe={style:{height:"32px",lineHeight:"32px",textAlign:"center",borderRadius:"4px"}},$e={style:{position:"relative"}},Je={style:{position:"relative",bottom:"0px"}},Xe={style:{position:"absolute",bottom:"0px",left:"40%"}},Ye=ze(()=>i("br",null,null,-1)),Ze=j({name:"\u4F5C\u56FE"}),et=j(H(z({},Ze),{setup(l){const{t}=pe(),n=Oe(),{createMessage:A}=Ce(),g=x(0),m=x([]),_=x(""),C=x([]),f=ce(),y=x(""),P=x("0"),b=x(!0),Q=()=>{g.value=k().length,_.value=k()},$=x(!1),U=()=>v(this,null,function*(){if(_.value=="")be.error("\u60A8\u5C1A\u672A\u9009\u62E9\u6587\u4EF6");else if(_.value!=""){const p=_.value.map((o,S)=>o.id);n.summarySheet=k(),n.setuseVisualOneToTwo(p),f.push({path:"/visual/construction/two",params:{data:p}})}n.useTwoLoginFlag=!1}),[J,{getSelectRows:k,reload:h,clearSelectedRowKeys:V}]=Be({columns:[{title:t("visual.construction.fileName"),dataIndex:"fileRealName",sorter:!0},{title:t("visual.construction.remark"),dataIndex:"remakers",edit:!0},{title:t("visual.construction.serial"),dataIndex:"id",sorter:!0,width:"0"},{title:t("visual.construction.updateTime"),dataIndex:"updateTime",sorter:!0}],afterFetch:p=>p,api:B,searchInfo:{keyword:y},clickToRowSelect:!1,bordered:!0,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!0,indexColumnProps:{title:t("visual.construction.serial"),dataIndex:"key"},ellipsis:!0,maxHeight:500,useSearchForm:!1,formConfig:{showActionButtonGroup:!1,labelWidth:0,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{span:6,offset:0}}],actionColOptions:{span:10}},rowSelection:{type:"checkbox"},actionColumn:{width:200,title:t("visual.construction.operation"),slots:{customRender:"action"},fixed:"right"}}),X=S=>v(this,[S],function*({record:p,value:o}){return yield Ne({id:p.id,remakers:o})}),Y=()=>v(this,null,function*(){h()}),Z=p=>v(this,null,function*(){const o=yield Ue({id:p.id});console.log(" ",o),De({url:o.downloadUrl,target:"_self"})}),ee=()=>v(this,null,function*(){const o=(yield k()).map(c=>c.id),{msg:S}=yield Ee({ids:o});S=="\u6210\u529F"?(V(),h(),A.success("\u5220\u9664\u6210\u529F")):A.success("\u672A\u5220\u9664\u6210\u529F");const{record:w}=yield B();b.value=w.length>0,g.value=k().length,_.value=k()}),te=()=>v(this,null,function*(){console.log(" ",m.value),m.value=m.value.map(o=>({name:o.label,path:o.value})),yield Pe({fileList:m.value}),h(),m.value=[];const{record:p}=yield B();b.value=p.length>0});return de(()=>v(this,null,function*(){const p=c=>(c.title=c.taskName,c.value=c.id,c.childrens&&(c.children=c.childrens.filter(r=>{if(r.title=r.name,r.value=r.url,r.key=r.url,r.name.split(".").pop()=="xlax"||r.name.split(".").pop()=="xls"||r.name.split(".").pop()=="csv"||r.name.split(".").pop()=="txt"||r.name.split(".").pop()=="fasta"||r.name.split(".").pop()=="fa")return r})),c),{record:o}=yield B(),S=o.length>0;b.value=S;const w=(yield Re()).map(p);console.log("data:",w),C.value=w})),(p,o)=>{const S=T("a-tree-select"),w=T("a-tab-pane"),c=T("a-tabs"),r=T("CustomButton"),D=T("a-button"),oe=T("a-spin");return F(),K("div",null,[a(oe,{spinning:$.value},{default:s(()=>[a(e(Se),{contentFullHeight:!0},{default:s(()=>[a(e(qe),{canExpan:!1},{title:s(()=>[I(d(e(t)("visual.construction.titleOne"))+" \xA0 \xA0 \xA0 \xA0 ",1),i("span",He,d(e(t)("AllMessage.visualConstructionTitle")),1)]),default:s(()=>[(F(!0),K(me,null,fe([e(t)("visual.construction.selectFile"),e(t)("visual.construction.fillParams"),e(t)("visual.construction.imgShow")],(u,ae)=>(F(),ve(e(Ve),{currents:1,indexs:ae+1,contents:u,key:u,toNextPage:[2],toNextFn:[U]},null,8,["indexs","contents","toNextFn"]))),128))]),_:1}),i("div",Ke,[a(e(xe),null,{default:s(()=>[i("div",Le,[a(c,{activeKey:P.value,"onUpdate:activeKey":o[2]||(o[2]=u=>P.value=u)},{default:s(()=>[a(w,{key:"0",tab:e(t)("AllMessage.visualConstructionTabsTitleOne")},{default:s(()=>[i("div",We,[a(S,{value:m.value,"onUpdate:value":o[0]||(o[0]=u=>m.value=u),"show-search":"","tree-data":C.value,"tree-checkable":"","allow-clear":"",labelInValue:"",placeholder:e(t)("visual.construction.select"),"max-tag-count":10,dropdownStyle:{position:"relative",minWidth:"10px",height:"400px",maxHeight:"200px",width:"450px !important"},size:"large",getPopupContainer:u=>u.parentElement,treeLine:!0},null,8,["value","tree-data","placeholder","getPopupContainer"]),a(e(L),{onClick:o[1]||(o[1]=()=>{te(),b.value=!0}),disabled:m.value.length==0,style:{background:"#3152ed",color:"#ffffff",margin:"0px 10px",height:"40px",borderRadius:"4px"}},{default:s(()=>[I(d(e(t)("visual.construction.enterAdd")),1)]),_:1},8,["disabled"])])]),_:1},8,["tab"]),a(w,{key:"1",tab:e(t)("AllMessage.visualConstructionTabsTitleTwo")},{default:s(()=>[i("div",Ge,[a(e(ke),{queryData:Y,reload:e(h),callback:()=>{b.value=!0}},null,8,["reload","callback"]),i("span",null,d(e(t)("AllMessage.visualConstructionTabsTitleTwoMessage")),1)])]),_:1},8,["tab"])]),_:1},8,["activeKey"]),R(i("div",null,[i("div",null,[i("div",je,[a(e(W),null,{default:s(()=>[a(e(N),{span:2},{default:s(()=>[i("div",{style:ge({width:"57px",height:"32px",lineHeight:"32px",textAlign:"center",color:"#2F54EB",background:"rgba(47,84,235,0.1)",borderRadius:"4px"})},d(e(t)("visual.construction.tip")),5)]),_:1}),a(e(N),{span:10},{default:s(()=>[i("div",Qe,d(e(t)("visual.construction.tipQuery")),1)]),_:1})]),_:1})])])],512),[[M,!1]]),i("div",$e,[a(e(Fe),{onRegister:e(J),beforeEditSubmit:X,onSelectionChange:o[7]||(o[7]=()=>{Q()})},{tableTitle:s(()=>[a(e(_e),{value:y.value,"onUpdate:value":o[3]||(o[3]=u=>y.value=u),allowClear:"",style:{width:"360px"},onPressEnter:o[4]||(o[4]=()=>{e(h)()}),onChange:o[5]||(o[5]=({type:u})=>{u=="click"&&e(h)()}),placeholder:e(t)("visual.construction.inputSearch")},{prefix:s(()=>[a(e(ye))]),_:1},8,["value","placeholder"])]),toolbar:s(()=>[i("div",Je,[a(r,{size:"middle",shape:"round",style:{background:"#fff",color:"#202020",border:"1px solid #666666",borderRadius:"4px",margin:"0px 10px 0px 10px"},onClick:o[6]||(o[6]=()=>{e(G)({onOk:()=>{ee()}})}),disabled:g.value==0},{default:s(()=>[I(d(e(t)("mom.deletes")),1)]),_:1},8,["disabled"])])]),action:s(({record:u})=>[a(D,{type:"link",onClick:()=>{Z(u)}},{default:s(()=>[I(d(e(t)("visual.construction.download")),1)]),_:2},1032,["onClick"]),a(D,{type:"link",onClick:()=>{e(G)({onOk:()=>{e(Me)({id:String(u.id)},()=>{e(h)(),e(V)()})}})}},{default:s(()=>[I(d(e(t)("visual.construction.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["onRegister"]),R(i("span",{style:{position:"absolute",bottom:"0px"}},d(e(t)("visual.construction.selectedFile"))+":"+d(g.value),513),[[M,b.value]]),R(i("div",Xe,[a(e(W),{style:{backgroundColor:""}},{default:s(()=>[a(e(N),{span:4,offset:10},{default:s(()=>[a(e(L),{onClick:o[8]||(o[8]=()=>{U()}),style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"}},{default:s(()=>[I(d(e(t)("visual.construction.next")),1)]),_:1})]),_:1})]),_:1})],512),[[M,b.value]])]),Ye])]),_:1})])]),_:1})]),_:1},8,["spinning"])])}}}));var Qt=ue(et,[["__scopeId","data-v-d15d3f34"]]);export{Qt as default};
