var x=(l,r,s)=>new Promise((h,p)=>{var m=a=>{try{c(s.next(a))}catch(i){p(i)}},v=a=>{try{c(s.throw(a))}catch(i){p(i)}},c=a=>a.done?h(a.value):Promise.resolve(a.value).then(m,v);c((s=s.apply(l,r)).next())});import{P as y}from"./index.8d0858e7.js";import{u as I,B as R}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as _,B as T}from"./index.c8f8ec06.js";import{cy as E,a as P,b as C,u as A,r as w,ch as F,q as b,o as B,c as D,i as n,A as g,j as t,I as L,d5 as M,d6 as O}from"./index.10ef4608.js";/* empty css              *//* empty css               *//* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */const k=l=>E.get({url:"/log/selectPageLog",params:l}),U=l=>E.get({url:"/log/selectOperator",params:l});const S=C({__name:"index",setup(l){const{t:r}=A(),s=new Date,h=new Date;s.setMonth(s.getMonth()-1),h.setMonth(h.getMonth()+1);const p=w(),m=w(),v=F.RangePicker,[c]=_(),[a,{reload:i}]=I({columns:[{title:r("system.operationLog.operType"),dataIndex:"action",width:150,format(e){return e=="AUTH"?"\u8BA4\u8BC1":e=="ADD"?"\u589E":e=="REMOVE"?"\u5220":e=="EDIT"?"\u6539":e=="QUERY"?"\u67E5":e=="IMPORT"?"\u5BFC\u5165":e=="REPORT"?"\u5BFC\u51FA":e=="UPLOAD"?"\u4E0A\u4F20":"\u8BEF\u64CD\u4F5C"},filters:[{text:"\u589E",value:"ADD"},{text:"\u5220",value:"REMOVE"},{text:"\u6539",value:"EDIT"},{text:"\u67E5",value:"QUERY"},{text:"\u5BFC\u5165",value:"IMPORT"},{text:"\u5BFC\u51FA",value:"REPORT"},{text:"\u4E0A\u4F20",value:"UPLOAD"}]},{title:r("system.operationLog.operAuthor"),dataIndex:"operator",width:150,filters:p},{title:r("system.operationLog.operContent"),dataIndex:"title",width:150},{title:r("system.operationLog.operTime"),dataIndex:"createTime",width:150},{title:r("system.operationLog.operStatus"),width:150,dataIndex:"state",filterMultiple:!0,filters:[{text:"\u5931\u8D25",value:"false"},{text:"\u6210\u529F",value:"true"},{text:"\u5168\u90E8",value:""}],format(e){return e==!1?"\u5931\u8D25":e==!0?"\u6210\u529F":"\u672A\u77E5"}},{title:r("system.operationLog.operAddress"),width:150,dataIndex:"address",filters:m},{title:r("system.operationLog.browser"),width:150,dataIndex:"browser",filters:m},{title:r("system.operationLog.type"),width:150,dataIndex:"system",filters:m},{title:r("system.operationLog.remark"),width:150,dataIndex:"describe"}],api:k,afterFetch:e=>e,useSearchForm:!0,formConfig:{showActionButtonGroup:!1,labelWidth:160,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"300px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}]},striped:!0,bordered:!0,clickToRowSelect:!1,isTreeTable:!1,showIndexColumn:!0,canResize:!0});return b(()=>x(this,null,function*(){const e=yield U();p.value=e,p.value.forEach((o,u)=>{o.text=o.operator,o.value=o.operator,o.key=u})})),(e,o)=>(B(),D("div",null,[n(t(y),{contentFullHeight:!0},{default:g(()=>[n(t(R),{onRegister:t(a)},{"form-input":g(({model:u,field:f})=>[n(t(L),{value:u[f],"onUpdate:value":d=>u[f]=d,onPressEnter:o[0]||(o[0]=()=>{t(i)()}),onChange:o[1]||(o[1]=({type:d})=>{d=="click"&&t(i)()}),placeholder:t(r)("system.operationLog.inputSearch"),allowClear:""},{prefix:g(()=>[n(t(M))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":g(({model:u,field:f})=>[n(t(v),{value:u[f],"onUpdate:value":d=>u[f]=d,onChange:o[2]||(o[2]=d=>t(i)()),separator:"-"},{suffixIcon:g(()=>[n(t(O))]),_:2},1032,["value","onUpdate:value"])]),_:1},8,["onRegister"]),n(t(T),{onRegister:t(c)},null,8,["onRegister"])]),_:1})]))}});var ge=P(S,[["__scopeId","data-v-17cdbe76"]]);export{ge as default};
