import{u as I,B as w}from"./index-b6b4562f.js";import{u as P,a as S}from"./useForm-f3f06b26.js";import"./index-1ec106fd.js";import{u as n}from"./useRender-3355e2aa.js";import{D as i,g as u}from"./dict-9afd743e.js";import{g as U}from"./index-be152e70.js";import{bD as s,a as p,H as M,u as o,o as T,c as O,w as R,e as x,ag as C}from"./index-4a8cc517.js";const H=[{title:"编号",dataIndex:"id",width:100},{title:"组名",dataIndex:"name",width:180},{title:"描述",dataIndex:"description",width:200},{title:"成员",dataIndex:"memberUserIds",width:180,customRender:({text:e})=>n.renderTags(e)},{title:"状态",dataIndex:"status",width:180,customRender:({text:e})=>n.renderDict(e,i.COMMON_STATUS)},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>n.renderDate(e)}],$=[{label:"组名",field:"name",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:u(i.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],F=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"组名",field:"name",required:!0,component:"Input"},{label:"描述",field:"description",required:!0,component:"Input"},{label:"成员",field:"memberUserIds",required:!0,component:"ApiSelect",componentProps:{api:()=>U(),labelField:"nickname",valueField:"id",mode:"multiple"},colProps:{span:8}},{label:"状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:u(i.COMMON_STATUS)}}];function G(e){return s.post({url:"/bpm/user-group/create",data:e})}function B(e){return s.put({url:"/bpm/user-group/update",data:e})}function E(e){return s.delete({url:"/bpm/user-group/delete?id="+e})}function D(e){return s.get({url:"/bpm/user-group/get?id="+e})}function W(e){return s.get({url:"/bpm/user-group/page",params:e})}const k=p({name:"BpmGroupModal"}),Y=p({...k,emits:["success","register"],setup(e,{emit:d}){const r=M(!0),[c,{setFieldsValue:m,resetFields:f,validate:g}]=P({labelWidth:120,baseColProps:{span:24},schemas:F,showActionButtonGroup:!1,actionColOptions:{span:23}}),[b,{setModalProps:a,closeModal:_}]=I(async t=>{if(f(),a({confirmLoading:!1}),r.value=!!t?.isUpdate,o(r)){const l=await D(t.record.id);m({...l})}});async function h(){try{const t=await g();a({confirmLoading:!0}),o(r)?await B(t):await G(t),_(),d("success")}finally{a({confirmLoading:!1})}}return(t,l)=>(T(),O(o(w),C(t.$attrs,{onRegister:o(b),title:r.value?"编辑":"新增",onOk:h}),{default:R(()=>[x(o(S),{onRegister:o(c)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Y as _,H as c,E as d,W as g,$ as s};
