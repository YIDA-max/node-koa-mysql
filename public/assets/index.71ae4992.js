var I=(T,a,s)=>new Promise((c,d)=>{var m=l=>{try{f(s.next(l))}catch(y){d(y)}},_=l=>{try{f(s.throw(l))}catch(y){d(y)}},f=l=>l.done?c(l.value):Promise.resolve(l.value).then(m,_);f((s=s.apply(T,a)).next())});import{P as q}from"./index.8d0858e7.js";import{a as A,b as S,u as V,cJ as F,r as C,ch as U,aG as z,q as N,x as R,o as u,c as W,i as n,A as r,j as t,cv as j,cl as G,I as X,d5 as H,d6 as J,U as k,D as x,t as h,f as g}from"./index.10ef4608.js";/* empty css               *//* empty css              *//* empty css               */import{u as $,B as K}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{q as L,a as Q,n as Y,b as Z,c as ee,r as te}from"./addOrEditOrViewModal.61eb91ef.js";import{u as oe}from"./useBatchDelete.9dc1ae07.js";import{u as ae}from"./index.c8f8ec06.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";const re=S({__name:"index",setup(T){const{t:a}=V(),{hasPermission:s}=F(),c=C(),d=C(),m=C(),[_,{openModal:f}]=ae(),l=(e,o={})=>{f(!0,{statusText:e,record:o})},y=U.RangePicker,[E,{setProps:P,reload:w}]=$({columns:[{title:a("sdp.aptmt.flowTwoType"),dataIndex:"type",width:150,filters:m},{title:a("sdp.aptmt.flowFristType"),dataIndex:"typeOne",width:150,filters:d},{title:a("sdp.aptmt.serial"),dataIndex:"id",fixed:"left",width:150},{title:a("sdp.aptmt.createAuthor"),width:150,dataIndex:"nickname"},{title:a("sdp.aptmt.updateTime"),width:200,sorter:!0,dataIndex:"updateTime"}],api:L,afterFetch:e=>e,useSearchForm:!0,searchInfo:{},formConfig:{labelWidth:120,showActionButtonGroup:!1,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"300px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:a("sdp.aptmt.operation"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:D,handleDeleteOrBatchDelete:B,selectionOptions:M}=oe(te,w,P);return z(()=>{P(M)}),N(()=>I(this,null,function*(){c.value=yield Q(),c.value.forEach((e,o)=>{e.label=e.type,e.text=e.type,e.value=e.code,e.key=o}),d.value=yield Y(),d.value.forEach((e,o)=>{e.label=e.type,e.text=e.type,e.value=e.code,e.key=o}),m.value=yield Z(),m.value.forEach((e,o)=>{e.label=e.type,e.text=e.type,e.value=e.type,e.key=o})})),(e,o)=>{const O=R("CustomButton"),b=R("a-button");return u(),W("div",null,[n(t(q),{contentFullHeight:!0},{default:r(()=>[n(t(j),null,{default:r(()=>[n(t(G),{span:24},{default:r(()=>[n(t(K),{onRegister:t(E)},{"form-input":r(({model:i,field:v})=>[n(t(X),{value:i[v],"onUpdate:value":p=>i[v]=p,allowClear:"",onPressEnter:o[0]||(o[0]=()=>{t(w)()}),onChange:o[1]||(o[1]=({type:p})=>{p=="click"&&t(w)()}),placeholder:t(a)("sdp.aptmt.inputSearch")},{prefix:r(()=>[n(t(H))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":r(({model:i,field:v})=>[n(t(y),{value:i[v],"onUpdate:value":p=>i[v]=p,onChange:o[2]||(o[2]=p=>t(w)()),separator:"-"},{suffixIcon:r(()=>[n(t(J))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:r(()=>[t(s)(["sdp:flow:two:add"])?(u(),k(O,{key:0,size:"middle",shape:"round",onClick:o[3]||(o[3]=()=>{l("add")}),style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"}},{default:r(()=>[x(h(t(a)("common.addText")),1)]),_:1})):g("v-if",!0),t(s)(["sdp:flow:two:del"])?(u(),k(O,{key:1,size:"middle",shape:"round",disabled:t(D),onClick:o[4]||(o[4]=()=>{t(B)(null)}),style:{background:"#fff",color:"#202020",border:"1px solid #666666",margin:"0px 10px",borderRadius:"4px"}},{default:r(()=>[x(h(t(a)("mom.deletes")),1)]),_:1},8,["disabled"])):g("v-if",!0)]),action:r(({record:i})=>[t(s)(["cm:main:view"])?(u(),k(b,{key:0,type:"link",onClick:()=>{l("view",i)}},{default:r(()=>[x(h(t(a)("cm.masterProject.lookto")),1)]),_:2},1032,["onClick"])):g("v-if",!0),t(s)(["cm:type:edit"])?(u(),k(b,{key:1,type:"link",onClick:()=>{l("edit",i)}},{default:r(()=>[x(h(t(a)("cm.type.edit")),1)]),_:2},1032,["onClick"])):g("v-if",!0),t(s)(["cm:type:del"])?(u(),k(b,{key:2,type:"link",onClick:()=>{t(B)(i)}},{default:r(()=>[x(h(t(a)("cm.type.delete")),1)]),_:2},1032,["onClick"])):g("v-if",!0)]),_:1},8,["onRegister"])]),_:1})]),_:1}),n(ee,{onRegister:t(_),leiXingCode:c.value,success:()=>{t(w)()}},null,8,["onRegister","leiXingCode","success"])]),_:1})])}}});var Ue=A(re,[["__scopeId","data-v-926c2706"]]);export{Ue as default};
