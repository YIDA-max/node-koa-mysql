var k=(d,p,i)=>new Promise((v,f)=>{var g=b=>{try{m(i.next(b))}catch(n){f(n)}},w=b=>{try{m(i.throw(b))}catch(n){f(n)}},m=b=>b.done?v(b.value):Promise.resolve(b.value).then(g,w);m((i=i.apply(d,p)).next())});import{u as H,B as $}from"./useForm.98d7b8ca.js";import{u as N,bm as V,a as W,b as X,r as x,s as J,l as K,ay as Q,q as Y,x as A,o as S,c as L,i as r,A as c,j as u,X as M,e as P,aL as D,D as _,t as F,ab as T,ao as Z,ap as ee,I,cl as le,cv as ae,p as te,k as oe}from"./index.10ef4608.js";/* empty css               */import{u as ne}from"./casual.c3003c80.js";import z from"./V3ColorPicker.3aeb3ea0.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./ColorPicker.3725ed80.js";import"./ColorPanel.209bf7d4.js";import"./draggable.354c5b1e.js";import"./ColorPreview.6aea0981.js";import"./ColorHue.94d928ef.js";import"./ColorAlpha.071f638e.js";import"./ColorValue.246a701d.js";import"./ColorList.125944a3.js";const{t:e}=N(),se=()=>{const d=[{field:"title",component:"Input",label:e("visual.construction.title"),colProps:{span:7,offset:0}},{field:"height",component:"Input",label:e("visual.construction.imgHeight"),rules:[{validator:(p,i)=>k(void 0,null,function*(){return isNaN(i)&&i?Promise.reject(e("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}]},{field:"width",component:"Input",label:e("visual.construction.imgWidth"),rules:[{validator:(p,i)=>k(void 0,null,function*(){return isNaN(i)&&i?Promise.reject(e("AllMessage.visual.two.PreferencesList.number")):!0}),validateTrigger:"blur"}]},{field:"scale",component:"Select",label:e("visual.construction.normalization"),defaultValue:"none",componentProps:{options:[{label:e("AllMessage.visual.two.PreferencesList.no"),value:"none",key:"none"},{label:e("AllMessage.visual.two.PreferencesList.row"),value:"row",key:"row"},{label:e("AllMessage.visual.two.PreferencesList.col"),value:"column",key:"column"}]},colProps:{span:7,offset:0}},{field:"hclust",component:"Select",label:e("visual.construction.cluster"),defaultValue:"none",componentProps:{options:[{label:e("AllMessage.visual.two.PreferencesList.row"),value:"row",key:"row"},{label:e("AllMessage.visual.two.PreferencesList.col"),value:"Column",key:"Column"},{label:e("AllMessage.visual.two.PreferencesList.rowAndcol"),value:"both",key:"both"},{label:"none",value:"none",key:"none"}]}},{field:"cellwidth",label:e("visual.construction.gridWidth"),component:"InputNumber",componentProps:{min:1,max:200,style:{width:"100%"}}},{field:"cellheight",component:"InputNumber",label:e("visual.construction.gridHeight"),componentProps:{min:1,max:200,style:{width:"100%"}},colProps:{span:7,offset:0}},{field:"display_numbers",component:"Select",label:e("visual.construction.isRawData"),defaultValue:"F",componentProps:{options:[{label:e("AllMessage.visual.two.PreferencesList.T"),value:"T",key:"T"},{label:e("AllMessage.visual.two.PreferencesList.F"),value:"F",key:"F"}]}},{field:"transform_fun",component:"Select",label:e("visual.construction.transfromFn"),componentProps:{options:[{label:"log",value:"log",key:"log"},{label:"sqrt",value:"sqrt",key:"sqrt"},{label:"normalize",value:"normalize",key:"normalize"},{label:"scale",value:"scale",key:"scale"},{label:"percentize",value:"percentize",key:"percentize"}]}},{field:"annotation_r",component:"Select",label:e("visual.construction.note"),slot:"annotationSelect",colProps:{span:7,offset:0}},{field:"col_chose",component:"Select",slot:"selectRowSelect",label:e("visual.construction.selectCol")},{field:"clustering_distance_rows",component:"Select",label:e("visual.construction.rowFn"),defaultValue:"euclidean",componentProps:{options:[{label:"euclidean",value:"euclidean",key:"euclidean"},{label:"maximum",value:"maximum",key:"maximum"},{label:"manhattan",value:"manhattan",key:"manhattan"},{label:"canberra",value:"canberra",key:"canberra"},{label:"binary",value:"binary",key:"binary"},{label:"minkowski",value:"minkowski",key:"minkowski"}]}},{field:"clustering_distance_cols",component:"Select",label:e("visual.construction.colFn"),defaultValue:"euclidean",componentProps:{options:[{label:"euclidean",value:"euclidean",key:"euclidean"},{label:"maximum",value:"maximum",key:"maximum"},{label:"manhattan",value:"manhattan",key:"manhattan"},{label:"canberra",value:"canberra",key:"canberra"},{label:"binary",value:"binary",key:"binary"},{label:"minkowski",value:"minkowski",key:"minkowski"}]},colProps:{span:7,offset:0}},{field:"clustering_method",component:"Select",label:e("visual.construction.fn"),defaultValue:"complete",componentProps:{options:[{label:"ward",value:"ward",key:"ward"},{label:"ward.D",value:"ward.D",key:"ward.D"},{label:"ward.D2",value:"ward.D2",key:"ward.D2"},{label:"single",value:"single",key:"single"},{label:"complete",value:"complete",key:"complete"},{label:"average",value:"average",key:"average"},{label:"mcquitty",value:"mcquitty",key:"mcquitty"},{label:"median",value:"median",key:"median"},{label:"centroid",value:"centroid",key:"centroid"}]}},{field:"show_rownames",component:"Select",label:e("AllMessage.visual.two.PreferencesList.isShowRow"),defaultValue:"T",componentProps:{options:[{label:e("AllMessage.visual.two.PreferencesList.T"),value:"T",key:"T"},{label:e("AllMessage.visual.two.PreferencesList.F"),value:"F",key:"F"}]}},{field:"show_colnames",component:"Select",label:e("AllMessage.visual.two.PreferencesList.isShowCol"),defaultValue:"T",componentProps:{options:[{label:e("AllMessage.visual.two.PreferencesList.T"),value:"T",key:"T"},{label:e("AllMessage.visual.two.PreferencesList.F"),value:"F",key:"F"}]},colProps:{span:7,offset:0}},{field:"fontsize",component:"InputNumber",label:e("visual.construction.type"),defaultValue:"10",componentProps:{min:1,max:100,style:{width:"100%"}}},{field:"angle_col",component:"Select",label:e("AllMessage.visual.two.PreferencesList.angle_col"),defaultValue:90,componentProps:{options:[{label:0,value:0,key:0},{label:45,value:45,key:45},{label:90,value:90,key:90},{label:270,value:270,key:270},{label:315,value:315,key:315}]}},{field:"color",component:"Select",label:V("div",{style:"position: relative;top: 15px;"},[V("div",{},e("AllMessage.visual.two.PreferencesList.color"))]),slot:"color",colProps:{span:7,offset:0}},{field:"addButton",component:"Input",slot:"addButton",label:" ",colProps:{span:22,offset:0}},{field:"addButtonValue",component:"Input",slot:"addButtonValue",label:" ",colProps:{span:22,offset:0}}];return d.forEach(p=>{p.component=="Select"&&(p.componentProps||(p.componentProps={}),p.componentProps.size="large")}),d};const B=d=>(te("data-v-39e885c4"),d=d(),oe(),d),ie={style:{minHeight:"400px"}},re={style:{position:"relative",top:"0px",margin:"0px 0px 0px 0px"}},ue=B(()=>P("span",{style:{width:"10px",height:"10px",backgroundColor:"#0000FF",display:"inline-block",margin:"0px 2px 0px 0px"}},null,-1)),ce=B(()=>P("span",{style:{width:"10px",height:"10px",backgroundColor:"#FF0001",display:"inline-block",margin:"0px 2px 0px 0px"}},null,-1)),pe={style:{position:"relative",top:"0px",margin:"0px 0px 0px 0px"}},de={style:{position:"relative",top:"5px"}},ve=_(" \xA0 "),me=X({__name:"heatMap",props:{toNextFn:Function},setup(d,{expose:p}){const{t:i}=N(),v=ne(),f=x(),g=x(),w=x("1"),m=x(["#0000FF","#FF0000"]),b=J({display:"inline-block",height:"40px",lineHeight:"40px"}),n=x([]),U=K(()=>{const s=`%23${m.value[0].slice(1)}`,a=`%23${m.value[1].slice(1)}`;return`${s},${a}`}),[R,{validate:j,getFieldsValue:q,resetFields:E}]=H({labelWidth:115,schemas:se(),baseColProps:{span:7,offset:1},actionColOptions:{span:18,offset:4},showActionButtonGroup:!1}),G=()=>k(this,null,function*(){return{validate:yield j(),colorArr:w.value=="1"?"%230000FF,%23FF0001":U.value}}),O=()=>k(this,null,function*(){if(n.value.length==0){n.value=[];const{col_chose:s}=yield q();if(s)s.forEach(a=>{const y={key:new Date().getTime(),data:{oneData:a,twoData:""}};n.value.push(y)});else{const a=[...v.useVisualConstructionTwohander],y=[...v.useVisualConstructionTwobody];a.map(h=>{if(!isNaN(y[0][h.dataIndex])){const t={key:new Date().getTime(),data:{oneData:h.title,twoData:""}};n.value.push(t)}}),n.value.shift()}}else n.value=[]});return Q(()=>v.useVisualConstructionTwohander,()=>{E(),f.value=[...v.useVisualConstructionTwohander],f.value.forEach(s=>{s.label=s.title,s.value=s.title}),g.value=[...v.useVisualConstructionTwohander],g.value.forEach(s=>{s.label=s.title,s.value=s.title}),n.value=[]}),Y(()=>{const s=setInterval(()=>{v.useVisualConstructionTwohander&&(f.value=[...v.useVisualConstructionTwohander],f.value.forEach(a=>{a.label=a.title,a.value=a.title}),g.value=[...v.useVisualConstructionTwohander],g.value.forEach(a=>{a.label=a.title,a.value=a.title}),n.value=[],clearInterval(s))},1e3)}),p({returnedValue:G,controlGroup:n}),(s,a)=>{const y=A("a-radio"),h=A("a-radio-group");return S(),L("div",ie,[r(u($),{onRegister:u(R)},{annotationSelect:c(({model:t,field:l})=>[r(u(M),{options:f.value,value:t[l],"onUpdate:value":o=>t[l]=o,mode:"multiple",allowClear:"",showSearch:"",size:"large","filter-option":(o,C)=>C.label.toLowerCase().indexOf(o.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),selectRowSelect:c(({model:t,field:l})=>[r(u(M),{options:f.value,mode:"multiple",value:t[l],"onUpdate:value":o=>t[l]=o,allowClear:"",showSearch:"",size:"large","filter-option":(o,C)=>C.label.toLowerCase().indexOf(o.toLowerCase())>=0},null,8,["options","value","onUpdate:value","filter-option"])]),color:c(()=>[P("div",re,[r(h,{value:w.value,"onUpdate:value":a[0]||(a[0]=t=>w.value=t),name:"radioGroup",style:{display:"flex"}},{default:c(()=>[r(y,{style:D(b),value:"1"},{default:c(()=>[_(F(u(i)("AllMessage.visual.two.PreferencesList.default"))+" : ",1),ue,ce]),_:1},8,["style"])]),_:1},8,["value"])]),P("div",pe,[r(h,{value:w.value,"onUpdate:value":a[1]||(a[1]=t=>w.value=t),name:"radioGroup"},{default:c(()=>[r(y,{value:"2"},{default:c(()=>[_(F(u(i)("AllMessage.visual.two.PreferencesList.CustomLowHigh"))+":",1)]),_:1})]),_:1},8,["value"]),P("span",de,[r(z,{value:m.value[0],"onUpdate:value":a[2]||(a[2]=t=>m.value[0]=t),size:"mini",theme:"light",width:400},null,8,["value"]),r(z,{value:m.value[1],"onUpdate:value":a[3]||(a[3]=t=>m.value[1]=t),size:"mini",theme:"light",width:400},null,8,["value"])])])]),addButton:c(()=>[r(u(T),{size:"middle",style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"},onClick:a[4]||(a[4]=()=>{O()})},{default:c(()=>[_(F(u(i)("AllMessage.visual.two.PreferencesList.ColumnGroupingInfo")),1)]),_:1})]),addButtonValue:c(()=>[(S(!0),L(Z,null,ee(n.value,t=>(S(),L("div",{key:t.data.oneData,style:{width:"100%",margin:"0px 0px 10px 0px"}},[r(u(I),{value:t.data.oneData,"onUpdate:value":l=>t.data.oneData=l,disabled:!0,style:D({width:`${(n.value.map(l=>l.data.oneData).reduce((l,o)=>l>o.length?l:o.length,0)*20!==0?n.value.map(l=>l.data.oneData).reduce((l,o)=>l>o.length?l:o.length,0)*20:100)<100?100:n.value.map(l=>l.data.oneData).reduce((l,o)=>l>o.length?l:o.length,0)*20!==0?n.value.map(l=>l.data.oneData).reduce((l,o)=>l>o.length?l:o.length,0)*20:100}px`})},null,8,["value","onUpdate:value","style"]),ve,r(u(I),{value:t.data.twoData,"onUpdate:value":l=>t.data.twoData=l,style:{width:"100px"}},null,8,["value","onUpdate:value"])]))),128))]),_:1},8,["onRegister"]),r(u(ae),null,{default:c(()=>[r(u(le),{span:4,offset:11},{default:c(()=>[r(u(T),{size:"middle",style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"},onClick:a[5]||(a[5]=()=>{d.toNextFn()})},{default:c(()=>[_(F(u(i)("visual.construction.next")),1)]),_:1})]),_:1})]),_:1})])}}});var We=W(me,[["__scopeId","data-v-39e885c4"]]);export{We as default};
