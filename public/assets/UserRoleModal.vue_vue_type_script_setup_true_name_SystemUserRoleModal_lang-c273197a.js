import{u as p,B as g}from"./index-b6b4562f.js";import{u as _,a as R}from"./useForm-f3f06b26.js";import{a as h}from"./user.data-08338f1b.js";import{a as w}from"./index-be152e70.js";import{a as I,b as M}from"./index-50aba5b9.js";import{a as r,o as y,c as B,w as F,e as b,u as e,ag as C}from"./index-4a8cc517.js";const U=r({name:"SystemUserRoleModal"}),V=r({...U,emits:["success","register"],setup(k,{emit:t}){const[i,{setFieldsValue:n,resetFields:l,validate:c}]=_({labelWidth:120,baseColProps:{span:24},schemas:h,showActionButtonGroup:!1,actionColOptions:{span:23}}),[m,{setModalProps:o,closeModal:d}]=p(async s=>{l(),o({confirmLoading:!1});const a=await w(s.record.id),f=await I(s.record.id);a.roleIds=f,n({...a})});async function u(){try{const s=await c();o({confirmLoading:!0}),await M({userId:s.id,roleIds:s.roleIds}),d(),t("success")}finally{o({confirmLoading:!1})}}return(s,a)=>(y(),B(e(g),C(s.$attrs,{onRegister:e(m),title:"用户角色权限",onOk:u}),{default:F(()=>[b(e(R),{onRegister:e(i)},null,8,["onRegister"])]),_:1},16,["onRegister"]))}});export{V as _};
