var x=(g,t,l)=>new Promise((y,f)=>{var m=s=>{try{c(l.next(s))}catch(u){f(u)}},r=s=>{try{c(l.throw(s))}catch(u){f(u)}},c=s=>s.done?y(s.value):Promise.resolve(s.value).then(m,r);c((l=l.apply(g,t)).next())});import{u as T,B}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{a as F,b as A,u as E,dA as R,aG as M,l as $,x as I,o as N,c as O,f as C,i as a,A as i,j as e,dB as V,d3 as S,D as _,t as b,ce as z,dC as G,dD as j,G as K}from"./index.10ef4608.js";import{u as L}from"./index.8dc2742f.js";import"./useForm.98d7b8ca.js";/* empty css                */import{c as P,_ as q}from"./MenuDrawer.ba138833.js";import{u as H}from"./useBatchDelete.9dc1ae07.js";/* empty css               */import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";/* empty css               *//* empty css              *//* empty css               */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useAttrs.1d381a3e.js";import"./useModalContext.52c86736.js";/* empty css               */import"./useSortable.79752a2a.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css               */import"./index.b6ac86eb.js";/* empty css                *//* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";const J={class:"p-4"},Q=A({__name:"index",setup(g){const{t}=E(),[l,{openDrawer:y}]=L(),[f,{reload:m,setProps:r,setSelectedRowKeys:c}]=T({api:R,clickToRowSelect:!1,columns:P,isTreeTable:!0,pagination:!1,striped:!1,showTableSetting:!1,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:220,title:t("system.menu.operation"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:s,handleDeleteOrBatchDelete:u,selectionOptions:w}=H(j,m,r);M(()=>{r(w)});function h(d,n){y(!0,{record:n,isUpdate:d})}const v=(D,o)=>x(this,[D,o],function*(d,{id:n}){r({loading:!0}),c([]);const{createMessage:p}=K();try{yield G({id:n,enable:d}),p.success(`${t(d?"system.menu.enabledSuccessfully":"system.menu.disabeSucceeded")}`)}finally{r({loading:!1}),m()}}),k=$(()=>({background:"#fff",color:"#202020",border:"1px solid #666666"}));return(d,n)=>{const D=I("a-button");return N(),O("div",J,[C(' @fetch-success="nextTick(expandAll)" '),a(e(B),{onRegister:e(f)},{tableTitle:i(()=>[a(e(V),{size:"middle"},{default:i(()=>[a(S,{onClick:n[0]||(n[0]=o=>h(!1)),btnStyle:e(k)},{default:i(()=>[_(b(e(t)("system.menu.addMenu")),1)]),_:1},8,["btnStyle"]),C(" \u9700\u6C42\uFF1A\u4E0D\u663E\u793A\u7ED9\u7528\u6237\u64CD\u4F5C "),a(S,{onClick:n[1]||(n[1]=o=>e(u)(null)),disabled:e(s),btnStyle:e(k)},{default:i(()=>[_(b(e(t)("system.menu.deleteAll")),1)]),_:1},8,["disabled","btnStyle"])]),_:1})]),status:i(({record:o})=>[a(e(z),{checked:o.enable===!0,loading:o.pendingStatus,checkedChildren:e(t)("system.menu.enable"),unCheckedChildren:e(t)("system.menu.disable"),onChange:p=>v(p,o)},null,8,["checked","loading","checkedChildren","unCheckedChildren","onChange"])]),action:i(({record:o})=>[a(D,{onClick:p=>h(!0,o),type:"link"},{default:i(()=>[_(b(e(t)("system.menu.edit")),1)]),_:2},1032,["onClick"]),C(" \u9700\u6C42\uFF1A\u4E0D\u663E\u793A\u7ED9\u7528\u6237\u64CD\u4F5C "),a(D,{onClick:p=>e(u)(o),type:"link"},{default:i(()=>[_(b(e(t)("system.menu.delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["onRegister"]),C(" \u5F39\u51FA\u62BD\u5C49\u7EC4\u4EF6 "),a(q,{onRegister:e(l),onSuccess:e(m)},null,8,["onRegister","onSuccess"])])}}});var Re=F(Q,[["__scopeId","data-v-163bade5"]]);export{Re as default};
