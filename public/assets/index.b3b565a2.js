var F=(C,p,r)=>new Promise((d,i)=>{var m=l=>{try{u(r.next(l))}catch(c){i(c)}},b=l=>{try{u(r.throw(l))}catch(c){i(c)}},u=l=>l.done?d(l.value):Promise.resolve(l.value).then(m,b);u((r=r.apply(C,p)).next())});import{u as w,B as x}from"./useForm.98d7b8ca.js";import{b as Y,r as E,aG as V,q as z,o as W,c as q,i as a,A as n,j as e,cl as G,ab as D,cv as L,cS as _,D as g}from"./index.10ef4608.js";/* empty css               */import{u as Q,B as U}from"./useTable.a143d40c.js";import{T as J}from"./TableAction.edf9a202.js";import{u as K}from"./useBatchDelete.9dc1ae07.js";import{u as j,B as A}from"./index.c8f8ec06.js";import{a as X,c as Z,d as ee,R as te,b as oe}from"./record.74637501.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";const se=()=>[{title:"\u7F16\u53F7",dataIndex:"id",fixed:"left",width:50},{title:"\u4E3B\u9879\u76EE",dataIndex:"projectName",width:150},{title:"\u521B\u5EFA\u4EBA",width:150,sorter:!0,dataIndex:"nickname"},{title:"\u521B\u5EFA\u65F6\u95F4",width:150,sorter:!0,dataIndex:"createTime"}],ae=g("\u65B0\u589E"),ne=g("\u5220\u9664"),re=g("\u8BF7\u586B\u5199\u9879\u76EE\u4FE1\u606F"),le=g("\u4FEE\u6539\u6570\u636E"),Ve=Y({__name:"index",setup(C){let p=E([]);const r=E(),d=new Date,i=new Date;d.setMonth(d.getMonth()-1),i.setMonth(i.getMonth()+1);const m=(t,o)=>{if(t){const s=new Date(t),h={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(const f in h)new RegExp("("+f+")").test(o)&&(o=o.replace(RegExp.$1,RegExp.$1.length===1?h[f]:("00"+h[f]).substr((""+h[f]).length)));return o}else return""};E([m(d,"yyyy-MM-dd HH:mm:ss"),m(i,"yyyy-MM-dd HH:mm:ss")]);const[b,{openModal:u}]=j(),[l,{openModal:c}]=j(),[y,{resetFields:T}]=w({labelWidth:100,schemas:[{field:"projectName",component:"Input",label:"\u4E3B\u9879\u76EE\u540D\u79F0",colProps:{span:24}},{field:"projectDescribe",component:"InputTextArea",label:"\u63CF\u8FF0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",rows:8},colProps:{span:24}}],submitButtonOptions:{text:"\u786E\u8BA4"},actionColOptions:{offset:14,span:10}}),[k,{resetFields:P,setFieldsValue:I}]=w({labelWidth:100,schemas:[{field:"projectName",component:"Input",label:"\u4E3B\u9879\u76EE\u540D\u79F0",colProps:{span:24}},{field:"projectDescribe",component:"InputTextArea",label:"\u63CF\u8FF0",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",rows:8},colProps:{span:24}}],submitButtonOptions:{text:"\u786E\u8BA4"},actionColOptions:{offset:14,span:10}}),N=t=>F(this,null,function*(){console.log(t),Z({projectName:`${t.projectName}`,projectDescribe:`${t.projectDescribe}`}),T(),setTimeout(()=>{B()},200),u(!1)}),S=t=>F(this,null,function*(){ee({id:r.value.id,projectName:`${t.projectName}`,projectDescribe:`${t.projectDescribe}`}),P(),setTimeout(()=>{B()},200),c(!1)}),[H,{setProps:R,reload:B}]=Q({columns:se(),api:te,afterFetch:t=>t,useSearchForm:!0,searchInfo:{},formConfig:{labelWidth:120,schemas:[{field:"times",component:"RangePicker",label:"\u521B\u5EFA\u65E5\u671F",colProps:{span:6},componentProps:{format:"YYYY-MM-DD HH:mm:ss",placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],showTime:{format:"HH:mm:ss"}}},{field:"nickname",component:"Select",label:"\u521B\u5EFA\u4EBA",colProps:{span:5},componentProps:{options:p}},{field:"keyword",component:"Input",label:"\u5173\u952E\u5B57",colProps:{span:5}}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:"\u64CD\u4F5C",slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:O,handleDeleteOrBatchDelete:M,selectionOptions:$}=K(oe,B,R),v=t=>{c(),r.value=t;const o={projectName:"",projectDescribe:""};o.projectName=r.value.projectName,o.projectDescribe=r.value.projectDescribe,console.log(o),new Promise(s=>{s(1)}).then(()=>{I(o)})};return V(()=>{R($)}),z(()=>F(this,null,function*(){p.value=yield X(),p.value.forEach((t,o)=>{t.label=t.createBy,t.value=t.createBy,t.key=o})})),(t,o)=>(W(),q("div",null,[a(e(L),null,{default:n(()=>[a(e(G),{span:24},{default:n(()=>[a(e(U),{onRegister:e(H)},{toolbar:n(()=>[a(e(D),{size:"middle",shape:"round",onClick:o[0]||(o[0]=()=>{e(u)()})},{default:n(()=>[ae]),_:1}),a(e(D),{size:"middle",shape:"round",disabled:e(O),onClick:o[1]||(o[1]=s=>e(M)(null))},{default:n(()=>[ne]),_:1},8,["disabled"])]),action:n(({record:s})=>[a(e(J),{actions:[{label:"\u5220\u9664",icon:"ic:outline-delete-outline",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:()=>e(M)(s)}},{label:"\u4FEE\u6539",icon:"ic:outline-delete-outline",onClick:()=>{v(s)}}]},null,8,["actions"])]),_:1},8,["onRegister"])]),_:1})]),_:1}),a(e(A),{onRegister:e(b),showCancelBtn:!1,showOkBtn:!1},{default:n(()=>[a(e(_),{canExpan:!1},{title:n(()=>[re]),default:n(()=>[a(e(x),{onRegister:e(y),onSubmit:N},null,8,["onRegister"])]),_:1})]),_:1},8,["onRegister"]),a(e(A),{onRegister:e(l),showCancelBtn:!1,showOkBtn:!1},{default:n(()=>[a(e(_),{canExpan:!1},{title:n(()=>[le]),default:n(()=>[a(e(x),{onRegister:e(k),onSubmit:S},null,8,["onRegister"])]),_:1})]),_:1},8,["onRegister"])]))}});export{Ve as default};
