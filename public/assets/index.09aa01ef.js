import{P}from"./index.8d0858e7.js";import{u as D,B as S}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as L}from"./index.c8f8ec06.js";import{a as R,b as h,u as M,r as V,ch as $,cJ as q,q as U,aG as j,x as w,o as d,U as p,A as a,i as s,j as e,I as N,d5 as G,d6 as H,D as x,t as _,f as m,dc as J}from"./index.10ef4608.js";import{c as Q,u as W,E as z}from"./EditOrAddOrViewModal.ddefd893.js";/* empty css              *//* empty css               */import{q as K,a as X,b as Y,r as Z}from"./index.57ae27c7.js";import{g as I}from"./index.f32f4dcd.js";import{u as ee}from"./useBatchDelete.9dc1ae07.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.968d275e.js";/* empty css               */import"./homePage.545183cd.js";import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";const te=h({__name:"index",setup(oe){const{t:r}=M(),c=V({absolute:!1,loading:!1,tip:"\u52A0\u8F7D\u4E2D..."}),B=$.RangePicker,{hasPermission:f}=q(),[T,{reload:v,setProps:C,setColumns:F}]=D({api:K,searchInfo:{identification:r("sdp.afcic.tempIndex")},useSearchForm:!0,formConfig:{schemas:Q,showActionButtonGroup:!1},showIndexColumn:!1,rowSelection:{type:"checkbox"},actionColumn:{width:200,title:r("sdp.afcic.operation"),slots:{customRender:"action"},fixed:"right"},filterFn(o){var i,n;return Reflect.set(o,"oneLevel",(i=o==null?void 0:o.oneLevel)==null?void 0:i.join()),Reflect.set(o,"twoLevel",(n=o==null?void 0:o.twoLevel)==null?void 0:n.join()),o}}),[O,{openModal:y}]=L();U(()=>{Promise.all([X({identification:r("sdp.afcic.tempIndex")}),Y({identification:r("sdp.afcic.tempIndex")})]).then(([o,i])=>{const n=o.map(t=>({text:t.type,value:t.code})),g=i.map(t=>({text:t.type,value:t.type}));F(W({oneFilter:n,twoFilter:g}))})});const{hasBatchDelete:E,handleDeleteOrBatchDelete:b,selectionOptions:A}=ee(Z,v,C);j(()=>{C(A)});function k(o,i={}){["view","edit"].includes(o)?(c.value.loading=!0,I(i.id).then(n=>{y(!0,{statusPayload:o,record:n})}).catch(n=>{console.error(n)}).finally(()=>{c.value.loading=!1})):y(!0,{statusPayload:o,record:i})}return(o,i)=>{const n=w("CustomButton"),g=w("a-button");return d(),p(e(P),null,{default:a(()=>[s(e(S),{onRegister:e(T)},{"form-input":a(({model:t,field:l})=>[s(e(N),{value:t[l],"onUpdate:value":u=>t[l]=u,allowClear:"",placeholder:e(r)("sdp.afcic.inputSearch"),onPressEnter:e(v),onChange:i[0]||(i[0]=({type:u})=>{u=="click"&&e(v)()})},{prefix:a(()=>[s(e(G))]),_:2},1032,["value","onUpdate:value","placeholder","onPressEnter"])]),"form-createTime":a(({model:t,field:l})=>[s(e(B),{value:t[l],"onUpdate:value":u=>t[l]=u,onChange:i[1]||(i[1]=u=>e(v)()),separator:"-"},{suffixIcon:a(()=>[s(e(H))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:a(()=>[e(f)(["sdp:flow:card:add"])?(d(),p(n,{key:0,btnStyle:{backgroundColor:"#2F54EB",color:"#fff"},onClick:i[2]||(i[2]=t=>k("add"))},{default:a(()=>[x(_(e(r)("common.addText")),1)]),_:1})):m("v-if",!0),e(f)(["sdp:flow:card:del"])?(d(),p(n,{key:1,btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",color:"#000",marginLeft:"10px"},disabled:e(E),onClick:i[3]||(i[3]=t=>e(b)(null))},{default:a(()=>[x(_(e(r)("mom.deletes")),1)]),_:1},8,["btnStyle","disabled"])):m("v-if",!0)]),action:a(({record:t})=>[e(f)(["sdp:flow:card:view"])?(d(),p(g,{key:0,type:"link",onClick:l=>k("view",t)},{default:a(()=>[x(_(e(r)("common.viewText")),1)]),_:2},1032,["onClick"])):m("v-if",!0),e(f)(["sdp:flow:card:edit"])?(d(),p(g,{key:1,type:"link",onClick:l=>k("edit",t)},{default:a(()=>[x(_(e(r)("common.editText")),1)]),_:2},1032,["onClick"])):m("v-if",!0),e(f)(["sdp:flow:card:del"])?(d(),p(g,{key:2,type:"link",onClick:l=>e(b)(t)},{default:a(()=>[x(_(e(r)("common.delText")),1)]),_:2},1032,["onClick"])):m("v-if",!0)]),_:1},8,["onRegister"]),s(z,{onRegister:e(O),onSuccess:e(v)},null,8,["onRegister","onSuccess"]),m(" \u67E5\u770B\u6216\u7F16\u8F91\u7684\u65F6\u5019\u9700\u8981loading \u56E0\u4E3A\u6570\u636E\u53EF\u80FD\u4F1A\u5F88\u5927 \u9020\u6210\u591A\u6B21\u70B9\u51FB "),s(e(J),{loading:c.value.loading,absolute:c.value.absolute,tip:c.value.tip},null,8,["loading","absolute","tip"])]),_:1})}}});var je=R(te,[["__scopeId","data-v-ee7caaf4"]]);export{je as default};
