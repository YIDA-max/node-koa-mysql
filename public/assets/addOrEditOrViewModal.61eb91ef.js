var m=(s,f,e)=>new Promise((d,r)=>{var b=l=>{try{g(e.next(l))}catch(v){r(v)}},y=l=>{try{g(e.throw(l))}catch(v){r(v)}},g=l=>l.done?d(l.value):Promise.resolve(l.value).then(b,y);g((e=e.apply(s,f)).next())});import{b as $,B as N}from"./index.c8f8ec06.js";import{u as U,B as X}from"./useForm.98d7b8ca.js";import{cy as p,a as G,b as z,u as H,r as C,l as L,j as t,aT as S,x as W,o as E,U as I,A as P,e as x,i as M,D as V,t as D,f as J,X as K,B as Q,G as Y}from"./index.10ef4608.js";const ie=s=>p.get({url:"/gaAnalysisProcessType/queryByPageTwo",params:s}),pe=s=>p.post({url:"/gaAnalysisProcessType/removeBatch",data:s}),Z=s=>p.post({url:"/gaAnalysisProcessType/addTwo",data:s}),ce=s=>p.get({url:"/gaAnalysisProcessType/queryByPageOne",params:s}),q=s=>p.get({url:"/gaAnalysisProcessType/queryByType",params:s}),ee=s=>p.put({url:"/gaAnalysisProcessType/edit",data:s}),de=s=>p.get({url:"/multiomicsManagementSelect/queryByPageOne",params:s}),ye=s=>p.get({url:"/multiomicsManagementSelect/queryByPageTwo",params:s});const se={style:{position:"relative",top:"50px"}},te={class:"flex justify-end"},ae=z({__name:"addOrEditOrViewModal",props:{success:{type:Function,required:!0},leiXingCode:{type:Array,required:!0}},setup(s){const f=s,{t:e}=H(),{createMessage:d}=Y(),r=C("add"),b=L(()=>t(r)==="add"?e("AllMessage.cmAdd"):t(r)==="edit"?e("AllMessage.cmEdit"):e("AllMessage.cmView")),y=C(),[g,{closeModal:l}]=$(u=>m(this,[u],function*({statusText:n,record:a}){B(),r.value=n,y.value=a,n=="edit"?setTimeout(()=>{new Promise(o=>{_([{field:"typeOne",component:"Input",label:e("sdp.aptm.fristClass"),slot:"typeOne",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4E00\u7EA7"}],colProps:{span:24}},{field:"type",component:"Input",label:e("sdp.afcic.twoType"),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E"}],componentProps:({formActionType:i,formModel:w})=>({onBlur:S(()=>m(this,null,function*(){try{const{updateSchema:c,validate:T}=i,F={level:"2",status:!1,types:w.type,type:y.value.type},h=yield q(F);yield c({field:"type",rules:[{validator:()=>h?Promise.resolve():Promise.reject("\u5DF2\u5B58\u5728"),required:!0}]}),yield T(["type"])}catch(c){console.error(c)}}),100)}),colProps:{span:24}}]),o("edit")}).then(()=>{A({type:a.type,typeOne:a.code}),O({disabled:!1})})},300):n=="view"?setTimeout(()=>{new Promise(o=>{_([{field:"typeOne",component:"Input",label:e("sdp.aptm.fristClass"),slot:"typeOne",colProps:{span:24}},{field:"type",component:"Input",label:e("sdp.afcic.twoType"),rules:[],colProps:{span:24}}]),o("view")}).then(()=>{A({type:a.type,typeOne:a.code}),O({disabled:!0})})},300):n=="add"&&setTimeout(()=>{new Promise(o=>{_([{field:"typeOne",component:"Input",label:e("sdp.aptm.fristClass"),slot:"typeOne",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E73\u53F0"}],colProps:{span:24}},{field:"type",component:"Input",label:e("sdp.afcic.twoType"),rules:[{required:!0,message:e("sdp.afcic.placeInputTwoType")}],componentProps:({formActionType:i,formModel:w})=>({onBlur:S(()=>m(this,null,function*(){try{const{updateSchema:c,validate:T}=i,F={level:"2",status:!0,types:w.type,type:null},h=yield q(F);yield c({field:"type",rules:[{validator:()=>h?Promise.resolve():Promise.reject("\u5DF2\u5B58\u5728"),required:!0}]}),yield T(["type"])}catch(c){console.error(c)}}),100)}),colProps:{span:24}}]),o("add")}).then(()=>{O({disabled:!1})})},300)})),[v,{resetFields:B,getFieldsValue:k,setFieldsValue:A,validate:R,updateSchema:_,setProps:O}]=U({showActionButtonGroup:!1,labelWidth:80,disabled:!1,schemas:[{field:"typeOne",component:"Select",label:e("sdp.aptm.fristClass"),slot:"typeOne",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E73\u53F0"}],colProps:{span:24}},{field:"type",component:"Input",label:e("sdp.afcic.twoType"),rules:[{required:!0,message:e("sdp.afcic.placeInputTwoType")},{validator:(n,a)=>m(this,null,function*(){return new Promise((u,o)=>{q({level:"2",status:!0,types:a,type:null}).then(i=>{i?u():o("\u5DF2\u5B58\u5728")}).catch(()=>{o("\u5DF2\u5B58\u5728")})})}),validateTrigger:"blur"}],colProps:{span:24}}]}),j=()=>m(this,null,function*(){try{if(!(yield R()))return;const a=k();if(t(r)==="add"){const u=yield Z({code:`${a.typeOne}`,type:`${a.type}`});u.code===200?d.success(e("AllMessage.successAdd")):d.error(u.msg),f.success()}else if(t(r)==="edit"){a.id=y.value.id;const u=yield ee({id:y.value.id,code:a.typeOne,type:`${a.type}`});u.code===200?d.success(e("AllMessage.successEdit")):d.error(u.msg),f.success()}l(),B()}catch(n){console.error(n)}finally{}});return(n,a)=>{const u=W("CustomButton");return E(),I(t(N),Q(n.$attrs,{onRegister:t(g),title:t(b)}),{footer:P(()=>[x("div",te,[M(u,{btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",padding:"0px 20px",color:"#000",marginLeft:"10px"},onClick:a[0]||(a[0]=()=>{t(B)(),r.value=="view"?function(){t(l)()}():function(){t(B)()}()})},{default:P(()=>[V(D(r.value=="view"?t(e)("AllMessage.cancel"):t(e)("AllMessage.reset")),1)]),_:1},8,["btnStyle"]),r.value!=="view"?(E(),I(u,{key:0,btnStyle:{backgroundColor:"#2F54EB",padding:"0px 20px",color:"#fff"},onClick:j},{default:P(()=>[V(D(t(e)("AllMessage.confirm")),1)]),_:1})):J("v-if",!0)])]),default:P(()=>[x("div",se,[M(t(X),{onRegister:t(v),ref:"basicForm"},{typeOne:P(({model:o,field:i})=>[M(t(K),{ref:"select",value:o[i],"onUpdate:value":w=>o[i]=w,allowClear:"",options:f.leiXingCode,disabled:r.value=="view",placeholder:t(e)("AllMessage.pleaseEnter")},null,8,["value","onUpdate:value","options","disabled","placeholder"])]),_:1},8,["onRegister"])])]),_:1},16,["onRegister","title"])}}});var re=G(ae,[["__scopeId","data-v-10ad8d2e"]]),me=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"}));export{ce as a,ye as b,re as c,me as d,de as n,ie as q,pe as r};
