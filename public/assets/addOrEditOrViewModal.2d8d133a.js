var Q=Object.defineProperty;var T=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var E=(s,t,e)=>t in s?Q(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,C=(s,t)=>{for(var e in t||(t={}))$.call(t,e)&&E(s,e,t[e]);if(T)for(var e of T(t))z.call(t,e)&&E(s,e,t[e]);return s};var m=(s,t,e)=>new Promise((d,r)=>{var w=u=>{try{g(e.next(u))}catch(v){r(v)}},f=u=>{try{g(e.throw(u))}catch(v){r(v)}},g=u=>u.done?d(u.value):Promise.resolve(u.value).then(w,f);g((e=e.apply(s,t)).next())});import{b as L,B as U}from"./index.c8f8ec06.js";import{u as W,B as J}from"./useForm.98d7b8ca.js";import{cy as y,a as K,b as X,u as Y,r as V,l as Z,j as a,aT as D,x as ee,o as R,U as k,A as _,e as x,i as I,D as j,t as N,f as se,B as te,G as ae}from"./index.10ef4608.js";const fe=s=>y.get({url:"/gaAnalysisProcessType/queryByPage",params:s}),ge=s=>y.post({url:"/gaAnalysisProcessType/removeBatch",data:s}),re=s=>y.post({url:"/gaAnalysisProcessType/add",data:s}),oe=s=>y.put({url:"/gaAnalysisProcessType/edit",data:s}),b=s=>y.get({url:"/gaAnalysisProcessType/queryByType",params:s}),ve=s=>y.get({url:"/gaAnalysisProcessType/queryByPageOne",params:s});const le={class:"h-30 flex items-center"},ue={class:"flex-1 h-10"},ie={class:"flex justify-end"},ne=X({__name:"addOrEditOrViewModal",props:{success:{type:Function,required:!0}},setup(s){const t=s,{t:e}=Y(),{createMessage:d}=ae(),r=V("add"),w=Z(()=>a(r)==="add"?e("AllMessage.cmAdd"):a(r)==="edit"?e("AllMessage.cmEdit"):e("AllMessage.cmView")),f=V(),[g,{closeModal:u}]=L(c=>m(this,[c],function*({statusText:i,record:n}){B(),r.value=i,f.value=n,i=="edit"?setTimeout(()=>{new Promise(o=>{P([{field:"type",component:"Input",label:e("sdp.aptm.fristClass"),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E"}],componentProps:({formActionType:l,formModel:F})=>({onBlur:D(()=>m(this,null,function*(){try{const{updateSchema:p,validate:M}=l,A={level:"1",status:!1,types:F.type,type:f.value.type},q=yield b(A);yield p({field:"type",rules:[{validator:()=>q?Promise.resolve():Promise.reject("\u5DF2\u5B58\u5728"),required:!0}]}),yield M(["type"])}catch(p){console.error(p)}}),100)}),colProps:{span:24}}]),o("edit")}).then(()=>{h({disabled:!1}),S(C({},n))})},500):i=="view"?setTimeout(()=>{new Promise(o=>{P([{field:"type",component:"Input",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E"}],label:e("cm.type.type"),colProps:{span:24}}]),o("view")}).then(()=>{S(C({},n)),h({disabled:!0})})},500):i=="add"&&setTimeout(()=>{new Promise(o=>{P([{field:"type",component:"Input",label:e("sdp.aptm.fristClass"),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E"}],componentProps:({formActionType:l,formModel:F})=>({onBlur:D(()=>m(this,null,function*(){try{const{updateSchema:p,validate:M}=l,A={level:"1",status:!0,types:F.type,type:null},q=yield b(A);yield p({field:"type",rules:[{validator:()=>q?Promise.resolve():Promise.reject("\u5DF2\u5B58\u5728"),required:!0}]}),yield M(["type"])}catch(p){console.error(p)}}),100)}),colProps:{span:24}}]),o("add")}).then(()=>{h({disabled:!1})})},500)})),[v,{resetFields:B,getFieldsValue:O,setFieldsValue:S,validate:G,updateSchema:P,setProps:h}]=W({showActionButtonGroup:!1,labelWidth:80,disabled:!1,schemas:[{field:"type",component:"Input",label:e("sdp.aptm.fristClass"),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E"},{validator:(i,n)=>m(this,null,function*(){return new Promise((c,o)=>{r.value=="view"&&c(),b({level:"1",status:!0,types:n,type:null}).then(l=>{l?c():o("\u5DF2\u5B58\u5728")}).catch(()=>{o("\u5DF2\u5B58\u5728")})})}),validateTrigger:"blur"}],colProps:{span:24}}]}),H=()=>m(this,null,function*(){const i=O();debugger;if(!(yield b({level:"1",status:!0,types:i.type,type:null}))){d.error("\u5DF2\u5B58\u5728");return}try{if(!(yield G()))return;const o=O();if(a(r)==="add"){const l=yield re(o);l.code===200?d.success(e("AllMessage.successAdd")):d.error(l.msg),t.success()}else if(a(r)==="edit"){o.id=f.value.id;const l=yield oe(o);l.code===200?d.success(e("AllMessage.successEdit")):d.error(l.msg),t.success()}B(),u()}catch(c){console.error(c)}finally{}});return(i,n)=>{const c=ee("CustomButton");return R(),k(a(U),te(i.$attrs,{onRegister:a(g),title:a(w),minHeight:120}),{footer:_(()=>[x("div",ie,[I(c,{btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",padding:"0px 20px",color:"#000",marginLeft:"10px"},onClick:n[0]||(n[0]=()=>{a(B)(),r.value=="view"?function(){a(u)()}():function(){a(B)()}()})},{default:_(()=>[j(N(r.value=="view"?a(e)("AllMessage.cancel"):a(e)("AllMessage.reset")),1)]),_:1},8,["btnStyle"]),r.value!=="view"?(R(),k(c,{key:0,btnStyle:{backgroundColor:"#2F54EB",padding:"0px 20px",color:"#fff"},onClick:H},{default:_(()=>[j(N(a(e)("AllMessage.confirm")),1)]),_:1})):se("v-if",!0)])]),default:_(()=>[x("div",le,[x("div",ue,[I(a(J),{onRegister:a(v),ref:"basicForm"},null,8,["onRegister"])])])]),_:1},16,["onRegister","title"])}}});var ce=K(ne,[["__scopeId","data-v-4b30326a"]]),Be=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{fe as Q,ce as a,Be as b,ve as q,ge as r};
