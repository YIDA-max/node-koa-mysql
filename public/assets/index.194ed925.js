var h=(l,p,i)=>new Promise((u,f)=>{var g=s=>{try{d(i.next(s))}catch(m){f(m)}},B=s=>{try{d(i.throw(s))}catch(m){f(m)}},d=s=>s.done?u(s.value):Promise.resolve(s.value).then(g,B);d((i=i.apply(l,p)).next())});import{u as E,B as w}from"./useForm.98d7b8ca.js";import{cy as c,b as N,r as R,aG as z,q as L,o as W,c as q,i as n,A as a,j as e,cl as j,ab as x,cv as G,cS as P,D as b}from"./index.10ef4608.js";/* empty css               */import{u as H,B as Q}from"./useTable.a143d40c.js";import{T as U}from"./TableAction.edf9a202.js";import{u as J}from"./useBatchDelete.9dc1ae07.js";import{u as v,B as I}from"./index.c8f8ec06.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";const K=()=>[{title:"\u7F16\u53F7",dataIndex:"id",fixed:"left",width:50},{title:"\u540D\u79F0",dataIndex:"name",width:150},{title:"code",width:150,sorter:!0,dataIndex:"code"},{title:"\u6807\u8BC6",width:150,sorter:!0,dataIndex:"meaning"}],X=l=>c.post({url:"/lookup/add",data:l}),Y=l=>c.post({url:"/lookup/removeBatch",data:l}),Z=l=>c.put({url:"/lookup/edit",data:l}),ee=l=>c.get({url:"/lookup/queryLookUpPage",params:l}),oe=()=>c.get({url:"/lookup/selectListName"}),te=()=>c.get({url:"/lookup/selectListmeaning"}),ne=b("\u65B0\u589E"),ae=b("\u5220\u9664"),le=b("\u8BF7\u586B\u5199\u9879\u76EE\u4FE1\u606F"),se=b("\u4FEE\u6539\u6570\u636E"),ze=N({__name:"index",setup(l){let p=R([]),i=R([]);const u=R({name:"",meaning:"",code:"",id:""}),[f,{openModal:g}]=v(),[B,{openModal:d}]=v(),[s,{resetFields:m}]=E({labelWidth:100,schemas:[{field:"name",component:"Input",label:"\u540D\u79F0",colProps:{span:24}},{field:"code",component:"Input",label:"code",colProps:{span:24}},{field:"meaning",component:"Input",label:"\u6807\u8BC6",colProps:{span:24}}],submitButtonOptions:{text:"\u786E\u8BA4"},actionColOptions:{offset:14,span:10}}),[T,{resetFields:M,setFieldsValue:A}]=E({labelWidth:100,schemas:[{field:"name",component:"Input",label:"\u540D\u79F0",defaultValue:"",colProps:{span:24}},{field:"code",component:"Input",label:"code",defaultValue:"",colProps:{span:24}},{field:"meaning",component:"Input",label:"\u6807\u8BC6",defaultValue:"",colProps:{span:24}}],submitButtonOptions:{text:"\u786E\u8BA4"},actionColOptions:{offset:14,span:10}}),O=t=>h(this,null,function*(){X({code:`${t.code}`,meaning:`${t.meaning}`,name:`${t.name}`}),m(),setTimeout(()=>{C()},200),g(!1)}),D=t=>h(this,null,function*(){Z({id:u.value.id,code:`${t.code}`,meaning:`${t.meaning}`,name:`${t.name}`}),M(),setTimeout(()=>{C()},200),d(!1)}),[S,{setProps:_,reload:C}]=H({columns:K(),api:ee,afterFetch:t=>t,useSearchForm:!0,formConfig:{labelWidth:120,schemas:[{field:"name",component:"Select",label:"\u540D\u79F0",colProps:{span:6},componentProps:{options:p}},{field:"meaning",component:"Select",label:"\u6807\u8BC6",colProps:{span:6},componentProps:{options:i}}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:"\u64CD\u4F5C",slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:y,handleDeleteOrBatchDelete:k,selectionOptions:V}=J(Y,C,_),$=t=>{d(),u.value=t,u.value.name,u.value.code,u.value.meaning,new Promise(r=>{r(1)}).then(()=>{A(u.value)})};return z(()=>{_(V)}),L(()=>h(this,null,function*(){const t=yield oe();p.value=t,p.value.forEach((o,F)=>{o.label=o.name,o.value=o.name,o.key=F});const r=yield te();i.value=r,i.value.forEach((o,F)=>{o.label=o.meaning,o.value=o.meaning,o.key=F})})),(t,r)=>(W(),q("div",null,[n(e(G),null,{default:a(()=>[n(e(j),{span:24},{default:a(()=>[n(e(Q),{onRegister:e(S)},{toolbar:a(()=>[n(e(x),{size:"middle",shape:"round",onClick:r[0]||(r[0]=()=>{e(g)()})},{default:a(()=>[ne]),_:1}),n(e(x),{size:"middle",shape:"round",disabled:e(y),onClick:r[1]||(r[1]=o=>e(k)(null))},{default:a(()=>[ae]),_:1},8,["disabled"])]),action:a(({record:o})=>[n(e(U),{actions:[{label:"\u5220\u9664",icon:"ic:outline-delete-outline",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:()=>e(k)(o)}},{label:"\u4FEE\u6539",icon:"ic:outline-delete-outline",onClick:()=>{$(o)}}]},null,8,["actions"])]),_:1},8,["onRegister"])]),_:1})]),_:1}),n(e(I),{onRegister:e(f),showCancelBtn:!1,showOkBtn:!1},{default:a(()=>[n(e(P),{canExpan:!1},{title:a(()=>[le]),default:a(()=>[n(e(w),{onRegister:e(s),onSubmit:O},null,8,["onRegister"])]),_:1})]),_:1},8,["onRegister"]),n(e(I),{onRegister:e(B),showCancelBtn:!1,showOkBtn:!1},{default:a(()=>[n(e(P),{canExpan:!1},{title:a(()=>[se]),default:a(()=>[n(e(w),{onRegister:e(T),onSubmit:D},null,8,["onRegister"])]),_:1})]),_:1},8,["onRegister"])]))}});export{ze as default};
