var fe=Object.defineProperty,de=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var G=(e,o,s)=>o in e?fe(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,D=(e,o)=>{for(var s in o||(o={}))we.call(o,s)&&G(e,s,o[s]);if(U)for(var s of U(o))he.call(o,s)&&G(e,s,o[s]);return e},L=(e,o)=>de(e,ge(o));var W=(e,o,s)=>new Promise((u,l)=>{var p=i=>{try{r(s.next(i))}catch(c){l(c)}},t=i=>{try{r(s.throw(i))}catch(c){l(c)}},r=i=>i.done?u(i.value):Promise.resolve(i.value).then(p,t);r((s=s.apply(e,o)).next())});import{u as Z,b as E,w as j,l as w,a as I,x as v,o as d,c as B,ao as ye,aJ as g,U as S,A as h,D as R,t as T,B as O,f as P,am as b,aL as x,bR as me,dE as De,ah as H,e as J,i as N,bs as ve,b3 as Ce,r as C,bS as K,j as a,as as $,bD as be,ay as Q,aG as ee,aI as _,aA as te,bk as ke,bn as X,y as $e,ap as Be,V as Pe,W as Se,s as se,bT as Te,bW as oe,bU as Oe,bV as re,aE as _e,bG as Fe}from"./index.10ef4608.js";/* empty css               */import{u as Ve}from"./useAttrs.1d381a3e.js";const{t:Y}=Z(),ne={confirmLoading:{type:Boolean},showCancelBtn:{type:Boolean,default:!0},cancelButtonProps:Object,cancelText:{type:String,default:Y("common.cancelText")},showOkBtn:{type:Boolean,default:!0},okButtonProps:Object,okText:{type:String,default:Y("common.okText")},okType:{type:String,default:"primary"},showFooter:{type:Boolean},footerHeight:{type:[String,Number],default:60}},Le=D({isDetail:{type:Boolean},title:{type:String,default:""},loadingText:{type:String},showDetailBack:{type:Boolean,default:!0},visible:{type:Boolean},loading:{type:Boolean},maskClosable:{type:Boolean,default:!0},getContainer:{type:[Object,String]},closeFunc:{type:[Function,Object],default:null},destroyOnClose:{type:Boolean}},ne);const He=E({name:"BasicDrawerFooter",props:L(D({},ne),{height:{type:String,default:"60px"}}),emits:["ok","close"],setup(e,{emit:o}){const{prefixCls:s}=j("basic-drawer-footer"),u=w(()=>{const t=`${e.height}`;return{height:t,lineHeight:t}});function l(){o("ok")}function p(){o("close")}return{handleOk:l,prefixCls:s,handleClose:p,getStyle:u}}});function Re(e,o,s,u,l,p){const t=v("a-button");return e.showFooter||e.$slots.footer?(d(),B("div",{key:0,class:b(e.prefixCls),style:x(e.getStyle)},[e.$slots.footer?g(e.$slots,"footer",{key:1}):(d(),B(ye,{key:0},[g(e.$slots,"insertFooter"),e.showCancelBtn?(d(),S(t,O({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:h(()=>[R(T(e.cancelText),1)]),_:1},16,["onClick"])):P("v-if",!0),g(e.$slots,"centerFooter"),e.showOkBtn?(d(),S(t,O({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:h(()=>[R(T(e.okText),1)]),_:1},16,["type","onClick","loading"])):P("v-if",!0),g(e.$slots,"appendFooter")],64))],6)):P("v-if",!0)}var Ne=I(He,[["render",Re]]);const Ae=E({name:"BasicDrawerHeader",components:{BasicTitle:me,ArrowLeftOutlined:De},props:{isDetail:H.bool,showDetailBack:H.bool,title:H.string},emits:["close"],setup(e,{emit:o}){const{prefixCls:s}=j("basic-drawer-header");function u(){o("close")}return{prefixCls:s,handleClose:u}}}),Ee={key:1};function je(e,o,s,u,l,p){const t=v("BasicTitle"),r=v("ArrowLeftOutlined");return e.isDetail?(d(),B("div",{key:1,class:b([e.prefixCls,`${e.prefixCls}--detail`])},[J("span",{class:b(`${e.prefixCls}__twrap`)},[e.showDetailBack?(d(),B("span",{key:0,onClick:o[0]||(o[0]=(...i)=>e.handleClose&&e.handleClose(...i))},[N(r,{class:b(`${e.prefixCls}__back`)},null,8,["class"])])):P("v-if",!0),e.title?(d(),B("span",Ee,T(e.title),1)):P("v-if",!0)],2),J("span",{class:b(`${e.prefixCls}__toolbar`)},[g(e.$slots,"titleToolbar")],2)],2)):(d(),S(t,{key:0,class:b(e.prefixCls)},{default:h(()=>[g(e.$slots,"title"),R(" "+T(e.$slots.title?"":e.title),1)]),_:3},8,["class"]))}var Ie=I(Ae,[["render",je]]);const Me=E({components:{Drawer:ve,ScrollContainer:Ce,DrawerFooter:Ne,DrawerHeader:Ie},inheritAttrs:!1,props:Le,emits:["visible-change","ok","close","register"],setup(e,{emit:o}){const s=C(!1),u=Ve(),l=C(null),{t:p}=Z(),{prefixVar:t,prefixCls:r}=j("basic-drawer"),i={setDrawerProps:ue,emitVisible:void 0},c=_();c&&o("register",i,c.uid);const m=w(()=>K($(e),a(l))),y=w(()=>{const n=L(D(D({placement:"right"},a(u)),a(m)),{visible:a(s)});n.title=void 0;const{isDetail:f,width:V,wrapClassName:q,getContainer:pe}=n;if(f){V||(n.width="100%");const z=`${r}__detail`;n.wrapClassName=q?`${q} ${z}`:z,pe||(n.getContainer=`.${t}-layout-content`)}return n}),F=w(()=>D(D({},u),a(y))),M=w(()=>{const{footerHeight:n,showFooter:f}=a(y);return f&&n?be(n)?`${n}px`:`${n.replace("px","")}px`:"0px"}),ae=w(()=>{const n=a(M);return{position:"relative",height:`calc(100% - ${n})`}}),le=w(()=>{var n;return!!((n=a(y))!=null&&n.loading)});Q(()=>e.visible,(n,f)=>{n!==f&&(s.value=n)},{deep:!0}),Q(()=>s.value,n=>{ee(()=>{var f;o("visible-change",n),c&&((f=i.emitVisible)==null||f.call(i,n,c.uid))})});function ie(n){return W(this,null,function*(){const{closeFunc:f}=a(y);if(o("close",n),f&&te(f)){const V=yield f();s.value=!V;return}s.value=!1})}function ue(n){l.value=K(a(l)||{},n),Reflect.has(n,"visible")&&(s.value=!!n.visible)}function ce(){o("ok")}return{onClose:ie,t:p,prefixCls:r,getMergeProps:m,getScrollContentStyle:ae,getProps:y,getLoading:le,getBindValues:F,getFooterHeight:M,handleOk:ce}}});function qe(e,o,s,u,l,p){const t=v("DrawerHeader"),r=v("ScrollContainer"),i=v("DrawerFooter"),c=v("Drawer"),m=ke("loading");return d(),S(c,O({class:e.prefixCls,onClose:e.onClose},e.getBindValues),X({default:h(()=>[$e((d(),S(r,{style:x(e.getScrollContentStyle),"loading-tip":e.loadingText||e.t("common.loadingText")},{default:h(()=>[g(e.$slots,"default")]),_:3},8,["style","loading-tip"])),[[m,e.getLoading]]),N(i,O(e.getProps,{onClose:e.onClose,onOk:e.handleOk,height:e.getFooterHeight}),X({_:2},[Be(Object.keys(e.$slots),y=>({name:y,fn:h(F=>[g(e.$slots,y,Pe(Se(F||{})))])}))]),1040,["onClose","onOk","height"])]),_:2},[e.$slots.title?{name:"title",fn:h(()=>[g(e.$slots,"title")])}:{name:"title",fn:h(()=>[N(t,{title:e.getMergeProps.title,isDetail:e.isDetail,showDetailBack:e.showDetailBack,onClose:e.onClose},{titleToolbar:h(()=>[g(e.$slots,"titleToolbar")]),_:3},8,["title","isDetail","showDetailBack","onClose"])])}]),1040,["class","onClose"])}var ze=I(Me,[["render",qe]]);const k=se({}),A=se({});function Ke(){if(!_())throw new Error("useDrawer() can only be used inside setup() or functional components!");const e=C(null),o=C(!1),s=C("");function u(t,r){oe(()=>{e.value=null,o.value=null,k[a(s)]=null}),!(a(o)&&Oe()&&t===a(e))&&(s.value=r,e.value=t,o.value=!0,t.emitVisible=(i,c)=>{A[c]=i})}const l=()=>{const t=a(e);return t||re("useDrawer instance is undefined!"),t},p={setDrawerProps:t=>{var r;(r=l())==null||r.setDrawerProps(t)},getVisible:w(()=>A[~~a(s)]),openDrawer:(t=!0,r,i=!0)=>{var m;if((m=l())==null||m.setDrawerProps({visible:t}),!r)return;if(i){k[a(s)]=null,k[a(s)]=$(r);return}Te($(k[a(s)]),$(r))||(k[a(s)]=$(r))},closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({visible:!1})}};return[u,p]}const Qe=e=>{const o=C(null),s=_(),u=C("");if(!_())throw new Error("useDrawerInner() can only be used inside setup() or functional components!");const l=()=>{const t=a(o);if(!t){re("useDrawerInner instance is undefined!");return}return t},p=(t,r)=>{oe(()=>{o.value=null}),u.value=r,o.value=t,s==null||s.emit("register",t,r)};return _e(()=>{const t=k[a(u)];!t||!e||!te(e)||ee(()=>{e(t)})}),[p,{changeLoading:(t=!0)=>{var r;(r=l())==null||r.setDrawerProps({loading:t})},changeOkLoading:(t=!0)=>{var r;(r=l())==null||r.setDrawerProps({confirmLoading:t})},getVisible:w(()=>A[~~a(u)]),closeDrawer:()=>{var t;(t=l())==null||t.setDrawerProps({visible:!1})},setDrawerProps:t=>{var r;(r=l())==null||r.setDrawerProps(t)}}]},Xe=Fe(ze);export{Xe as B,Qe as a,Ke as u};
