import{a as f,i as w,j as N,o as d,f as x,e as i,w as a,k as u,c as R,u as n,I as k,h as C,l as E}from"./index-4a8cc517.js";import{_ as M}from"./index-1ec106fd.js";import{_ as P}from"./useForm-f3f06b26.js";import{u as A}from"./useTable-aaa095e4.js";import"./index-878008b6.js";import{g as O,u as D,a as Y}from"./message-98a541d5.js";import{u as r}from"./useRender-3355e2aa.js";import{D as o,g as s}from"./dict-9afd743e.js";import"./index-6202a637.js";import"./tree-56b28626.js";import"./eagerComputed-80ba1157.js";import"./index-e995ff17.js";import"./index-0114aff3.js";import"./index-310f637e.js";import"./useSize-e99e0e82.js";import"./useWindowSizeFn-5faf2053.js";import"./useContentViewHeight-08ed5cff.js";import"./ArrowLeftOutlined-91a2b19b.js";import"./index-1c6e8fcc.js";import"./transButton-0a2e0cd4.js";import"./index-68db3d9c.js";import"./index-328db71b.js";import"./get-626e6e61.js";import"./index-b6b4562f.js";import"./FullscreenOutlined-b0e65115.js";import"./index-529a9bc6.js";import"./sortable.esm-261924ea.js";import"./RedoOutlined-1b6793d7.js";import"./fromPairs-e099444b.js";import"./index-326f1109.js";import"./index-1e0bc94a.js";import"./index-4af91251.js";import"./_baseIteratee-9c9af064.js";import"./scrollTo-8b7e49e7.js";import"./index-2a26e47c.js";import"./index-d5ec7d39.js";import"./index-1d60304b.js";import"./useRefs-116b486d.js";import"./index-87ae8662.js";import"./index-5a68e7a3.js";import"./uniqBy-4c5e11fd.js";const F=[{title:"发送人",dataIndex:"templateNickname",width:100},{title:"发送时间",dataIndex:"createTime",width:180,customRender:({text:e})=>r.renderDate(e)},{title:"类型",dataIndex:"templateType",width:180,customRender:({text:e})=>r.renderDict(e,o.SYSTEM_NOTIFY_TEMPLATE_TYPE)},{title:"内容",dataIndex:"templateContent",width:300},{title:"是否已读",dataIndex:"readStatus",width:180,customRender:({text:e})=>r.renderDict(e,o.INFRA_BOOLEAN_STRING)}],B=[{label:"是否已读",field:"readStatus",component:"Select",componentProps:{options:s(o.INFRA_BOOLEAN_STRING)},colProps:{span:8}},{label:"发送时间",field:"createTime",component:"RangePicker",colProps:{span:8}}];s(o.SYSTEM_NOTIFY_TEMPLATE_TYPE),s(o.COMMON_STATUS);const L=f({name:"SystemMyMessage"}),ke=f({...L,setup(e){const{t:_}=w(),{createMessage:m}=E(),[T,{getSelectRowKeys:I,reload:p}]=A({title:"我的站内信列表",api:O,columns:F,formConfig:{labelWidth:120,schemas:B},rowSelection:{type:"checkbox"},rowKey:"id",useSearchForm:!0,showTableSetting:!0,showIndexColumn:!1,actionColumn:{width:140,title:_("common.action"),dataIndex:"action",fixed:"right"}});function h(){const t=I();l(t)}async function b(t){await l([t.id])}async function l(t){await D(t),m.success("标记已读成功！"),p()}async function y(){await Y(),m.success("全部已读成功！"),p()}return(t,U)=>{const c=N("a-button");return d(),x("div",null,[i(n(M),{onRegister:n(T)},{toolbar:a(()=>[i(c,{type:"primary",onClick:h},{default:a(()=>[u(" 标记已读 ")]),_:1}),i(c,{type:"primary",onClick:y},{default:a(()=>[u(" 全部已读 ")]),_:1})]),bodyCell:a(({column:g,record:S})=>[g.key==="action"?(d(),R(n(P),{key:0,actions:[{icon:n(k).EDIT,label:"已读",onClick:b.bind(null,S)}]},null,8,["actions"])):C("",!0)]),_:1},8,["onRegister"])])}}});export{ke as default};
