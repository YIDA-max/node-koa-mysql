var T=(P,s,a)=>new Promise((x,y)=>{var C=l=>{try{d(a.next(l))}catch(c){y(c)}},g=l=>{try{d(a.throw(l))}catch(c){y(c)}},d=l=>l.done?x(l.value):Promise.resolve(l.value).then(C,g);d((a=a.apply(P,s)).next())});import{P as S}from"./index.8d0858e7.js";import{u as O,a as D,b as M,cJ as V,r as A,ch as N,aG as U,q as F,x as I,o as u,c as W,i,A as o,j as e,cv as z,cl as G,I as $,d5 as q,d6 as H,U as k,D as _,t as v,f as h,e as J}from"./index.10ef4608.js";/* empty css               *//* empty css              *//* empty css               */import{u as L,B as Q}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as K}from"./useBatchDelete.9dc1ae07.js";import{u as X}from"./index.c8f8ec06.js";import Y from"./index.a1ce409a.js";import{R as Z,a as ee,b as te}from"./record.74637501.js";import oe from"./addOrEditOrViewModal.ee70c5cd.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";import"./CustomConfirmModal.b1ccc3b7.js";import"./upData.912f5f08.js";import"./platfrom.439ed019.js";import"./upData.88016457.js";import"./uploadIng.652fd0ac.js";import"./uploadError.d68f1456.js";const{t:b}=O(),ae=()=>[{title:b("cm.masterProject.serial"),dataIndex:"id",fixed:"left",width:50},{title:b("cm.masterProject.mainProject"),dataIndex:"projectName",width:150},{title:b("cm.masterProject.createAuthor"),width:150,dataIndex:"nickname"},{title:b("cm.masterProject.updateTime"),width:150,sorter:!0,dataIndex:"updateTime"}];const re={style:{margin:"0px 0px 0px 10px"}},ie=M({__name:"index",setup(P){const{t:s}=O(),{hasPermission:a}=V();let x=A([]);const y=N.RangePicker,[C,{openModal:g}]=X(),d=(r,t={})=>{g(!0,{statusText:r,record:t})},[l,{setProps:c,reload:m}]=L({columns:ae(),api:Z,afterFetch:r=>r,useSearchForm:!0,searchInfo:{},formConfig:{labelWidth:120,showActionButtonGroup:!1,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"300px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:s("cm.masterProject.operation"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:j,handleDeleteOrBatchDelete:B,selectionOptions:E}=K(te,m,c);return U(()=>{c(E)}),F(()=>T(this,null,function*(){x.value=yield ee(),x.value.forEach((r,t)=>{r.label=r.createBy,r.value=r.createBy,r.key=t})})),(r,t)=>{const R=I("CustomButton"),w=I("a-button");return u(),W("div",null,[i(e(S),{contentFullHeight:!0},{default:o(()=>[i(e(z),null,{default:o(()=>[i(e(G),{span:24},{default:o(()=>[i(e(Q),{onRegister:e(l)},{"form-input":o(({model:n,field:f})=>[i(e($),{value:n[f],"onUpdate:value":p=>n[f]=p,allowClear:"",onPressEnter:t[0]||(t[0]=()=>{e(m)()}),onChange:t[1]||(t[1]=({type:p})=>{p=="click"&&e(m)()}),placeholder:e(s)("cm.masterProject.inputSearch")},{prefix:o(()=>[i(e(q))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":o(({model:n,field:f})=>[i(e(y),{value:n[f],"onUpdate:value":p=>n[f]=p,onChange:t[2]||(t[2]=p=>e(m)()),separator:"-"},{suffixIcon:o(()=>[i(e(H))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:o(()=>[e(a)(["cm:main:add"])?(u(),k(R,{key:0,btnStyle:{backgroundColor:"#2F54EB"},onClick:t[3]||(t[3]=()=>{d("add")})},{default:o(()=>[_(v(e(s)("rdm.add")),1)]),_:1})):h("v-if",!0),J("div",re,[e(a)(["cm:main:del"])?(u(),k(R,{key:0,size:"middle",shape:"round",disabled:e(j),style:{background:"#fff",color:"#202020",border:"1px solid #666666",borderRadius:"4px"},onClick:t[4]||(t[4]=()=>{e(B)(null)})},{default:o(()=>[_(v(e(s)("mom.deletes")),1)]),_:1},8,["disabled"])):h("v-if",!0)]),i(Y,{callback:()=>{e(m)()}},null,8,["callback"])]),action:o(({record:n})=>[e(a)(["cm:main:view"])?(u(),k(w,{key:0,type:"link",onClick:()=>{d("view",n)}},{default:o(()=>[_(v(e(s)("cm.masterProject.lookto")),1)]),_:2},1032,["onClick"])):h("v-if",!0),e(a)(["cm:type:edit"])?(u(),k(w,{key:1,type:"link",onClick:()=>{d("edit",n)}},{default:o(()=>[_(v(e(s)("cm.type.edit")),1)]),_:2},1032,["onClick"])):h("v-if",!0),e(a)(["cm:type:del"])?(u(),k(w,{key:2,type:"link",onClick:()=>{e(B)(n)}},{default:o(()=>[_(v(e(s)("cm.type.delete")),1)]),_:2},1032,["onClick"])):h("v-if",!0)]),_:1},8,["onRegister"])]),_:1})]),_:1}),i(oe,{onRegister:e(C),success:()=>{e(m)()}},null,8,["onRegister","success"])]),_:1})])}}});var Le=D(ie,[["__scopeId","data-v-71c0db0c"]]);export{Le as default};
