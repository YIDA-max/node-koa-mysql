var D=Object.defineProperty;var y=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var A=(o,a,e)=>a in o?D(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,b=(o,a)=>{for(var e in a||(a={}))P.call(a,e)&&A(o,e,a[e]);if(y)for(var e of y(a))F.call(a,e)&&A(o,e,a[e]);return o};var d=(o,a,e)=>new Promise((r,i)=>{var f=s=>{try{c(e.next(s))}catch(t){i(t)}},h=s=>{try{c(e.throw(s))}catch(t){i(t)}},c=s=>s.done?r(s.value):Promise.resolve(s.value).then(f,h);c((e=e.apply(o,a)).next())});import{u as O,B}from"./useForm.98d7b8ca.js";import{u as E}from"./useSetFrom.689ec4a2.js";import{c as w}from"./add.f693dce6.js";import{a as I,b as V,u as j,aT as M,q,o as T,c as S,e as z,i as Z,j as R}from"./index.10ef4608.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";const k={style:{display:"flex",width:"100%",margin:"10px 0px"}},N=V({__name:"FromItem",props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(o,{expose:a}){const e=o,{t:r}=j(),i=E(),[f,{validate:h,setFieldsValue:c}]=O({labelWidth:60,schemas:[{field:"name",component:"Input",required:!0,label:r("mom.increasedData.name"),colProps:{span:6,offset:0},componentProps:{style:{borderRadius:"5px",border:"1px solid #D6D8E0 !important",height:"36px"},placeholder:" "}},{field:"phone",component:"Input",label:r("mom.increasedData.phone"),colProps:{span:9,offset:0},componentProps:({formActionType:s,formModel:t})=>({onBlur:M(()=>d(this,null,function*(){try{if(t.phone){const{updateSchema:n,validate:g}=s,x={phone:t.phone},u=yield w(x);yield n({field:"phone",rules:[{pattern:/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/,message:r("AllMessage.phoneRulesMessageOne")},{max:50,message:r("AllMessage.phoneRulesMessageTwo")},{validator:()=>d(this,null,function*(){return u?Promise.resolve():Promise.reject(r("AllMessage.phoneRulesMessageValidatorOne"))}),validateTrigger:"blur"},{validator:(v,l)=>d(this,null,function*(){if(u&&l){i.addAddDataOwnerinfo[e.index].phone=l;let m=!0;return i.addAddDataOwnerinfo.forEach((p,_)=>{_!=e.index&&p.phone==l&&(m=!1)}),i.addShareinfo.forEach(p=>{p.phone==l&&(m=!1)}),m?Promise.resolve():Promise.reject(r("AllMessage.phoneRulesMessageValidatorTwo"))}})}]}),yield g(["phone"])}}catch(n){console.error(n)}}),100),style:{borderRadius:"5px",border:"1px solid #D6D8E0 !important",height:"36px"},placeholder:" "})},{field:"mail",component:"Input",required:!0,label:r("mom.increasedData.email"),colProps:{span:9,offset:0},componentProps:({formActionType:s,formModel:t})=>({onBlur:M(()=>d(this,null,function*(){try{if(t.mail){const{updateSchema:n,validate:g}=s,x={mail:t.mail},u=yield w(x);yield n({field:"mail",rules:[{required:!0,message:r("AllMessage.mailRulesMessage")},{pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message:r("AllMessage.mailRulesMessageOne")},{max:50,message:r("AllMessage.mailRulesMessageTwo")},{validator:()=>d(this,null,function*(){return u?Promise.resolve():Promise.reject(r("AllMessage.mailRulesMessageValidatorOne"))})},{validator:(v,l)=>d(this,null,function*(){if(u&&l){i.addAddDataOwnerinfo[e.index].mail=l;let m=!0;return i.addAddDataOwnerinfo.forEach((p,_)=>{_!=e.index&&p.mail==l&&(m=!1)}),i.addShareinfo.forEach(p=>{p.mail==l&&(m=!1)}),m?Promise.resolve():Promise.reject(r("AllMessage.mailRulesMessageValidatorTwo"))}})}]}),yield g(["mail"])}}catch(n){console.error(n)}}),100),style:{borderRadius:"5px",border:"1px solid #D6D8E0 !important",height:"36px"},placeholder:" "})}],showActionButtonGroup:!1});return q(()=>{(e.item.name||e.item.phone||e.item.mail)&&c(b({},e.item))}),a({validate:h,setFieldsValue:c}),(s,t)=>(T(),S("div",null,[z("div",k,[Z(R(B),{onRegister:R(f),style:{width:"100%"}},null,8,["onRegister"])])]))}});var ce=I(N,[["__scopeId","data-v-acd90bb4"]]);export{ce as default};
