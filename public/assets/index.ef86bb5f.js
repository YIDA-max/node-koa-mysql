var B=(T,r,s)=>new Promise((C,b)=>{var w=n=>{try{k(s.next(n))}catch(d){b(d)}},f=n=>{try{k(s.throw(n))}catch(d){b(d)}},k=n=>n.done?C(n.value):Promise.resolve(n.value).then(w,f);k((s=s.apply(T,r)).next())});import S from"./index.47796f81.js";import{P as D}from"./index.8d0858e7.js";import{a as A,b as V,u as F,cJ as U,r as P,ch as X,aG as q,q as L,x as O,o as u,c as W,i as p,A as i,j as e,cv as j,cl as z,I as G,d5 as $,d6 as H,U as g,D as h,t as x,f as _}from"./index.10ef4608.js";/* empty css               *//* empty css              *//* empty css               */import{u as J,B as K}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as Q}from"./useBatchDelete.9dc1ae07.js";import Y from"./addOrEditOrViewModal.8843e481.js";import{u as Z}from"./index.c8f8ec06.js";import{q as ee,a as te,s as ae,R as oe}from"./platfrom.439ed019.js";import{h as re}from"./homePage.0537fe58.js";import"./CustomConfirmModal.c408d3aa.js";import"./modal-error.7cada6d5.js";import"./upData.b9159a09.js";/* empty css                *//* empty css                */import"./upData.88016457.js";import"./download.66a6d137.js";import"./uploadIng.430c7e4d.js";import"./uploadError.b809918b.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";const le=V({__name:"index",setup(T){const{t:r}=F(),{hasPermission:s}=U();let C=P([]);const[b,{openModal:w}]=Z(),f=(l,a={})=>{w(!0,{statusText:l,record:a})},k=X.RangePicker,n=P(),d=P(),[E,{setProps:R,reload:m}]=J({columns:[{title:r("cm.platform.serial"),dataIndex:"id",fixed:"left",sorter:!0,width:50},{title:r("cm.platform.platformName"),dataIndex:"name",width:150},{title:r("cm.platform.type"),dataIndex:"types",width:150,filters:d,format:(l,a,y)=>{let t="";return l.forEach(o=>{t=t+o.name+" "}),t}},{title:r("cm.platform.createAuthor"),width:150,dataIndex:"nickname"},{title:r("cm.platform.updateTime"),width:150,sorter:!0,dataIndex:"updateTime"}],api:l=>B(this,null,function*(){const a=yield re({meaning:"multiomics_Management_type"});n.value=a,n.value.forEach((t,o)=>{t.text=t.name,t.label=t.name,t.value=t.code,t.key=o});const y=yield ee({});return d.value=y,d.value.forEach((t,o)=>{t.text=t.name,t.label=t.name,t.value=t.code,t.key=o}),te(l)}),afterFetch:l=>l,useSearchForm:!0,searchInfo:{},formConfig:{labelWidth:120,showActionButtonGroup:!1,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"300px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:r("cm.platform.operation"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:M,handleDeleteOrBatchDelete:I,selectionOptions:N}=Q(oe,m,R);return q(()=>{R(N)}),L(()=>B(this,null,function*(){C.value=yield ae({}),C.value.forEach((l,a)=>{l.label=l.createBy,l.value=l.createBy,l.key=a})})),(l,a)=>{const y=O("CustomButton"),t=O("a-button");return u(),W("div",null,[p(e(D),{contentFullHeight:!0},{default:i(()=>[p(e(j),null,{default:i(()=>[p(e(z),{span:24},{default:i(()=>[p(e(K),{onRegister:e(E)},{"form-input":i(({model:o,field:v})=>[p(e(G),{value:o[v],"onUpdate:value":c=>o[v]=c,allowClear:"",onPressEnter:a[0]||(a[0]=()=>{e(m)()}),onChange:a[1]||(a[1]=({type:c})=>{c=="click"&&e(m)()}),placeholder:e(r)("cm.platform.inputSearch")},{prefix:i(()=>[p(e($))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":i(({model:o,field:v})=>[p(e(k),{value:o[v],"onUpdate:value":c=>o[v]=c,onChange:a[2]||(a[2]=c=>e(m)()),separator:"-"},{suffixIcon:i(()=>[p(e(H))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:i(()=>[e(s)(["cm:plat:add"])?(u(),g(y,{key:0,btnStyle:{backgroundColor:"#2F54EB"},onClick:a[3]||(a[3]=()=>{f("add")})},{default:i(()=>[h(x(e(r)("cm.platform.add")),1)]),_:1})):_("v-if",!0),e(s)(["cm:plat:del"])?(u(),g(y,{key:1,size:"middle",shape:"round",disabled:e(M),onClick:a[4]||(a[4]=()=>{e(I)(null)}),style:{background:"#fff",color:"#202020",border:"1px solid #666666",margin:"0px 0px 0px 10px",borderRadius:"4px"}},{default:i(()=>[h(x(e(r)("mom.deletes")),1)]),_:1},8,["disabled"])):_("v-if",!0),p(S,{callback:()=>{e(m)()}},null,8,["callback"])]),action:i(({record:o})=>[e(s)(["cm:main:view"])?(u(),g(t,{key:0,type:"link",onClick:()=>{f("view",o)}},{default:i(()=>[h(x(e(r)("cm.masterProject.lookto")),1)]),_:2},1032,["onClick"])):_("v-if",!0),e(s)(["cm:type:edit"])?(u(),g(t,{key:1,type:"link",onClick:()=>{f("edit",o)}},{default:i(()=>[h(x(e(r)("cm.type.edit")),1)]),_:2},1032,["onClick"])):_("v-if",!0),e(s)(["cm:type:del"])?(u(),g(t,{key:2,type:"link",onClick:()=>{e(I)(o)}},{default:i(()=>[h(x(e(r)("cm.type.delete")),1)]),_:2},1032,["onClick"])):_("v-if",!0)]),_:1},8,["onRegister"])]),_:1})]),_:1}),p(Y,{onRegister:e(b),leiXingCode:n.value,success:()=>{e(m)()}},null,8,["onRegister","leiXingCode","success"])]),_:1})])}}});var He=A(le,[["__scopeId","data-v-ab0d2c6a"]]);export{He as default};
