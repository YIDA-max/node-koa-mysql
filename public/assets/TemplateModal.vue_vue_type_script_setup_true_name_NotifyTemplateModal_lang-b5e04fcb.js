import{u as I,B as h}from"./index-b6b4562f.js";import{u as P,a as b}from"./useForm-f3f06b26.js";import"./index-1ec106fd.js";import{u as r}from"./useRender-3355e2aa.js";import{D as o,g as l}from"./dict-9afd743e.js";import{bD as n,a as d,H as w,u as a,o as M,c as S,w as x,e as N,ag as O}from"./index-4a8cc517.js";const q=[{title:"模板编码",dataIndex:"code",width:100},{title:"模板名称",dataIndex:"name",width:180},{title:"类型",dataIndex:"type",width:180,customRender:({text:e})=>r.renderDict(e,o.SYSTEM_NOTIFY_TEMPLATE_TYPE)},{title:"发送人名称",dataIndex:"nickname",width:100},{title:"模板内容",dataIndex:"content",width:300},{title:"开启状态",dataIndex:"status",width:180,customRender:({text:e})=>r.renderDict(e,o.COMMON_STATUS)},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:e})=>r.renderDate(e)}],v=[{label:"模板名称",field:"name",component:"Input",colProps:{span:8}},{label:"模版编码",field:"code",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:l(o.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],R=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"模版编码",field:"code",required:!0,component:"Input"},{label:"模板名称",field:"name",required:!0,component:"Input"},{label:"发件人名称",field:"nickname",required:!0,component:"Input"},{label:"模板内容",field:"content",required:!0,component:"InputTextArea"},{label:"类型",field:"type",component:"Select",defaultValue:0,componentProps:{options:l(o.SYSTEM_NOTIFY_TEMPLATE_TYPE)}},{label:"开启状态",field:"status",component:"RadioGroup",defaultValue:0,componentProps:{options:l(o.COMMON_STATUS)}},{label:"备注",field:"remark",component:"InputTextArea"}];function E(e){return n.post({url:"/system/notify-template/create",data:e})}function k(e){return n.put({url:"/system/notify-template/update",data:e})}function V(e){return n.delete({url:"/system/notify-template/delete?id="+e})}function A(e){return n.get({url:"/system/notify-template/get?id="+e})}function G(e){return n.get({url:"/system/notify-template/page",params:e})}const C=d({name:"NotifyTemplateModal"}),H=d({...C,emits:["success","register"],setup(e,{emit:p}){const s=w(!0),[m,{setFieldsValue:u,resetFields:f,validate:T}]=P({labelWidth:120,baseColProps:{span:24},schemas:R,showActionButtonGroup:!1,actionColOptions:{span:23}}),[g,{setModalProps:i,closeModal:_}]=I(async t=>{if(f(),i({confirmLoading:!1}),s.value=!!t?.isUpdate,a(s)){const c=await A(t.record.id);u({...c})}});async function y(){try{const t=await T();i({confirmLoading:!0}),a(s)?await k(t):await E(t),_(),p("success")}finally{i({confirmLoading:!1})}}return(t,c)=>(M(),S(a(h),O(t.$attrs,{onRegister:a(g),title:s.value?"编辑":"新增",onOk:y}),{default:x(()=>[N(a(b),{onRegister:a(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{H as _,q as c,V as d,G as g,v as s};
