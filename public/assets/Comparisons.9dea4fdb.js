var E=(c,g,m)=>new Promise((e,f)=>{var _=a=>{try{l(m.next(a))}catch(n){f(n)}},r=a=>{try{l(m.throw(a))}catch(n){f(n)}},l=a=>a.done?e(a.value):Promise.resolve(a.value).then(_,r);l((m=m.apply(c,g)).next())});import{u as I,B as V}from"./useForm.98d7b8ca.js";import{a as j,b as q,u as U,r as y,ay as w,l as D,q as R,o as O,c as J,e as d,t as S,i as h,A as C,j as u,X as k,D as M,ab as H,p as T,k as W}from"./index.10ef4608.js";import{s as X}from"./supportingPaper.267f0f46.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";const z=c=>(T("data-v-4d7a6072"),c=c(),W(),c),K={style:{display:"flex",width:"100%"}},L=z(()=>d("div",{style:{width:"10%",textAlign:"center",margin:"10px 0px 0px 0px"}},null,-1)),Q={style:{width:"10%",textAlign:"center",display:"flex",justifyContent:"center"}},Y={style:{margin:"10px 0px 0px 0px",width:"55px",height:"30px",borderRadius:"5px",lineHeight:"30px",textAlign:"center",position:"relative",right:"16px"}},Z={style:{width:"70%",display:"flex",justifyContent:"center",alignItems:"center",margin:"10px 0px 0px 0px"}},$={style:{width:"10%",textAlign:"center",margin:"10px 0px 0px 0px",position:"relative",right:"10px"}},ee=q({__name:"Comparisons",props:{arr:Array,serial:{type:Number,required:!0}},emits:["delete"],setup(c,{expose:g,emit:m}){const e=c,{t:f}=U(),_=y([]),r=X(),l=y(!1),a=y(!1);w(()=>r.FilePacketgroupName,()=>{v().controlGroup&&!r.FilePacketgroupName.some(o=>o.value==v().controlGroup)&&x({controlGroup:""}),v().experienceGroup&&!r.FilePacketgroupName.some(o=>o.value==v().experienceGroup)&&x({experienceGroup:""})},{deep:!0});const n=D(()=>Array.from(new Set(r.FilePacketgroupName.map(o=>o.value))).map(o=>r.FilePacketgroupName.find(s=>s.value===o))),[A,{validate:G,setFieldsValue:x,getFieldsValue:v}]=I({labelWidth:120,schemas:[{field:"comparisonScheme",component:"Input",label:"",colProps:{span:0,offset:0},componentProps:{allowClear:!1}},{field:"controlGroup",component:"Select",slot:"controlGroup",rules:[{validator:()=>l.value?Promise.reject("\u5BF9\u7167\u7EC4\u4E0E\u5B9E\u9A8C\u7EC4\u76F8\u540C"):a.value?Promise.reject("\u5B58\u5728\u76F8\u540C\u6BD4\u8F83\u65B9\u6848"):Promise.resolve(),required:!0}],label:"",colProps:{span:4,offset:2},componentProps:{options:n,placeholder:" "}},{field:"experienceGroup",component:"Select",slot:"experienceGroup",rules:[{validator:()=>l.value?Promise.reject("\u5BF9\u7167\u7EC4\u4E0E\u5B9E\u9A8C\u7EC4\u76F8\u540C"):a.value?Promise.reject("\u5B58\u5728\u76F8\u540C\u6BD4\u8F83\u65B9\u6848"):Promise.resolve(),required:!0}],label:"",colProps:{span:4,offset:4},componentProps:{options:n,placeholder:" "}},{field:"breaks",component:"Input",label:"",colProps:{span:5,offset:3},componentProps:{style:{borderRadius:"5px",border:"1px solid #999999",height:"30px"},placeholder:" "}}],showActionButtonGroup:!1}),N=o=>{m("delete",o)},P=(o,s)=>E(this,null,function*(){l.value=!1,a.value=!1,r.comparisonsValue[e.serial][s]=o,r.comparisonsValue[e.serial].controlGroup==r.comparisonsValue[e.serial].experienceGroup&&(l.value=!0),p(r.comparisonsValue)&&(a.value=!0),G();function p(t){const i=JSON.parse(JSON.stringify(t)),F=new Set;for(let B of i){const b=B.controlGroup+B.experienceGroup;if(F.has(b))return!0;F.add(b)}return!1}});return R(()=>{var o;(o=e.arr)==null||o.forEach((s,p)=>{if(s){const t={value:"",label:""};t.value=s,t.label=s,_.value.push(t)}}),x({comparisonScheme:(e==null?void 0:e.serial)+1}),r.comparisonsValue[e.serial]={controlGroup:e.serial+"controlGroup",experienceGroup:e.serial+"experienceGroup"}}),w(()=>e==null?void 0:e.serial,o=>{x({comparisonScheme:o+1})}),g({validate:G,setFieldsValue:x}),(o,s)=>(O(),J("div",null,[d("div",K,[L,d("div",Q,[d("div",Y,S((e==null?void 0:e.serial)+1),1)]),d("div",Z,[h(u(V),{onRegister:u(A),style:{width:"100%"}},{controlGroup:C(({model:p,field:t})=>[h(u(k),{value:p[t],"onUpdate:value":i=>p[t]=i,options:u(n),onChange:i=>{P(i,t)}},null,8,["value","onUpdate:value","options","onChange"])]),experienceGroup:C(({model:p,field:t})=>[h(u(k),{value:p[t],"onUpdate:value":i=>p[t]=i,options:u(n),onChange:i=>{P(i,t)}},null,8,["value","onUpdate:value","options","onChange"])]),_:1},8,["onRegister"])]),d("div",$,[h(u(H),{onClick:s[0]||(s[0]=()=>{N(e==null?void 0:e.serial)}),type:"link"},{default:C(()=>[M(S(u(f)("AllMessage.delete")),1)]),_:1})])])]))}});var Fe=j(ee,[["__scopeId","data-v-4d7a6072"]]);export{Fe as default};
