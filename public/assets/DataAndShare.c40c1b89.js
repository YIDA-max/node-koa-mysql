var g=(O,v,r)=>new Promise((_,i)=>{var d=s=>{try{l(r.next(s))}catch(m){i(m)}},f=s=>{try{l(r.throw(s))}catch(m){i(m)}},l=s=>s.done?_(s.value):Promise.resolve(s.value).then(d,f);l((r=r.apply(O,v)).next())});import{u as V,B as $}from"./useForm.98d7b8ca.js";import{b as k,u as F,a5 as R,r as h,l as D,cn as S,j as e,q as I,o as M,c as N,i as o,A as n,cv as A,cl as c,X as b,e as w,t as y,D as x}from"./index.10ef4608.js";/* empty css               */import q from"./index.92307965.js";import L from"./index.219aeb0a.js";import{S as j}from"./add.f693dce6.js";import{b as G}from"./homePage.0537fe58.js";/* empty css              *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";import"./TableAction.edf9a202.js";/* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";import"./CustomConfirmModal.141a10ea.js";import"./modal-error.7cada6d5.js";import"./useSetFrom.689ec4a2.js";import"./FromItem.86d7f937.js";import"./CustomConfirmModal.d0070825.js";import"./FromItem.6a232aac.js";const Q=x("\xA0 "),T=x("\xA0 "),Ae=k({__name:"DataAndShare",setup(O,{expose:v}){const{t:r}=F(),_=R(),i=h(),d=h([]),f=h([]),l=h([]);for(let a=1;a<10;a++)l.value.push({label:"\u9009\u9879"+a,value:`${a}`});const s=D(()=>S(e(l)).map(a=>(a.disabled=e(f).indexOf(a.value)!==-1,a))),m=D(()=>S(e(l)).map(a=>(a.disabled=e(d).indexOf(a.value)!==-1,a))),[B,{validate:P,setFieldsValue:E}]=V({schemas:[{field:"DataOwner",component:"Input",label:r("mom.increasedData.DataOwner"),slot:"DataOwner",defaultValue:[],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u6240\u6709\u4EBA",type:"array",trigger:"change"}],colProps:{span:19,offset:2}},{field:"ShareOne",component:"Input",label:r("mom.increasedData.ShareOne"),slot:"ShareOne",defaultValue:[],colProps:{span:19,offset:2}}],labelWidth:120,baseColProps:{span:19,offset:2},showActionButtonGroup:!1});function U(){return g(this,null,function*(){try{const[a]=yield Promise.all([P()]);return a}catch(a){console.log(a)}})}return I(()=>g(this,null,function*(){const a=yield G({id:_.params.id});i.value=a.record[0];const C=yield j();l.value=C,l.value.forEach((t,u)=>{t.label=t.nickname,t.value=t.id,t.key=u}),E({DataOwner:a.record[0].dataOwner,ShareOne:a.record[0].sharer})})),v({DataAndShareSubmitAll:U}),(a,C)=>(M(),N("div",null,[o(e($),{onRegister:e(B)},{DataOwner:n(({model:t,field:u})=>[o(e(A),null,{default:n(()=>[o(e(c),{span:10},{default:n(()=>[o(e(b),{ref:"select",getPopupContainer:p=>p.parentElement,value:t[u],"onUpdate:value":p=>t[u]=p,style:{width:"220px"},allowClear:"",mode:"multiple",options:e(s),placeholder:e(r)("AllMessage.pleaseChoose"),onChange:p=>d.value=t[u]},null,8,["getPopupContainer","value","onUpdate:value","options","placeholder","onChange"])]),_:2},1024),o(e(c),{span:4},{default:n(()=>[w("span",null,y(e(r)("mom.increasedData.AddDataOwner")),1),Q]),_:1}),o(e(c),{span:2},{default:n(()=>[w("div",null,[o(q,{value:i.value},null,8,["value"])])]),_:1})]),_:2},1024)]),ShareOne:n(({model:t,field:u})=>[o(e(A),null,{default:n(()=>[o(e(c),{span:10},{default:n(()=>[o(e(b),{ref:"select",getPopupContainer:p=>p.parentElement,value:t[u],"onUpdate:value":p=>t[u]=p,style:{width:"220px"},allowClear:"",mode:"multiple",options:e(m),placeholder:e(r)("AllMessage.pleaseChoose"),onChange:p=>f.value=t[u]},null,8,["getPopupContainer","value","onUpdate:value","options","placeholder","onChange"])]),_:2},1024),o(e(c),{span:4},{default:n(()=>[w("span",null,y(e(r)("mom.increasedData.AddShare")),1),T]),_:1}),o(e(c),{span:2},{default:n(()=>[o(L,{value:i.value},null,8,["value"])]),_:1})]),_:2},1024)]),_:1},8,["onRegister"])]))}});export{Ae as default};
