var w=(C,t,d)=>new Promise((h,m)=>{var g=n=>{try{l(d.next(n))}catch(f){m(f)}},c=n=>{try{l(d.throw(n))}catch(f){m(f)}},l=n=>n.done?h(n.value):Promise.resolve(n.value).then(g,c);l((d=d.apply(C,t)).next())});import{u as M,B as O}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{u as I}from"./index.8dc2742f.js";import{g as E,e as F,d as G}from"./roles.32b28635.js";import{c as N,s as P,_ as V}from"./RoleDrawer.434e64a7.js";import{a as j,b as z,u as A,aG as K,l as L,x as W,o as q,c as H,i as s,A as i,j as e,dB as J,d3 as D,D as p,t as b,ce as Q,G as U}from"./index.10ef4608.js";import{u as X}from"./useBatchDelete.9dc1ae07.js";import{u as Y}from"./index.c8f8ec06.js";import Z from"./DistributionModal.e42b2b95.js";import"./useForm.98d7b8ca.js";/* empty css                *//* empty css               */import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";/* empty css               *//* empty css              *//* empty css               */import"./uuid.2429c801.js";import"./useModalContext.52c86736.js";/* empty css               */import"./useSortable.79752a2a.js";/* empty css                *//* empty css                */import"./useAttrs.1d381a3e.js";/* empty css               */import"./Tree.vue_vue_type_style_index_0_lang.ee074416.js";import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";/* empty css               *//* empty css              *//* empty css               */import"./index.b6ac86eb.js";/* empty css                *//* empty css                */import"./download.66a6d137.js";import"./index.504b494d.js";const ee=z({__name:"index",setup(C){const{t}=A(),[d,{openDrawer:h}]=I(),m=["admin","user","manage"],[g,{reload:c,setProps:l,setSelectedRowKeys:n}]=M({api:E,columns:N,formConfig:{labelWidth:120,schemas:P,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!1,bordered:!0,showIndexColumn:!1,actionColumn:{width:300,title:t("system.role.operation"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:f,handleDeleteOrBatchDelete:k,selectionOptions:y}=X(G,c,l);y.rowSelection.getCheckboxProps=a=>m.includes(a.code)?{disabled:!0}:{disabled:!1},K(()=>{l(y)});const S=(a,r)=>{h(!0,{record:r,isUpdate:a})},[R,{openModal:B}]=Y(),x=(a,r)=>{B(!0,{record:r,isUpdate:a})},$=(o,_)=>w(this,[o,_],function*(a,{id:r,name:u}){l({loading:!0}),n([]);const{createMessage:T}=U();try{yield F({id:r,enable:a,name:u}),T.success(`${t(a?"system.role.enable":"system.role.disable")}${t("common.success")}`)}finally{l({loading:!1}),c()}}),v=L(()=>({background:"#fff",color:"#202020",border:"1px solid #666666"}));return(a,r)=>{const u=W("a-button");return q(),H("div",null,[s(e(O),{onRegister:e(g)},{tableTitle:i(()=>[s(e(J),{size:"middle"},{default:i(()=>[s(D,{onClick:r[0]||(r[0]=o=>S(!1)),btnStyle:e(v)},{default:i(()=>[p(b(e(t)("system.role.addRole")),1)]),_:1},8,["btnStyle"]),s(D,{onClick:e(k),disabled:e(f),btnStyle:e(v)},{default:i(()=>[p(b(e(t)("common.batchDel")),1)]),_:1},8,["onClick","disabled","btnStyle"])]),_:1})]),status:i(({record:o})=>[s(e(Q),{checked:o.enable===!0,loading:o.pendingStatus,disabled:m.includes(o.code),checkedChildren:e(t)("system.role.enable"),unCheckedChildren:e(t)("system.role.disable"),onChange:_=>$(_,o)},null,8,["checked","loading","disabled","checkedChildren","unCheckedChildren","onChange"])]),action:i(({record:o})=>[s(u,{type:"link",onClick:_=>x(!1,o)},{default:i(()=>[p(b(e(t)("system.role.lookto")),1)]),_:2},1032,["onClick"]),s(u,{onClick:_=>S(!0,o),type:"link",disabled:o.code==="admin"},{default:i(()=>[p(b(e(t)("system.role.edit")),1)]),_:2},1032,["onClick","disabled"]),s(u,{onClick:_=>x(!0,o),type:"link"},{default:i(()=>[p(b(e(t)("system.role.allot")),1)]),_:2},1032,["onClick"]),s(u,{onClick:_=>e(k)(o),type:"link",disabled:m.includes(o.code)},{default:i(()=>[p(b(e(t)("system.role.delete")),1)]),_:2},1032,["onClick","disabled"])]),_:1},8,["onRegister"]),s(V,{onRegister:e(d),onSuccess:e(c)},null,8,["onRegister","onSuccess"]),s(Z,{onRegister:e(R),onSuccess:e(c)},null,8,["onRegister","onSuccess"])])}}});var Ae=j(ee,[["__scopeId","data-v-50b52506"]]);export{Ae as default};
