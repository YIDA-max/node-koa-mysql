import{u as y,a as O}from"./useForm-f3f06b26.js";import{_ as R}from"./index-0737cab3.js";import{u as x,B as D}from"./index-b6b4562f.js";import"./index-1ec106fd.js";import{u as p}from"./useRender-3355e2aa.js";import{D as m,g as _}from"./dict-9afd743e.js";import{a as U,u as B,c as F}from"./index-d8c87956.js";import{l as N}from"./index-ea3b128d.js";import{h as A}from"./tree-56b28626.js";import{a as g,H as l,u as a,o as K,c as L,w as f,e as h,ag as V}from"./index-4a8cc517.js";const Z=[{title:"套餐编号",dataIndex:"id",width:100},{title:"套餐名",dataIndex:"name",width:180},{title:"状态",dataIndex:"status",width:180,customRender:({text:t})=>p.renderDict(t,m.COMMON_STATUS)},{title:"备注",dataIndex:"remark",width:180},{title:"创建时间",dataIndex:"createTime",width:180,customRender:({text:t})=>p.renderDate(t)}],ee=[{label:"套餐名",field:"name",component:"Input",colProps:{span:8}},{label:"状态",field:"status",component:"Select",componentProps:{options:_(m.COMMON_STATUS)},colProps:{span:8}},{label:"创建时间",field:"createTime",component:"RangePicker",colProps:{span:8}}],$=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"套餐名",field:"name",required:!0,component:"Input"},{label:"菜单权限",field:"menuIds",slot:"menuIds",component:"Input"},{label:"状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:_(m.COMMON_STATUS)}}],H=g({name:"SystemTenantPackageModal"}),ae=g({...H,emits:["success","register"],setup(t,{emit:v}){const s=l(!0),u=l([]),i=l([]),r=l([]),[I,{setFieldsValue:T,resetFields:k,validate:w}]=y({labelWidth:120,baseColProps:{span:24},schemas:$,showActionButtonGroup:!1,actionColOptions:{span:23}}),[P,{setModalProps:c,closeModal:M}]=x(async e=>{if(i.value=[],r.value=[],k(),c({confirmLoading:!1}),s.value=!!e?.isUpdate,a(s)){const n=await U(e.record.id),o=await N();u.value=A(o,"id"),T({...n})}});function S(e,n){i.value=e,r.value=n.halfCheckedKeys}async function b(){try{const e=await w();c({confirmLoading:!0}),e.menuIds=i.value.concat(r.value),a(s)?await B(e):await F(e),M(),v("success")}finally{c({confirmLoading:!1})}}return(e,n)=>(K(),L(a(D),V(e.$attrs,{onRegister:a(P),title:s.value?"编辑":"新增",onOk:b}),{default:f(()=>[h(a(O),{onRegister:a(I)},{menuIds:f(({model:o,field:d})=>[h(a(R),{value:o[d],"onUpdate:value":C=>o[d]=C,treeData:u.value,fieldNames:{title:"name",key:"id"},checkable:"",toolbar:"",onCheck:S,title:"菜单分配"},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ae as _,Z as c,ee as s};
