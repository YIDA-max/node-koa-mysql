var Je=Object.defineProperty,qe=Object.defineProperties;var Qe=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var Xe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ye=(e,n,d)=>n in e?Je(e,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[n]=d,I=(e,n)=>{for(var d in n||(n={}))Xe.call(n,d)&&ye(e,d,n[d]);if(fe)for(var d of fe(n))Ze.call(n,d)&&ye(e,d,n[d]);return e},z=(e,n)=>qe(e,Qe(n));var ke=(e,n,d)=>new Promise((k,S)=>{var l=g=>{try{f(d.next(g))}catch(b){S(b)}},i=g=>{try{f(d.throw(g))}catch(b){S(b)}},f=g=>g.done?k(g.value):Promise.resolve(g.value).then(l,i);f((d=d.apply(e,n)).next())});import{dI as et,dJ as tt,dK as nt,dL as st,dM as lt,dN as ct,dO as at,dP as ge,dQ as rt,bC as it,bm as ot,aR as be,b as ce,bR as dt,al as Fe,b8 as ut,an as U,I as ht,ah as C,u as ft,r as q,l as $,ay as P,a as yt,aT as kt,x as B,o as D,c as W,aJ as gt,f as V,U as te,A as G,D as pe,t as xe,am as bt,i as x,ao as Q,ap as pt,V as xt,W as vt,E as mt,j as y,cn as ve,dR as me,q as Le,aG as Kt,bz as Be,bO as $e,ck as St,dS as _t,d4 as Ct,aI as Tt,s as Ke,w as At,as as R,c4 as wt,bF as Se,aA as ne,dT as Mt,cY as It,aE as Y,bM as _e,y as Ce,z as Te,b3 as Et,dU as Ae,B as we,dV as Me,c1 as se,dW as Dt,aP as Ie,cm as Ft}from"./index.10ef4608.js";/* empty css               */var Lt=200;function Bt(e,n,d,k){var S=-1,l=st,i=!0,f=e.length,g=[],b=n.length;if(!f)return g;d&&(n=et(n,tt(d))),k?(l=lt,i=!1):n.length>=Lt&&(l=ct,i=!1,n=new nt(n));e:for(;++S<f;){var t=e[S],c=d==null?t:d(t);if(t=k||t!==0?t:0,i&&c===c){for(var a=b;a--;)if(n[a]===c)continue e;g.push(t)}else l(n,c,k)||g.push(t)}return g}var $t=at(function(e,n){return ge(e)?Bt(e,rt(n,1,ge,!0)):[]}),Nt=$t;const Ot=({icon:e})=>e?it(e)?ot(be,{name:e,class:"mr-1"}):be:null;const jt=ce({name:"BasicTreeHeader",components:{BasicTitle:dt,Icon:Fe,Dropdown:ut,Menu:U,MenuItem:U.Item,MenuDivider:U.Divider,InputSearch:ht.Search},props:{helpMessage:{type:[String,Array],default:""},title:C.string,toolbar:C.bool,checkable:C.bool,search:C.bool,checkAll:C.func,expandAll:C.func,searchText:C.string},emits:["strictly-change","search"],setup(e,{emit:n,slots:d}){const{t:k}=ft(),S=q(""),l=$(()=>{const t=d.headerTitle||e.title;return["mr-1","w-full",{["ml-5"]:t}]}),i=$(()=>{const{checkable:t}=e,c=[{label:k("component.tree.expandAll"),value:2},{label:k("component.tree.unExpandAll"),value:3,divider:t}];return t?[{label:k("component.tree.selectAll"),value:0},{label:k("component.tree.unSelectAll"),value:1,divider:t},...c,{label:k("component.tree.checkStrictly"),value:4},{label:k("component.tree.checkUnStrictly"),value:5}]:c});function f(t){var a,r,h,o;const{key:c}=t;switch(c){case 0:(a=e.checkAll)==null||a.call(e,!0);break;case 1:(r=e.checkAll)==null||r.call(e,!1);break;case 2:(h=e.expandAll)==null||h.call(e,!0);break;case 3:(o=e.expandAll)==null||o.call(e,!1);break;case 4:n("strictly-change",!1);break;case 5:n("strictly-change",!0);break}}function g(t){n("search",t)}const b=kt(g,200);return P(()=>S.value,t=>{b(t)}),P(()=>e.searchText,t=>{t!==S.value&&(S.value=t)}),{t:k,toolbarList:i,handleMenuClick:f,searchValue:S,getInputSearchCls:l}}}),Vt={class:"flex px-2 py-1.5 items-center basic-tree-header"},Pt={key:2,class:"flex flex-1 justify-self-stretch items-center cursor-pointer"};function Ut(e,n,d,k,S,l){const i=B("BasicTitle"),f=B("InputSearch"),g=B("Icon"),b=B("MenuItem"),t=B("MenuDivider"),c=B("Menu"),a=B("Dropdown");return D(),W("div",Vt,[e.$slots.headerTitle?gt(e.$slots,"headerTitle",{key:0},void 0,!0):V("v-if",!0),!e.$slots.headerTitle&&e.title?(D(),te(i,{key:1,helpMessage:e.helpMessage},{default:G(()=>[pe(xe(e.title),1)]),_:1},8,["helpMessage"])):V("v-if",!0),e.search||e.toolbar?(D(),W("div",Pt,[e.search?(D(),W("div",{key:0,class:bt(e.getInputSearchCls)},[x(f,{placeholder:e.t("common.searchText"),size:"small",allowClear:"",value:e.searchValue,"onUpdate:value":n[0]||(n[0]=r=>e.searchValue=r)},null,8,["placeholder","value"])],2)):V("v-if",!0),e.toolbar?(D(),te(a,{key:1,onClick:n[1]||(n[1]=mt(()=>{},["prevent"]))},{overlay:G(()=>[x(c,{onClick:e.handleMenuClick},{default:G(()=>[(D(!0),W(Q,null,pt(e.toolbarList,r=>(D(),W(Q,{key:r.value},[x(b,xt(vt({key:r.value})),{default:G(()=>[pe(xe(r.label),1)]),_:2},1040),r.divider?(D(),te(t,{key:0})):V("v-if",!0)],64))),128))]),_:1},8,["onClick"])]),default:G(()=>[x(g,{icon:"ion:ellipsis-vertical"})]),_:1})):V("v-if",!0)])):V("v-if",!0)])}var Ht=yt(jt,[["render",Ut],["__scopeId","data-v-0443acce"]]);function zt(e,n){function d(t){const c=[],a=t||y(e),{key:r,children:h}=y(n);if(!h||!r)return c;for(let o=0;o<a.length;o++){const u=a[o];c.push(u[r]);const m=u[h];m&&m.length&&c.push(...d(m))}return c}function k(t){const c=[],a=t||y(e),{key:r,children:h}=y(n);if(!h||!r)return c;for(let o=0;o<a.length;o++){const u=a[o];u.disabled!==!0&&u.selectable!==!1&&c.push(u[r]);const m=u[h];m&&m.length&&c.push(...k(m))}return c}function S(t,c){const a=[],r=c||y(e),{key:h,children:o}=y(n);if(!o||!h)return a;for(let u=0;u<r.length;u++){const m=r[u],A=m[o];t===m[h]?(a.push(m[h]),A&&A.length&&a.push(...d(A))):A&&A.length&&a.push(...S(t,A))}return a}function l(t,c,a){if(!t)return;const r=a||y(e),{key:h,children:o}=y(n);if(!(!o||!h))for(let u=0;u<r.length;u++){const m=r[u],A=m[o];if(m[h]===t){r[u]=I(I({},r[u]),c);break}else A&&A.length&&l(t,c,m[o])}}function i(t=1,c,a=1){if(!t)return[];const r=[],h=c||y(e)||[];for(let o=0;o<h.length;o++){const u=h[o],{key:m,children:A}=y(n),X=m?u[m]:"",H=A?u[A]:[];r.push(X),H&&H.length&&a<t&&(a+=1,r.push(...i(t,H,a)))}return r}function f({parentKey:t=null,node:c,push:a="push"}){const r=ve(y(e));if(!t){r[a](c),e.value=r;return}const{key:h,children:o}=y(n);!o||!h||(me(r,u=>{if(u[h]===t)return u[o]=u[o]||[],u[o][a](c),!0}),e.value=r)}function g({parentKey:t=null,list:c,push:a="push"}){const r=ve(y(e));if(!(!c||c.length<1))if(t){const{key:h,children:o}=y(n);if(!o||!h)return;me(r,u=>{if(u[h]===t){u[o]=u[o]||[];for(let m=0;m<c.length;m++)u[o][a](c[m]);return e.value=r,!0}})}else for(let h=0;h<c.length;h++)r[a](c[h])}function b(t,c){if(!t)return;const a=c||y(e),{key:r,children:h}=y(n);if(!(!h||!r))for(let o=0;o<a.length;o++){const u=a[o],m=u[h];if(u[r]===t){a.splice(o,1);break}else m&&m.length&&b(t,u[h])}}return{deleteNodeByKey:b,insertNodeByKey:f,insertNodesByKey:g,filterByLevel:i,updateNodeByKey:l,getAllKeys:d,getChildrenKeys:S,getEnabledKeys:k}}function Wt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!$e(e)}const le="context-menu",Gt={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},Ee=e=>{const{item:n}=e;return x("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,n)},[e.showIcon&&n.icon&&x(Fe,{class:"mr-2",icon:n.icon},null),x("span",null,[n.label])])};var Rt=ce({name:"ContextMenu",props:Gt,setup(e){const n=q(null),d=q(!1),k=$(()=>{const{axis:i,items:f,styles:g,width:b}=e,{x:t,y:c}=i||{x:0,y:0},a=(f||[]).length*40,r=b,h=document.body,o=h.clientWidth<t+r?t-r:t,u=h.clientHeight<c+a?c-a:c;return z(I({},g),{width:`${b}px`,left:`${o+1}px`,top:`${u+1}px`})});Le(()=>{Kt(()=>d.value=!0)}),Be(()=>{const i=y(n);i&&document.body.removeChild(i)});function S(i,f){const{handler:g,disabled:b}=i;b||(d.value=!1,f==null||f.stopPropagation(),f==null||f.preventDefault(),g==null||g())}function l(i){return i.map(f=>{const{disabled:g,label:b,children:t,divider:c=!1}=f,a={item:f,handler:S,showIcon:e.showIcon};return!t||t.length===0?x(Q,null,[x(U.Item,{disabled:g,class:`${le}__item`,key:b},{default:()=>[x(Ee,a,null)]}),c?x(St,{key:`d-${b}`},null):null]):y(d)?x(U.SubMenu,{key:b,disabled:g,popupClassName:`${le}__popup`},{title:()=>x(Ee,a,null),default:()=>l(t)}):null})}return()=>{let i;if(!y(d))return null;const{items:f}=e;return x(U,{inlineIndent:12,mode:"vertical",class:le,ref:n,style:y(k)},Wt(i=l(f))?i:{default:()=>[i]})}}});const N={domList:[],resolve:()=>{}},Yt=function(e){const{event:n}=e||{};if(n&&(n==null||n.preventDefault()),!!_t)return new Promise(d=>{const k=document.body,S=document.createElement("div"),l={};e.styles&&(l.styles=e.styles),e.items&&(l.items=e.items),e.event&&(l.customEvent=n,l.axis={x:n.clientX,y:n.clientY});const i=x(Rt,l);Ct(i,S);const f=function(){N.resolve("")};N.domList.push(S);const g=function(){N.domList.forEach(b=>{try{b&&k.removeChild(b)}catch(t){}}),k.removeEventListener("click",f),k.removeEventListener("scroll",f)};N.resolve=function(b){g(),d(b)},g(),k.appendChild(S),k.addEventListener("click",f),k.addEventListener("scroll",f)})},De=function(){N&&(N.resolve(""),N.domList=[])};function Jt(e=!0){return Tt()&&e&&Be(()=>{De()}),[Yt,De]}const qt={value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:C.string,toolbar:C.bool,search:C.bool,searchValue:C.string,checkStrictly:C.bool,clickRowToExpand:C.bool.def(!0),checkable:C.bool.def(!1),defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:C.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array},filterFn:{type:Function,default:null},highlight:{type:[Boolean,String],default:!1},expandOnSearch:C.bool.def(!1),checkOnSearch:C.bool.def(!1),selectedOnSearch:C.bool.def(!1)};function Qt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!$e(e)}var nn=ce({name:"BasicTree",inheritAttrs:!1,props:qt,emits:["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],setup(e,{attrs:n,slots:d,emit:k,expose:S}){const l=Ke({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),i=Ke({startSearch:!1,searchText:"",searchData:[]}),f=q([]),[g]=Jt(),{prefixCls:b}=At("basic-tree"),t=$(()=>{const{replaceFields:s}=e;return I({children:"children",title:"title",key:"key"},s)}),c=$(()=>{let s=z(I(I({blockNode:!0},n),e),{expandedKeys:l.expandedKeys,selectedKeys:l.selectedKeys,checkedKeys:l.checkedKeys,checkStrictly:l.checkStrictly,replaceFields:y(t),"onUpdate:expandedKeys":v=>{l.expandedKeys=v,k("update:expandedKeys",v)},"onUpdate:selectedKeys":v=>{l.selectedKeys=v,k("update:selectedKeys",v)},onCheck:(v,K)=>{let _=R(l.checkedKeys);if(wt(_)&&i.startSearch){const{key:T}=y(t);_=Nt(_,H(K.node.$attrs.node[T])),K.checked&&_.push(K.node.$attrs.node[T]),l.checkedKeys=_}else l.checkedKeys=v;const p=R(l.checkedKeys);k("update:value",p),k("check",p,K)},onRightClick:je});return Se(s,"treeData","class")}),a=$(()=>i.startSearch?i.searchData:y(f)),r=$(()=>!a.value||a.value.length===0),{deleteNodeByKey:h,insertNodeByKey:o,insertNodesByKey:u,filterByLevel:m,updateNodeByKey:A,getAllKeys:X,getChildrenKeys:H,getEnabledKeys:Ne}=zt(f,t);function Oe(s,v){return!v&&e.renderIcon&&ne(e.renderIcon)?e.renderIcon(s):v}function je(K){return ke(this,arguments,function*({event:s,node:v}){var E;const{rightMenuList:_=[],beforeRightClick:p}=e;let T={event:s,items:[]};if(p&&ne(p)){let w=yield p(v,s);Array.isArray(w)?T.items=w:Object.assign(T,w)}else T.items=_;!((E=T.items)!=null&&E.length)||g(T)})}function J(s){l.expandedKeys=s}function Ve(){return l.expandedKeys}function ae(s){l.selectedKeys=s}function Pe(){return l.selectedKeys}function re(s){l.checkedKeys=s}function Ue(){return l.checkedKeys}function ie(s){l.checkedKeys=s?Ne():[]}function Z(s){l.expandedKeys=s?X():[]}function He(s){l.checkStrictly=s}P(()=>e.searchValue,s=>{s!==i.searchText&&(i.searchText=s)},{immediate:!0}),P(()=>e.treeData,s=>{s&&ee(i.searchText)});function ee(s){if(s!==i.searchText&&(i.searchText=s),k("update:searchValue",s),!s){i.startSearch=!1;return}const{filterFn:v,checkable:K,expandOnSearch:_,checkOnSearch:p,selectedOnSearch:T}=y(e);i.startSearch=!0;const{title:E,key:w}=y(t),F=[];if(i.searchData=Mt(y(f),M=>{var L,j;const O=v?v(s,M,y(t)):(j=(L=M[E])==null?void 0:L.includes(s))!=null?j:!1;return O&&F.push(M[w]),O},y(t)),_){const M=It(i.searchData).map(O=>O[w]);M&&M.length&&J(M)}p&&K&&F.length&&re(F),T&&F.length&&ae(F)}function ze(s,v){if(!(!e.clickRowToExpand||!v||v.length===0))if(!l.expandedKeys.includes(s))J([...l.expandedKeys,s]);else{const K=[...l.expandedKeys],_=K.findIndex(p=>p===s);_!==-1&&K.splice(_,1),J(K)}}Y(()=>{f.value=e.treeData}),Le(()=>{const s=parseInt(e.defaultExpandLevel);s>0?l.expandedKeys=m(s):e.defaultExpandAll&&Z(!0)}),Y(()=>{l.expandedKeys=e.expandedKeys}),Y(()=>{l.selectedKeys=e.selectedKeys}),Y(()=>{l.checkedKeys=e.checkedKeys}),P(()=>e.value,()=>{l.checkedKeys=R(e.value||[])}),P(()=>l.checkedKeys,()=>{const s=R(l.checkedKeys);k("update:value",s),k("change",s)}),Y(()=>{l.checkStrictly=e.checkStrictly}),S({setExpandedKeys:J,getExpandedKeys:Ve,setSelectedKeys:ae,getSelectedKeys:Pe,setCheckedKeys:re,getCheckedKeys:Ue,insertNodeByKey:o,insertNodesByKey:u,deleteNodeByKey:h,updateNodeByKey:A,checkAll:ie,expandAll:Z,filterByLevel:s=>{l.expandedKeys=m(s)},setSearchValue:s=>{ee(s)},getSearchValue:()=>i.searchText});function We(s){const{actionList:v}=e;if(!(!v||v.length===0))return v.map((K,_)=>{var T;let p=!0;return ne(K.show)?p=(T=K.show)==null?void 0:T.call(K,s):Ie(K.show)&&(p=K.show),p?x("span",{key:_,class:`${b}__action`},[K.render(s)]):null})}function oe({data:s,level:v}){if(!s)return null;const K=i.searchText,{highlight:_}=y(e);return s.map(p=>{var de;const{title:T,key:E,children:w}=y(t),F=Se(p,"title"),M=Oe(z(I({},p),{level:v}),p.icon),O=se(p,w)||[],L=se(p,T),j=K?L.indexOf(K):-1,Ge=i.startSearch&&!Dt(K)&&_&&j!==-1,Re=`color: ${Ie(_)?"#f50":_}`,Ye=Ge?x("span",{class:(de=y(c))!=null&&de.blockNode?`${b}__content`:""},[x("span",null,[L.substr(0,j)]),x("span",{style:Re},[K]),x("span",null,[L.substr(j+K.length)])]):L;return x(Ae.TreeNode,we(F,{node:R(p),key:se(p,E)}),{title:()=>{var ue,he;return x("span",{class:`${b}-title pl-2`,onClick:ze.bind(null,p[E],p[w])},[(ue=p.slots)!=null&&ue.title?Ft(d,(he=p.slots)==null?void 0:he.title,p):x(Q,null,[M&&x(Ot,{icon:M},null),Ye,x("span",{class:`${b}__actions`},[We(z(I({},p),{level:v}))])])])},default:()=>oe({data:O,level:v+1})})})}return()=>{let s;const{title:v,helpMessage:K,toolbar:_,search:p,checkable:T}=e,E=v||_||p||d.headerTitle,w={height:"calc(100% - 38px)"};return x("div",{class:[b,"h-full",n.class]},[E&&x(Ht,{checkable:T,checkAll:ie,expandAll:Z,title:v,search:p,toolbar:_,helpMessage:K,onStrictlyChange:He,onSearch:ee,searchText:i.searchText},Qt(s=_e(d))?s:{default:()=>[s]}),Ce(x(Et,{style:w},{default:()=>[x(Ae,we(y(c),{showIcon:!1}),I({default:()=>oe({data:y(a),level:1})},_e(d)))]}),[[Te,!y(r)]]),Ce(x(Me,{image:Me.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[Te,y(r)]])])}}});export{nn as _};
