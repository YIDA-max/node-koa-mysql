var P=(b,o,s)=>new Promise((v,y)=>{var f=i=>{try{d(s.next(i))}catch(p){y(p)}},w=i=>{try{d(s.throw(i))}catch(p){y(p)}},d=i=>i.done?v(i.value):Promise.resolve(i.value).then(f,w);d((s=s.apply(b,o)).next())});import{P as R}from"./index.8d0858e7.js";import{a as E,b as A,u as D,cJ as F,ch as S,r as V,aG as U,q,x as I,o as u,c as z,i as n,A as a,j as e,cv as N,cl as W,I as j,d5 as G,d6 as Q,U as k,D as g,t as x,f as c}from"./index.10ef4608.js";/* empty css               *//* empty css              *//* empty css               */import{u as H,B as J}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{Q as $,q as K,a as L,r as X}from"./addOrEditOrViewModal.2d8d133a.js";import{u as Y}from"./useBatchDelete.9dc1ae07.js";import{u as Z}from"./index.c8f8ec06.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useWindowSizeFn.3e5b045d.js";import"./useContentViewHeight.9302814f.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";/* empty css                */import"./useModalContext.52c86736.js";import"./download.66a6d137.js";import"./index.504b494d.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./index.866ec2c8.js";import"./modal-error.7cada6d5.js";const ee=A({__name:"index",setup(b){const{t:o}=D(),{hasPermission:s}=F(),[v,{openModal:y}]=Z(),f=(r,t={})=>{y(!0,{statusText:r,record:t})},w=S.RangePicker,d=V(),[i,{setProps:p,reload:h}]=H({columns:[{title:o("sdp.aptm.flowFristType"),dataIndex:"type",filters:d,width:150},{title:o("sdp.aptm.serial"),dataIndex:"id",fixed:"left",width:150},{title:o("sdp.aptm.createAuthor"),width:150,dataIndex:"nickname"},{title:o("sdp.aptm.updateTime"),width:150,sorter:!0,dataIndex:"updateTime"}],api:$,afterFetch:r=>r,useSearchForm:!0,searchInfo:{},formConfig:{labelWidth:120,showActionButtonGroup:!1,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"300px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"300px"}},slot:"createTime"}]},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:200,title:o("sdp.aptm.operation"),slots:{customRender:"action"},fixed:"right"}}),{hasBatchDelete:O,handleDeleteOrBatchDelete:B,selectionOptions:M}=Y(X,h,p);return U(()=>{p(M)}),q(()=>P(this,null,function*(){d.value=yield K(),d.value.forEach((r,t)=>{r.label=r.type,r.text=r.type,r.value=r.type,r.key=t})})),(r,t)=>{const T=I("CustomButton"),_=I("a-button");return u(),z("div",null,[n(e(R),{contentFullHeight:!0},{default:a(()=>[n(e(N),null,{default:a(()=>[n(e(W),{span:24},{default:a(()=>[n(e(J),{onRegister:e(i)},{"form-input":a(({model:l,field:C})=>[n(e(j),{value:l[C],"onUpdate:value":m=>l[C]=m,allowClear:"",onPressEnter:t[0]||(t[0]=()=>{e(h)()}),onChange:t[1]||(t[1]=({type:m})=>{m=="click"&&e(h)()}),placeholder:e(o)("sdp.aptm.inputSearch")},{prefix:a(()=>[n(e(G))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":a(({model:l,field:C})=>[n(e(w),{value:l[C],"onUpdate:value":m=>l[C]=m,onChange:t[2]||(t[2]=m=>e(h)()),separator:"-"},{suffixIcon:a(()=>[n(e(Q))]),_:2},1032,["value","onUpdate:value"])]),tableTitle:a(()=>[e(s)(["sdp:flow:one:add"])?(u(),k(T,{key:0,size:"middle",shape:"round",onClick:t[3]||(t[3]=()=>{f("add")}),style:{background:"#3152ed",color:"#ffffff",margin:"0px 0px",borderRadius:"4px"}},{default:a(()=>[g(x(e(o)("common.addText")),1)]),_:1})):c("v-if",!0),e(s)(["sdp:flow:one:del"])?(u(),k(T,{key:1,size:"middle",shape:"round",disabled:e(O),onClick:t[4]||(t[4]=()=>{e(B)(null)}),style:{background:"#fff",color:"#202020",border:"1px solid #666666",margin:"0px 10px",borderRadius:"4px"}},{default:a(()=>[g(x(e(o)("mom.deletes")),1)]),_:1},8,["disabled"])):c("v-if",!0)]),action:a(({record:l})=>[e(s)(["cm:main:view"])?(u(),k(_,{key:0,type:"link",onClick:()=>{f("view",l)}},{default:a(()=>[g(x(e(o)("cm.masterProject.lookto")),1)]),_:2},1032,["onClick"])):c("v-if",!0),e(s)(["cm:type:edit"])?(u(),k(_,{key:1,type:"link",onClick:()=>{f("edit",l)}},{default:a(()=>[g(x(e(o)("cm.type.edit")),1)]),_:2},1032,["onClick"])):c("v-if",!0),e(s)(["cm:type:del"])?(u(),k(_,{key:2,type:"link",onClick:()=>{e(B)(l)}},{default:a(()=>[g(x(e(o)("cm.type.delete")),1)]),_:2},1032,["onClick"])):c("v-if",!0)]),_:1},8,["onRegister"])]),_:1})]),_:1}),c(` <BasicModal @register="IuseModalAdd" :showCancelBtn="false" :showOkBtn="false"\r
        ><CollapseContainer :canExpan="false">\r
          <template #title>{{ t('sdp.aptm.inputFristClass') }}</template>\r
          <template #default>\r
            <BasicForm @register="registerAdd" @submit="handleSubmitAdd"\r
          /></template> </CollapseContainer\r
      ></BasicModal>\r
      <BasicModal @register="IuseModalChange" :showCancelBtn="false" :showOkBtn="false"\r
        ><CollapseContainer :canExpan="false">\r
          <template #title>{{\r
            lookorchang == '\u67E5\u770B' ? t('sdp.aptm.viewData') : t('sdp.aptm.editData')\r
          }}</template>\r
          <template #default>\r
            <BasicForm @register="registerChange" @submit="handleSubmitChange"\r
          /></template> </CollapseContainer\r
      ></BasicModal> `),n(L,{onRegister:e(v),success:()=>{e(h)()}},null,8,["onRegister","success"])]),_:1})])}}});var Fe=E(ee,[["__scopeId","data-v-37d32a5c"]]);export{Fe as default};
