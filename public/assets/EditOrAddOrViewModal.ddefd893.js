var $=Object.defineProperty,H=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var M=(t,a,e)=>a in t?$(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,E=(t,a)=>{for(var e in a||(a={}))Z.call(a,e)&&M(t,e,a[e]);if(A)for(var e of A(a))J.call(a,e)&&M(t,e,a[e]);return t},C=(t,a)=>H(t,Q(a));var F=(t,a,e)=>new Promise((s,n)=>{var p=i=>{try{d(e.next(i))}catch(m){n(m)}},l=i=>{try{d(e.throw(i))}catch(m){n(m)}},d=i=>i.done?s(i.value):Promise.resolve(i.value).then(p,l);d((e=e.apply(t,a)).next())});import{b as X,B as Y}from"./index.c8f8ec06.js";import{u as ee,B as te}from"./useForm.98d7b8ca.js";import{M as ae,a as oe}from"./index.968d275e.js";import{u as se,aT as N,a as re,b as ue,r as P,l as le,j as u,T as V,x as ne,o as w,U as _,A as b,e as x,f as g,i as k,c as q,ap as ie,ao as L,B as de,D as T,p as ce,k as pe,G as me}from"./index.10ef4608.js";/* empty css               */import{c as fe,d as O,e as ve,f as we}from"./index.57ae27c7.js";import{g as be,e as ye}from"./homePage.545183cd.js";const{t:o}=se();function qe(t){return[{title:o("sdp.afcic.serial"),dataIndex:"id",width:150},{title:o("sdp.afcic.flowName"),dataIndex:"technologicalProcessName",width:200},{title:o("sdp.afcic.status"),dataIndex:"status",width:100,format:(a,e,s)=>o(a==="1"?"sdp.afcic.active":"sdp.afcic.close")},{title:o("sdp.afcic.flowSerial"),dataIndex:"numbers",width:150},{title:o("sdp.afcic.flowFristType"),dataIndex:"oneLevel",width:150,filters:t.oneFilter},{title:o("sdp.afcic.flowTwoType"),dataIndex:"twoLevel",width:150,filters:t.twoFilter},{title:o("sdp.afcic.createAuthor"),width:150,dataIndex:"nickname"},{title:o("sdp.afcic.updateTime"),width:200,sorter:!0,dataIndex:"updateTime"}]}const Le=[{label:"",field:"keyword",component:"Input",slot:"input",colProps:{span:6}},{field:"times",component:"RangePicker",label:" ",slot:"createTime",labelWidth:"60px",colProps:{span:6}}];function he(t){return[{label:"",field:"id",component:"Input",show:!1,defaultValue:new Date().getTime()},{field:"identification",label:"",component:"Input",defaultValue:"\u4E34\u65F6\u4ED3\u9996\u9875",show:!1},{label:o("sdp.aptm.fristClass"),field:"oneLevel",labelWidth:80,component:"ApiSelect",componentProps:({formActionType:a,formModel:e})=>({api:fe,labelField:"type",valueField:"code",onChange:s=>F(this,null,function*(){try{const{updateSchema:n}=a,l=(yield O({code:s})).map(d=>({label:d.type,value:d.type}));e.twoLevel=void 0,n({field:"twoLevel",componentProps:{options:l}})}catch(n){console.error(n)}})}),required:!0},{label:o("sdp.afcic.twoType"),labelWidth:80,field:"twoLevel",component:"Select",required:!0},{label:o("sdp.afcic.flowName"),labelWidth:80,field:"technologicalProcessName",component:"Input",componentProps:({formActionType:a,formModel:e})=>({onBlur:N(()=>F(this,null,function*(){try{const{status:s}=t,{updateSchema:n,validate:p}=a,l={level:"\u4E34\u65F6\u4ED3\u9996\u9875",status:s==="add",types:e.technologicalProcessName,type:s==="add"?void 0:t.oldProcessName},d=yield ve(l);yield n({field:"technologicalProcessName",rules:[{validator:()=>d?Promise.resolve():Promise.reject("\u5DF2\u5B58\u5728")},{required:!0}]}),yield p(["technologicalProcessName"])}catch(s){console.error(s)}}),100)}),required:!0},{label:o("sdp.afcic.flowDesc"),labelWidth:80,field:"introduce",component:"InputTextArea",componentProps:{autosize:{minRows:3,maxRows:3}},required:!0},{field:"status",component:"RadioGroup",label:o("sdp.afcic.dataType"),required:!0,defaultValue:"1",componentProps:{options:[{label:o("sdp.afcic.active"),value:"1"},{label:o("sdp.afcic.close"),value:"0"}]}},{label:o("sdp.aptm.serial"),labelWidth:80,field:"numbers",component:"Input",componentProps:({formActionType:a,formModel:e})=>({onBlur:N(()=>F(this,null,function*(){const{status:s}=t,{updateSchema:n,validate:p}=a,l={level:"\u4E34\u65F6\u4ED3\u9996\u9875",status:s==="add",types:e.numbers,type:s==="add"?void 0:t.oldNumber},d=yield we(l);yield n({field:"numbers",rules:[{validator:(i,m)=>m===""?Promise.reject("\u8BF7\u8F93\u5165\u7F16\u53F7"):/^[a-zA-Z0-9]+$/.test(m)?d?Promise.resolve():Promise.reject("\u5DF2\u5B58\u5728"):Promise.reject("\u4EC5\u652F\u6301\u82F1\u6587\u548C\u6570\u5B57\u7EC4\u5408"),required:!0}]}),yield p(["numbers"])}))}),required:!0},{field:"markdownGroup",label:"",component:"Input",slot:"markdownGroup"}]}const I=[{name:o("sdp.aptm.example"),params:"example"},{name:o("sdp.aptm.ptjs"),params:"platformIntroduction"},{name:o("sdp.aptm.czal"),params:"operationCase"},{name:o("sdp.aptm.jscs"),params:"technicalParameter"},{name:o("sdp.aptm.jgzs"),params:"resultDisplay"}];const Fe=t=>(ce("data-v-36d90595"),t=t(),pe(),t),_e=Fe(()=>x("br",null,null,-1)),ge={style:{height:"420px"}},Pe={class:"flex justify-end"},xe=T("\u91CD\u7F6E"),Be=T("\u786E\u5B9A"),Ee=T("\u53D6\u6D88"),Ce=ue({__name:"EditOrAddOrViewModal",emits:["register","success"],setup(t,{emit:a}){const e=P(),s=P("add"),n=P(0),p=le(()=>u(s)==="add"?"\u8BF7\u586B\u5199\u5361\u7247\u8BE6\u7EC6\u4FE1\u606F":u(s)==="edit"?"\u7F16\u8F91\u5361\u7247\u8BE6\u7EC6\u4FE1\u606F":"\u67E5\u770B"),l=P(!1),d=V.TabPane,{createMessage:i}=me(),[m,{resetFields:B,setProps:j,getFieldsValue:R,setFieldsValue:D,validate:W,updateSchema:G}]=ee({showActionButtonGroup:!1,labelWidth:120,disabled:l}),[z,{closeModal:S}]=X(f=>F(this,null,function*(){const{statusPayload:c,record:r}=f;if(s.value=c,yield j({schemas:he({status:c,oldProcessName:r.technologicalProcessName,oldNumber:r.numbers})}),c==="view"?(l.value=!0,yield D(C(E({},r),{oneLevel:r.codes})),I.forEach(y=>{e.value.formModel[y.params]=f.record[y.params]})):l.value=!1,c==="edit"){yield D(C(E({},r),{oneLevel:r.codes}));const v=(yield O({code:r.codes})).map(h=>({label:h.type,value:h.type}));G({field:"twoLevel",componentProps:{options:v}}),I.forEach(h=>{e.value.formModel[h.params]=f.record[h.params]})}})),K=()=>F(this,null,function*(){try{if(!(yield W()))return;const c=R();if(u(s)==="add"){c.id=new Date().getTime();const r=yield be(c);r.code===200?i.success("\u5361\u7247\u6DFB\u52A0\u6210\u529F"):i.error(r.msg)}else if(u(s)==="edit"){const r=yield ye(c);r.code===200?i.success("\u5361\u7247\u7F16\u8F91\u6210\u529F"):i.error(r.msg)}S(),a("success"),B(),n.value=0}catch(f){console.error(f)}finally{}});return(f,c)=>{const r=ne("CustomButton");return w(),_(u(Y),de(f.$attrs,{onRegister:u(z),defaultFullscreen:"",width:"800px",onCancel:u(B),title:u(p)}),{footer:b(()=>[x("div",Pe,[l.value?g("v-if",!0):(w(),_(r,{key:0,btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",padding:"0px 20px",color:"#000",marginLeft:"10px"},onClick:u(B)},{default:b(()=>[xe]),_:1},8,["btnStyle","onClick"])),l.value?g("v-if",!0):(w(),_(r,{key:1,btnStyle:{backgroundColor:"#2F54EB",padding:"0px 20px",color:"#fff"},onClick:K},{default:b(()=>[Be]),_:1})),l.value?(w(),_(r,{key:2,btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",padding:"0px 20px",color:"#000",marginLeft:"10px"},onClick:u(S)},{default:b(()=>[Ee]),_:1},8,["btnStyle","onClick"])):g("v-if",!0)])]),default:b(()=>[_e,k(u(te),{onRegister:u(m),ref_key:"basicForm",ref:e},{markdownGroup:b(({model:y})=>[x("div",ge,[k(u(V),{activeKey:n.value,"onUpdate:activeKey":c[0]||(c[0]=v=>n.value=v)},{default:b(()=>[(w(!0),q(L,null,ie(u(I),(v,h)=>(w(),_(u(d),{key:h,tab:v.name},{default:b(()=>[x("div",null,[g(" \u67E5\u770B\u5C55\u793A\u8FD9\u4E2A "),l.value?(w(),_(u(ae),{key:0,value:y[v.params]},null,8,["value"])):(w(),q(L,{key:1},[g(" \u6DFB\u52A0\u548C\u4FEE\u6539\u5C55\u793A\u8FD9\u4E2A "),k(u(oe),{value:y[v.params],"onUpdate:value":U=>y[v.params]=U,mode:"wysiwyg"},null,8,["value","onUpdate:value"])],2112))])]),_:2},1032,["tab"]))),128))]),_:2},1032,["activeKey"])])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","onCancel","title"])}}});var ke=re(Ce,[["__scopeId","data-v-36d90595"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:ke},Symbol.toStringTag,{value:"Module"}));export{ke as E,Oe as a,Le as c,qe as u};
