import{u as h,B as I}from"./index-b6b4562f.js";import{u as M,a as w}from"./useForm-f3f06b26.js";import"./index-1ec106fd.js";import{u as r}from"./useRender-3355e2aa.js";import{D as s,g as c}from"./dict-9afd743e.js";import{bD as n,a as d,H as y,u as o,o as N,c as P,w as b,e as O,ag as C}from"./index-4a8cc517.js";const k=[{title:"公告编号",dataIndex:"id",width:100},{title:"公告标题",dataIndex:"title",width:180},{title:"公告类型",dataIndex:"type",width:180,customRender:({text:e})=>r.renderDict(e,s.SYSTEM_NOTICE_TYPE)},{title:"状态",dataIndex:"status",width:180,customRender:({text:e})=>r.renderDict(e,s.COMMON_STATUS)},{title:"创建时间",dataIndex:"createTime",customRender:({text:e})=>r.renderDate(e)}],L=[{label:"公告标题",field:"title",component:"Input",colProps:{span:8}},{label:"公告状态",field:"status",component:"Select",componentProps:{options:c(s.COMMON_STATUS)},colProps:{span:8}}],x=[{label:"编号",field:"id",show:!1,component:"Input"},{label:"公告标题",field:"title",required:!0,component:"Input"},{label:"公告类型",field:"type",component:"Select",defaultValue:0,componentProps:{options:c(s.SYSTEM_NOTICE_TYPE)}},{label:"状态",field:"status",component:"Select",defaultValue:0,componentProps:{options:c(s.COMMON_STATUS)}},{label:"内容",field:"content",component:"InputTextArea"}];function H(e){return n.get({url:"/system/notice/page",params:e})}function R(e){return n.get({url:"/system/notice/get?id="+e})}function D(e){return n.post({url:"/system/notice/create",data:e})}function E(e){return n.put({url:"/system/notice/update",data:e})}function $(e){return n.delete({url:"/system/notice/delete?id="+e})}const A=d({name:"SystemNoticeModal"}),q=d({...A,emits:["success","register"],setup(e,{emit:u}){const a=y(!0),[p,{setFieldsValue:m,resetFields:f,validate:g}]=M({labelWidth:120,baseColProps:{span:24},schemas:x,showActionButtonGroup:!1,actionColOptions:{span:23}}),[_,{setModalProps:i,closeModal:S}]=h(async t=>{if(f(),i({confirmLoading:!1}),a.value=!!t?.isUpdate,o(a)){const l=await R(t.record.id);m({...l})}});async function T(){try{const t=await g();i({confirmLoading:!0}),o(a)?await E(t):await D(t),S(),u("success")}finally{i({confirmLoading:!1})}}return(t,l)=>(N(),P(o(I),C(t.$attrs,{onRegister:o(_),title:a.value?"编辑":"新增",onOk:T}),{default:b(()=>[O(o(w),{onRegister:o(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{q as _,k as c,$ as d,H as g,L as s};
