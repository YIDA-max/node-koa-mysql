var d=(B,a,c)=>new Promise((h,b)=>{var m=r=>{try{p(c.next(r))}catch(C){b(C)}},g=r=>{try{p(c.throw(r))}catch(C){b(C)}},p=r=>r.done?h(r.value):Promise.resolve(r.value).then(m,g);p((c=c.apply(B,a)).next())});import{u as T,B as D}from"./useTable.a143d40c.js";import"./TableAction.edf9a202.js";import{a as P,b as k,d as A,e as R}from"./homePage.249d27b4.js";import{a as O,b as M,u as U,ch as N,r as j,x as v,o as z,c as V,i as n,A as l,j as i,I as $,d5 as q,d6 as G,f as W,e as K,D as y,t as E,G as L}from"./index.10ef4608.js";/* empty css              *//* empty css               */import{d as H}from"./download.66a6d137.js";import{C as I}from"./index.866ec2c8.js";import"./useForm.98d7b8ca.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import"./index.b6ac86eb.js";import"./useAttrs.1d381a3e.js";/* empty css                *//* empty css                */import"./uuid.2429c801.js";import"./index.c8f8ec06.js";import"./useWindowSizeFn.3e5b045d.js";import"./useModalContext.52c86736.js";/* empty css                */import"./index.504b494d.js";import"./index.8d0858e7.js";/* empty css               */import"./onMountedOrActivated.0d13b2a6.js";import"./useContentViewHeight.9302814f.js";import"./icon-remark.1929ee0a.js";import"./useSortable.79752a2a.js";/* empty css                */import"./modal-error.7cada6d5.js";const J={class:"p-5"},Q={class:"flex absolute top-0 right-0 h-10 items-center"},X=y(" \u6279\u91CF\u4E0B\u8F7D"),Y=y("\u5220\u9664"),Z=M({__name:"MutipleOmics",setup(B){const{t:a}=U(),c=N.RangePicker,h=j(!0),[b,{reload:m,getSelectRows:g,clearSelectedRowKeys:p}]=T({columns:[{title:a("ftm.serial"),dataIndex:"id",width:150},{title:a("ftm.fileName"),dataIndex:"fileRealName",width:150},{title:a("ftm.fileSize"),dataIndex:"fileSize",width:150,format:(t,e,s)=>t?`${(t/1024/1024).toFixed(4)=="0.0000"?1e-4:(t/1024/1024).toFixed(4)} MB`:"\u672A\u8BB0\u5F55\u5927\u5C0F"},{title:"\u4E3B\u9879\u76EE",dataIndex:"masterProject",width:150,sorter:!0},{title:"\u5B50\u9879\u76EE",dataIndex:"subProject",width:150,sorter:!0},{title:a("ftm.fileStatus"),dataIndex:"status",width:150,format:t=>t==="done"?"\u4E0A\u4F20\u5B8C\u6210":t==="uploading"?"\u4E0A\u4F20\u4E2D":t=="suspend"?"\u5931\u8D25":"\u672A\u77E5\u7ED3\u679C"},{title:a("ftm.createAuthor"),dataIndex:"nickname",width:150},{title:a("ftm.createTime"),dataIndex:"createTime",width:200,sorter:!0}],api:P,searchInfo:{ifBigFile:!0,dataType:0},sortFn:t=>{const{field:e,order:s}=t;return e&&s?{type:e==="masterProject"?0:e==="subProject"?1:"",sort:s==="ascend"?"asc":"desc"}:{}},afterFetch:t=>{const e=[...t];return e.forEach(s=>{s.statuss=s.status}),e},useSearchForm:!0,formConfig:{showActionButtonGroup:!1,labelWidth:0,schemas:[{field:"keyword",component:"Input",label:"",slot:"input",colProps:{style:{width:"450px"}}},{field:"times",component:"RangePicker",label:" ",labelWidth:60,colProps:{style:{width:"calc(100% - 450px)"}},slot:"createTime"}],actionColOptions:{span:10}},bordered:!0,clickToRowSelect:!1,isTreeTable:!1,striped:!0,showTableSetting:!1,showIndexColumn:!1,canResize:!0,actionColumn:{width:160,title:a("ftm.operation"),slots:{customRender:"action"},fixed:"right"},rowSelection:{type:"checkbox"}}),r=t=>d(this,null,function*(){const e=yield k({id:t});H({url:e.downloadUrl,target:"_self"})}),C=()=>d(this,null,function*(){const t=yield g();t.length==0&&_.error(a("AllMessage.PleaseCheckTheFollowingDocumentsInTheForm")),t.forEach((e,s)=>d(this,null,function*(){setTimeout(()=>d(this,null,function*(){const f=yield k({id:e.id}),o=document.createElement("iframe");o.style.display="none",o.style.height="0",o.src=f.downloadUrl,document.body.appendChild(o),setTimeout(()=>{o.remove()},1e3)}),(s+1)*300)})),p()}),x=()=>d(this,null,function*(){m()}),F=t=>{A({id:t}),m()},{createMessage:_}=L(),S=()=>d(this,null,function*(){const e=(yield g()).map(f=>f.id),{code:s}=yield R({ids:e});s===200?(p(),m(),_.success("\u5220\u9664\u6210\u529F")):_.success("\u5220\u9664\u5931\u8D25")});return(t,e)=>{const s=v("CustomButton"),f=v("a-button");return z(),V("div",J,[n(i(D),{onRegister:i(b),style:{padding:0},onSelectionChange:e[5]||(e[5]=({rows:o})=>h.value=!(o.length>0))},{"form-input":l(({model:o,field:w})=>[n(i($),{value:o[w],"onUpdate:value":u=>o[w]=u,allowClear:"",onPressEnter:e[0]||(e[0]=u=>x()),placeholder:i(a)("ftm.mutipleOmicsSearch"),onChange:e[1]||(e[1]=({type:u})=>{u=="click"&&x()})},{prefix:l(()=>[n(i(q))]),_:2},1032,["value","onUpdate:value","placeholder"])]),"form-createTime":l(({model:o,field:w})=>[n(i(c),{value:o[w],"onUpdate:value":u=>o[w]=u,onChange:e[2]||(e[2]=u=>i(m)()),separator:"-"},{suffixIcon:l(()=>[n(i(G))]),_:2},1032,["value","onUpdate:value"]),W(" \u5E94\u8BBE\u8BA1\u8981\u6C42,\u6309\u94AE\u548C\u64CD\u4F5C\u8F93\u5165\u6846\u8981\u653E\u540C\u4E00\u884C "),K("div",Q,[n(s,{size:"middle",btnStyle:{backgroundColor:"#fff",border:"1px solid rgb(102, 102, 102)",color:"#000"},disabled:h.value,onClick:e[3]||(e[3]=()=>{i(I)({onOk:()=>{S()}})})},{default:l(()=>[y(E(i(a)("mom.deletes")),1)]),_:1},8,["btnStyle","disabled"]),n(s,{size:"middle",btnStyle:{backgroundColor:"#2F54EB",color:"#fff",marginLeft:"20px"},disabled:h.value,onClick:e[4]||(e[4]=()=>{C()})},{default:l(()=>[X]),_:1},8,["disabled"])])]),action:l(({record:o})=>[n(f,{type:"link",onClick:()=>{i(I)({onOk:()=>{F(o.id)}})}},{default:l(()=>[Y]),_:2},1032,["onClick"]),n(f,{type:"link",disabled:o.status!=="done",onClick:()=>{r(o.id)}},{default:l(()=>[y(E(i(a)("ftm.download")),1)]),_:2},1032,["disabled","onClick"])]),_:1},8,["onRegister"])])}}});var Ae=O(Z,[["__scopeId","data-v-50b9d3df"]]);export{Ae as default};
